{"version":3,"file":"js/app.0469107c.js","mappings":"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","sources":["webpack://todo-focus/./src/App.vue","webpack://todo-focus/./src/firebase.js","webpack://todo-focus/./src/components/FooterElement.vue","webpack://todo-focus/./src/components/FooterElement.vue?7532","webpack://todo-focus/./src/components/ConfirmationModal.vue","webpack://todo-focus/./src/components/ConfirmationModal.vue?017d","webpack://todo-focus/./src/App.vue?7ccd","webpack://todo-focus/./src/views/LoginView.vue","webpack://todo-focus/./src/views/LoginView.vue?5755","webpack://todo-focus/./src/views/RegisterView.vue","webpack://todo-focus/./src/views/RegisterView.vue?1ec6","webpack://todo-focus/./src/views/ResetPasswordView.vue","webpack://todo-focus/./src/views/ResetPasswordView.vue?c056","webpack://todo-focus/./src/components/MainPage.vue","webpack://todo-focus/./src/components/MainPage.vue?b3e7","webpack://todo-focus/./src/router/index.js","webpack://todo-focus/./src/main.js","webpack://todo-focus/webpack/bootstrap","webpack://todo-focus/webpack/runtime/chunk loaded","webpack://todo-focus/webpack/runtime/compat get default export","webpack://todo-focus/webpack/runtime/define property getters","webpack://todo-focus/webpack/runtime/global","webpack://todo-focus/webpack/runtime/hasOwnProperty shorthand","webpack://todo-focus/webpack/runtime/jsonp chunk loading","webpack://todo-focus/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <title>ToDo список «Фокус»</title> <nav class=\"navbar\">\n      <div class=\"nav-container\">\n        <div class=\"nav-brand\">\n          <h2 class=\"brand-title\">ToDo список «Фокус»</h2>\n        </div>\n        <div class=\"nav-links\">\n          <router-link to=\"/tasks\" class=\"nav-link\" v-if=\"user\">\n            <span class=\"nav-icon\">📋</span>\n            <span class=\"nav-text\">Задачи</span>\n          </router-link>\n\n          <router-link to=\"/login\" class=\"nav-link\" v-if=\"!user\">\n            <span class=\"nav-icon\">🔐</span>\n            <span class=\"nav-text\">Войти</span>\n          </router-link>\n\n          <div v-else class=\"user-info-dropdown\">\n            <button class=\"user-info-button\" @click=\"toggleDropdown\">\n              <span class=\"user-icon\">👤</span>\n              <span class=\"user-name\">{{ user?.displayName || user?.email || 'Пользователь' }}</span>\n              <span class=\"dropdown-arrow\" :class=\"{ 'rotated': dropdownOpen }\">▼</span>\n            </button>\n            <div class=\"dropdown-menu\" v-if=\"dropdownOpen\">\n              <button @click=\"handleLogout\" class=\"dropdown-item\">\n                <span class=\"dropdown-icon\">➡️</span>\n                Выйти\n              </button>\n              <button @click=\"openDeleteConfirmation\" class=\"dropdown-item delete-account-item\">\n                <span class=\"dropdown-icon\">🗑️</span>\n                Удалить аккаунт\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n\n    <main class=\"main-content\">\n      <router-view v-slot=\"{ Component }\">\n        <transition name=\"page\" mode=\"out-in\">\n          <component :is=\"Component\" :user=\"user\" ref=\"mainPageRef\" @show-reauth-modal=\"openReauthModal\" />\n        </transition>\n      </router-view>\n    </main>\n\n    <FooterElement />\n\n    <ConfirmationModal\n      :isVisible=\"showReauthModal\"\n      title=\"Требуется повторная аутентификация\"\n      message=\"Для выполнения этого действия необходимо недавнее подтверждение вашей учетной записи. Пожалуйста, выйдите из системы и войдите снова, затем повторите попытку.\"\n      confirmButtonText=\"Понятно\"\n      @confirm=\"closeReauthModalAndLogout\"\n      @cancel=\"closeReauthModal\" />\n  </div>\n</template>\n\n<script>\nimport { auth, signOut, onAuthStateChanged } from './firebase'; // Import only what's needed\nimport FooterElement from './components/FooterElement.vue';\nimport ConfirmationModal from './components/ConfirmationModal.vue';\nimport { ref, onMounted, onUnmounted } from 'vue'; // Import Composition API functions\nimport { useRouter, useRoute } from 'vue-router'; // Import useRouter and useRoute\n\nexport default {\n  components: {\n    FooterElement,\n    ConfirmationModal\n  },\n  setup() { // Use setup for Composition API\n    const mainPageRef = ref(null); // Ref for the MainPage component instance\n    const user = ref(null); // Central user state\n    const dropdownOpen = ref(false);\n    const showReauthModal = ref(false);\n\n    const router = useRouter(); // Initialize router\n    const route = useRoute();   // Initialize route\n\n    // Listen for Firebase Auth state changes\n    onAuthStateChanged(auth, (currentUser) => {\n      user.value = currentUser;\n    });\n\n    // Handle user logout\n    const handleLogout = async () => {\n      try {\n        await signOut(auth);\n        dropdownOpen.value = false;\n        console.log(\"User successfully logged out. Redirecting to /login.\");\n        if (route.path !== '/login') { // Use useRoute() from vue-router\n          router.replace('/login'); // Use useRouter() from vue-router\n        }\n      } catch (error) {\n        console.error(\"Error logging out:\", error);\n        alert(`Ошибка при выходе: ${error.message}`);\n      }\n    };\n\n    // Toggle the user dropdown menu\n    const toggleDropdown = () => {\n      dropdownOpen.value = !dropdownOpen.value;\n    };\n\n    // Close dropdown if click outside\n    const handleClickOutside = (event) => {\n      const userInfoDropdown = document.querySelector('.user-info-dropdown');\n      if (dropdownOpen.value && userInfoDropdown && !userInfoDropdown.contains(event.target)) {\n        dropdownOpen.value = false;\n      }\n    };\n\n    // Trigger account deletion process in MainPage.vue\n    const openDeleteConfirmation = () => {\n      dropdownOpen.value = false; // Close the user dropdown\n      // Call the method on the MainPage component instance via its ref\n      if (mainPageRef.value && typeof mainPageRef.value.promptDeleteAccount === 'function') {\n        mainPageRef.value.promptDeleteAccount();\n      } else {\n        console.warn(\"MainPage component or promptDeleteAccount method not found via ref.\");\n        alert(\"Ошибка: Функция удаления аккаунта недоступна. Пожалуйста, попробуйте позже.\");\n      }\n    };\n\n    // Methods for the re-authentication modal (triggered by MainPage.vue if needed)\n    const openReauthModal = () => {\n      showReauthModal.value = true;\n    };\n    const closeReauthModal = () => {\n      showReauthModal.value = false;\n    };\n    const closeReauthModalAndLogout = () => {\n      closeReauthModal();\n      handleLogout(); // Automatically log out after they acknowledge the message\n    };\n\n    // Lifecycle hooks for global click listener\n    onMounted(() => {\n      document.addEventListener('click', handleClickOutside);\n    });\n    onUnmounted(() => {\n      document.removeEventListener('click', handleClickOutside);\n    });\n\n    // Return reactive state and methods to the template\n    return {\n      user,\n      dropdownOpen,\n      showReauthModal,\n      mainPageRef, // Make the ref accessible in the template\n      handleLogout,\n      toggleDropdown,\n      openDeleteConfirmation,\n      openReauthModal,\n      closeReauthModal,\n      closeReauthModalAndLogout\n    };\n  }\n};\n</script>\n\n<style>\n/* All your existing styles remain unchanged. */\n/* I'm including the full style block here as requested. */\n\n#app {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-smoothing: grayscale;\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n}\n\n.navbar {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  animation: slideDown 0.8s ease-out;\n}\n\n.nav-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 2rem;\n}\n\n.nav-brand {\n  animation: fadeInLeft 0.8s ease-out;\n}\n\n.brand-title {\n  color: white;\n  font-size: 1.8rem;\n  font-weight: 700;\n  margin: 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n\n.nav-links {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  animation: fadeInRight 0.8s ease-out;\n}\n\n.nav-link {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  color: rgba(255, 255, 255, 0.8);\n  text-decoration: none;\n  font-weight: 600;\n  border-radius: 25px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n\n.nav-link::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n\n.nav-link:hover {\n  color: white;\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n.nav-link.router-link-exact-active {\n  color: white;\n  background: linear-gradient(45deg, #42b983, #369870);\n  box-shadow: 0 2px 8px rgba(66, 185, 131, 0.3);\n}\n\n.nav-icon {\n  font-size: 1.2rem;\n}\n\n.nav-text {\n  font-size: 1rem;\n}\n\n/* New styles for user info and dropdown menu */\n.user-info-dropdown {\n  position: relative;\n  display: inline-block;\n  margin-left: 1rem;\n}\n\n.user-info-button {\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  border-radius: 25px;\n  padding: 0.75rem 1.5rem;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.user-info-button:hover {\n  background: rgba(255, 255, 255, 0.25);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n}\n\n.user-icon {\n  font-size: 1.2rem;\n}\n\n.user-name {\n  max-width: 150px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.dropdown-arrow {\n  font-size: 0.8rem;\n  transition: transform 0.3s ease;\n}\n\n.dropdown-arrow.rotated {\n  transform: rotate(180deg);\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n  min-width: 160px;\n  z-index: 1;\n  overflow: hidden;\n  animation: slideInFromTop 0.3s ease-out;\n}\n\n.dropdown-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 10px 15px;\n  border: none;\n  background: none;\n  text-align: left;\n  cursor: pointer;\n  font-size: 1rem;\n  color: #333;\n  transition: background-color 0.2s ease, color 0.2s ease;\n}\n\n.dropdown-item:hover {\n  background-color: #f0f0f0;\n  color: #667eea;\n}\n\n.dropdown-icon {\n  font-size: 1.1rem;\n  margin-right: 5px;\n}\n\n/* NEW: Style for the delete account button */\n.dropdown-item.delete-account-item {\n  color: #dc3545; /* Red color to indicate a destructive action */\n  font-weight: 600;\n}\n\n.dropdown-item.delete-account-item:hover {\n  background-color: #f8d7da; /* Light red background on hover */\n  color: #a71d2a; /* Darker red on hover */\n}\n\n\n.main-content {\n  flex-grow: 1;\n  animation: fadeInUp 0.8s ease-out 0.2s both;\n}\n\n/* Page transitions */\n.page-enter-active {\n  transition: all 0.4s ease-out;\n}\n\n.page-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.page-enter-from {\n  opacity: 0;\n  transform: translateY(20px);\n}\n\n.page-leave-to {\n  opacity: 0;\n  transform: translateY(-20px);\n}\n\n/* Animations */\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-100%);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideInFromTop {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .nav-container {\n    padding: 1rem;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .nav-links {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .nav-link, .user-info-button {\n    flex: 1;\n    justify-content: center;\n    min-width: 100px;\n    padding: 0.75rem 1rem;\n  }\n\n  .brand-title {\n    font-size: 1.5rem;\n  }\n\n  .user-name {\n    max-width: 80px;\n  }\n\n  .user-info-dropdown {\n    margin-left: 0;\n    width: 100%;\n  }\n\n  .dropdown-menu {\n    left: 0;\n    width: 100%;\n    min-width: unset;\n  }\n}\n\n@media (max-width: 480px) {\n  .nav-link, .user-info-button {\n    padding: 0.5rem 0.8rem;\n    font-size: 0.9rem;\n  }\n\n  .nav-icon, .user-icon {\n    font-size: 1rem;\n  }\n\n  .brand-title {\n    font-size: 1.3rem;\n  }\n}\n\n/* Footer styles (copied from FooterElement.vue and adapted as needed) */\n.bg-gray-800 {\n  background-color: #2d3748;\n}\n\n.text-white {\n  color: #ffffff;\n}\n\n.py-6 {\n  padding-top: 1.5rem;\n  padding-bottom: 1.5rem;\n}\n\n.mt-auto {\n  margin-top: auto;\n}\n\n.container {\n  max-width: 1200px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.text-sm {\n  font-size: 0.875rem;\n}\n\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n\n.text-blue-400 {\n  color: #63b3ed;\n}\n.hover\\:text-blue-300:hover {\n  color: #90cdf4;\n}\n\n.text-purple-400 {\n  color: #a78bfa;\n}\n.hover\\:text-purple-300:hover {\n  color: #c4b5fd;\n}\n\n.text-green-400 {\n  color: #68d391;\n}\n.hover\\:text-green-300:hover {\n  color: #9ae6b4;\n}\n\n.text-yellow-400 {\n  color: #f6e05e;\n}\n.hover\\:text-yellow-300:hover {\n  color: #faf089;\n}\n\n.underline {\n  text-decoration: underline;\n}\n\n.transition-colors {\n  transition-property: background-color, border-color, color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n\n.duration-200 {\n  transition-duration: 200ms;\n}\n\n/* Custom Scrollbar Styles */\n/* Webkit browsers (Chrome, Safari, Edge) */\n::-webkit-scrollbar {\n  width: 12px;\n}\n\n::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 10px;\n  backdrop-filter: blur(5px);\n}\n\n::-webkit-scrollbar-thumb {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 10px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  transition: all 0.3s ease;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n  transform: scale(1.1);\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);\n}\n\n::-webkit-scrollbar-thumb:active {\n  background: linear-gradient(135deg, #4c5bc7 0%, #5e3a7e 100%);\n}\n\n/* Firefox scrollbar */\nhtml {\n  scrollbar-width: thin;\n  scrollbar-color: #667eea rgba(255, 255, 255, 0.1);\n}\n\n/* Custom scrollbar for dropdown menu */\n.dropdown-menu::-webkit-scrollbar {\n  width: 6px;\n}\n\n.dropdown-menu::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n}\n\n.dropdown-menu::-webkit-scrollbar-thumb {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 3px;\n}\n\n.dropdown-menu::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n}\n\n/* Footer styles (copied from FooterElement.vue and adapted as needed) */\n.bg-gray-800 {\n  background-color: #2d3748;\n}\n</style>\n","// firebase.js\n// Place this as early as possible, even before firebase imports\n// This must execute BEFORE Firebase SDKs attempt to initialize,\n// so it needs to be near the top of the file, outside of any functions.\nif (process.env.NODE_ENV === 'development') {\n  self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;\n  console.log(\"App Check Debug Token enabled for development. Expecting token in console.\");\n}\n\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport {\n  getFirestore, // Import getFirestore to get the Firestore instance\n} from \"firebase/firestore\";\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  sendPasswordResetEmail,\n  updateProfile,\n  sendEmailVerification,\n  setPersistence,\n  browserLocalPersistence,\n  browserSessionPersistence,\n  deleteUser // ADDED BACK: Import deleteUser for client-side deletion\n} from \"firebase/auth\";\n\n// Import App Check modules\nimport { initializeAppCheck, ReCaptchaV3Provider } from 'firebase/app-check';\n\n// REMOVED: import { getFunctions, connectFunctionsEmulator } from 'firebase/functions';\n\n// Your web app's Firebase configuration - NOW USING ENVIRONMENT VARIABLES\nconst firebaseConfig = {\n  // Use 'process.env.VUE_APP_' for Vue CLI projects.\n  apiKey: process.env.VUE_APP_FIREBASE_API_KEY,\n  authDomain: process.env.VUE_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.VUE_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.VUE_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.VUE_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.VUE_APP_FIREBASE_APP_ID,\n  measurementId: process.env.VUE_APP_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app); // Ensure analytics is properly initialized\nconst db = getFirestore(app); // Initialize Firestore instance\nconst auth = getAuth(app);\n// REMOVED: const functions = getFunctions(app);\n\n// REMOVED: connect to Functions emulator if in development\n// if (process.env.NODE_ENV === 'development') {\n//   connectFunctionsEmulator(functions, 'localhost', 5001);\n//   console.log(\"Connected to Firebase Functions emulator on localhost:5001\");\n// }\n\n// Initialize App Check (it will pick up self.FIREBASE_APPCHECK_DEBUG_TOKEN if set)\ninitializeAppCheck(app, {\n  provider: new ReCaptchaV3Provider(process.env.VUE_APP_RECAPTCHA_SITE_KEY),\n  isTokenAutoRefreshEnabled: true\n});\n\n\n// Set Firebase Authentication state persistence to local storage\nsetPersistence(auth, browserLocalPersistence)\n  .then(() => {\n    console.log(\"Firebase Auth persistence set to 'local'.\");\n  })\n  .catch((error) => {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    console.error(\"Error setting Firebase Auth persistence:\", errorCode, errorMessage);\n  });\n\nexport {\n  db, // Export db\n  auth,\n  // REMOVED: functions, // Functions are no longer exported\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  sendPasswordResetEmail,\n  updateProfile,\n  analytics,\n  sendEmailVerification,\n  setPersistence,\n  browserSessionPersistence,\n  browserLocalPersistence,\n  deleteUser // ADDED BACK: Export deleteUser\n};\n","<template>\n  <footer class=\"app-footer\">\n    <div class=\"footer-container\">\n      <div class=\"footer-content\">\n        <div class=\"footer-section\">\n          <p class=\"footer-text primary\">\n            Работает на \n            <a \n              href=\"https://firebase.google.com/\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link firebase\"\n            >\n              <span class=\"link-icon\">🔥</span>\n              Firebase\n            </a>, размещено на \n            <a \n              href=\"https://github.com/Morunka/todo-focus\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link github\"\n            >\n              <span class=\"link-icon\">📂</span>\n              Github pages\n            </a>\n          </p>\n          <p class=\"footer-text secondary\">\n            Приложение создано с помощью \n            <a \n              href=\"https://vuejs.org\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link vue\"\n            >\n              <span class=\"link-icon\">⚡</span>\n              Vue.js\n            </a>\n            от \n            <a \n              href=\"https://t.me/MEOW_MUR920\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link author\"\n            >\n              <span class=\"link-icon\">👨‍💻</span>\n              Morunka\n            </a>\n          </p>\n        </div>\n        \n        <div class=\"footer-stats\">\n          <div class=\"stat-badge\">\n            <span class=\"stat-icon\">📱</span>\n            <span class=\"stat-text\">Адаптивный</span>\n          </div>\n          <div class=\"stat-badge\">\n            <span class=\"stat-icon\">⚡</span>\n            <span class=\"stat-text\">Быстрый</span>\n          </div>\n          <div class=\"stat-badge\">\n            <span class=\"stat-icon\">🔒</span>\n            <span class=\"stat-text\">Защищенный</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"footer-divider\"></div>\n      \n      <div class=\"footer-bottom\">\n        <p class=\"copyright\">\n          © {{ currentYear }} ToDo список «Фокус».\n        </p>\n      </div>\n    </div>\n  </footer>\n</template>\n\n<script>\nexport default {\n  name: 'FooterElement',\n  computed: {\n    currentYear() {\n      return new Date().getFullYear();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.app-footer {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  margin-top: auto;\n  position: relative;\n  overflow: hidden;\n}\n\n.app-footer::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.05);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n}\n\n.footer-container {\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 2rem;\n  position: relative;\n  z-index: 1;\n}\n\n.footer-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.footer-section {\n  text-align: center;\n}\n\n.footer-text {\n  margin: 0.5rem 0;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  line-height: 1.6;\n}\n\n.footer-text.primary {\n  font-size: 0.95rem;\n  color: rgba(255, 255, 255, 0.95);\n  font-weight: 500;\n}\n\n.footer-text.secondary {\n  font-size: 0.9rem;\n  color: rgba(255, 255, 255, 0.85);\n  font-weight: 400;\n}\n\n.footer-link {\n  color: inherit;\n  text-decoration: none;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.2rem 0.4rem;\n  border-radius: 6px;\n  transition: all 0.3s ease;\n  position: relative;\n  font-weight: 600;\n}\n\n.footer-link:hover {\n  transform: translateY(-2px);\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n\n.footer-link.firebase {\n  color: #ff9800;\n}\n\n.footer-link.firebase:hover {\n  background: rgba(255, 152, 0, 0.15);\n  box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);\n}\n\n.footer-link.github {\n  color: #e91e63;\n}\n\n.footer-link.github:hover {\n  background: rgba(233, 30, 99, 0.15);\n  box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);\n}\n\n.footer-link.vue {\n  color: #4caf50;\n}\n\n.footer-link.vue:hover {\n  background: rgba(76, 175, 80, 0.15);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.footer-link.author {\n  color: #ffc107;\n}\n\n.footer-link.author:hover {\n  background: rgba(255, 193, 7, 0.15);\n  box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);\n}\n\n.link-icon {\n  font-size: 0.9rem;\n  animation: pulse 2s infinite;\n}\n\n.footer-stats {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.stat-badge {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  background: rgba(255, 255, 255, 0.1);\n  padding: 0.6rem 1rem;\n  border-radius: 20px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  transition: all 0.3s ease;\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 500;\n}\n\n.stat-badge:hover {\n  transform: translateY(-3px);\n  background: rgba(255, 255, 255, 0.15);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n}\n\n.stat-icon {\n  font-size: 1rem;\n}\n\n.stat-text {\n  font-size: 0.8rem;\n  letter-spacing: 0.5px;\n}\n\n.footer-divider {\n  width: 100%;\n  height: 1px;\n  background: linear-gradient(\n    to right,\n    transparent,\n    rgba(255, 255, 255, 0.3) 20%,\n    rgba(255, 255, 255, 0.6) 50%,\n    rgba(255, 255, 255, 0.3) 80%,\n    transparent\n  );\n  margin: 1.5rem 0;\n}\n\n.footer-bottom {\n  text-align: center;\n}\n\n.copyright {\n  margin: 0;\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 0.7);\n  font-weight: 400;\n  letter-spacing: 0.5px;\n}\n\n/* Animations */\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .footer-container {\n    padding: 1.5rem 1rem;\n  }\n  \n  .footer-content {\n    gap: 1rem;\n  }\n  \n  .footer-text.primary,\n  .footer-text.secondary {\n    font-size: 0.85rem;\n  }\n  \n  .footer-stats {\n    gap: 0.5rem;\n  }\n  \n  .stat-badge {\n    padding: 0.5rem 0.8rem;\n    font-size: 0.8rem;\n  }\n  \n  .footer-link {\n    padding: 0.3rem 0.5rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .footer-section {\n    padding: 0 0.5rem;\n  }\n  \n  .footer-text.primary,\n  .footer-text.secondary {\n    font-size: 0.8rem;\n    line-height: 1.5;\n  }\n  \n  .footer-stats {\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .stat-badge {\n    width: 100%;\n    max-width: 200px;\n    justify-content: center;\n  }\n}\n</style>","import { render } from \"./FooterElement.vue?vue&type=template&id=c3e4910c&scoped=true\"\nimport script from \"./FooterElement.vue?vue&type=script&lang=js\"\nexport * from \"./FooterElement.vue?vue&type=script&lang=js\"\n\nimport \"./FooterElement.vue?vue&type=style&index=0&id=c3e4910c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c3e4910c\"]])\n\nexport default __exports__","<template>\n  <transition name=\"modal-fade\">\n    <div class=\"modal-overlay\" v-if=\"isVisible\" @click.self=\"cancel\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-header\">\n          <h3 class=\"modal-title\">{{ title }}</h3>\n          <button class=\"close-button\" @click=\"cancel\" v-if=\"showCloseButton || cancelButtonText !== null\">\n            <span class=\"close-icon\">✕</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <p class=\"modal-message\" :class=\"{ 'has-input-error': inputErrorMessage }\">{{ message }}</p>\n          \n          <div v-if=\"isLoading\" class=\"modal-loading\">\n            <div class=\"modal-spinner\"></div>\n            <p class=\"loading-text\">Удаление аккаунта...</p>\n          </div>\n          <div v-else>\n            <slot name=\"content\"></slot>\n            <p v-if=\"inputErrorMessage\" class=\"modal-error-message\">{{ inputErrorMessage }}</p>\n          </div>\n\n        </div>\n        <div class=\"modal-footer\" :class=\"{ 'single-button-footer': confirmButtonText && cancelButtonText === null }\">\n          <button class=\"cancel-button\" @click=\"cancel\" v-if=\"cancelButtonText !== null\" :disabled=\"isLoading\">\n            {{ cancelButtonText }}\n          </button>\n          <button class=\"confirm-button\" @click=\"confirm\" v-if=\"confirmButtonText !== null\" :disabled=\"isLoading\">\n            {{ confirmButtonText }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nexport default {\n  props: {\n    isVisible: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: 'Подтверждение'\n    },\n    message: {\n      type: String,\n      default: 'Вы уверены, что хотите выполнить это действие?'\n    },\n    confirmButtonText: {\n      type: String,\n      default: 'Подтвердить'\n    },\n    cancelButtonText: {\n      type: String,\n      default: 'Отмена'\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    },\n    // NEW PROP: To show an error related to an input within the modal body\n    inputErrorMessage: {\n      type: String,\n      default: ''\n    },\n    // NEW PROP: To indicate if an action (like deletion) is in progress\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  methods: {\n    confirm() {\n      // Only emit if not loading\n      if (!this.isLoading) {\n        this.$emit('confirm');\n      }\n    },\n    cancel() {\n      // Only emit if not loading and cancel is allowed\n      if (!this.isLoading && (this.cancelButtonText !== null || this.showCloseButton)) {\n        this.$emit('cancel');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Modal Overlay with enhanced backdrop */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.75);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  animation: fadeInBackdrop 0.3s ease-out;\n}\n\n/* Enhanced Modal Dialog Box */\n.modal-dialog {\n  background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 50%, #f0f4ff 100%);\n  border-radius: 20px;\n  box-shadow:\n    0 25px 50px rgba(0, 0, 0, 0.25),\n    0 0 0 1px rgba(255, 255, 255, 0.1),\n    inset 0 1px 0 rgba(255, 255, 255, 0.9);\n  width: 90%;\n  max-width: 480px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: modalSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\n  border: 1px solid rgba(102, 126, 234, 0.1);\n}\n\n/* Enhanced Modal Header */\n.modal-header {\n  padding: 2rem 2rem 1.5rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.modal-header::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n  animation: shimmer 2s ease-in-out infinite;\n}\n\n.modal-title {\n  font-size: 1.75rem;\n  font-weight: 700;\n  margin: 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  letter-spacing: -0.025em;\n}\n\n.close-button {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.9);\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.close-button:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: scale(1.1) rotate(90deg);\n  box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);\n}\n\n.close-button:active {\n  transform: scale(0.95) rotate(90deg);\n}\n\n.close-icon {\n  font-size: 1.2rem;\n  font-weight: 600;\n  line-height: 1;\n}\n\n/* Enhanced Modal Body */\n.modal-body {\n  padding: 2rem;\n  color: #374151;\n  font-size: 1.125rem;\n  line-height: 1.7;\n  text-align: center;\n  flex-grow: 1;\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(102, 126, 234, 0.02) 100%);\n}\n\n.modal-message {\n  /* Reduced margin-bottom for tighter spacing with input error */\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  color: #1f2937;\n}\n\n.modal-message.has-input-error {\n  margin-bottom: 0.25rem; /* Even smaller margin if an input error is present */\n}\n\n/* NEW: Input error message style */\n.modal-error-message {\n  color: #dc3545; /* Red color for errors */\n  font-size: 0.9rem;\n  margin-top: 0.5rem;\n  font-weight: 500;\n}\n\n/* NEW: Loading state within modal body */\n.modal-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  margin-top: 1.5rem;\n  min-height: 80px; /* Ensure space for spinner and text */\n}\n\n.modal-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(102, 126, 234, 0.3);\n  border-top: 4px solid #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.loading-text {\n  font-size: 1.1rem;\n  color: #555;\n  font-weight: 600;\n}\n\n/* Enhanced Modal Footer */\n.modal-footer {\n  padding: 1.5rem 2rem 2rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  border-top: 1px solid rgba(102, 126, 234, 0.1);\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 250, 252, 0.9) 100%);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.modal-footer.single-button-footer {\n  justify-content: center;\n}\n\n/* Enhanced Button Styles */\n.cancel-button, .confirm-button {\n  padding: 0.875rem 2rem;\n  border-radius: 12px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: none;\n  position: relative;\n  overflow: hidden;\n  min-width: 120px;\n  text-transform: none;\n  letter-spacing: 0.025em;\n}\n\n.cancel-button {\n  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n  color: #64748b;\n  border: 1px solid #cbd5e0;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.cancel-button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);\n  transition: left 0.5s ease;\n}\n\n.cancel-button:hover:not(:disabled) {\n  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);\n  color: #475569;\n  transform: translateY(-2px);\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n}\n\n.cancel-button:hover::before {\n  left: 100%;\n}\n\n.cancel-button:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.cancel-button:disabled, .confirm-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n\n.confirm-button {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  position: relative;\n}\n\n.confirm-button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n\n.confirm-button:hover:not(:disabled) {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);\n}\n\n.confirm-button:hover::before {\n  left: 100%;\n}\n\n.confirm-button:active {\n  transform: translateY(0);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n\n/* Enhanced Transitions */\n.modal-fade-enter-active {\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.modal-fade-leave-active {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-from .modal-dialog {\n  transform: scale(0.8) translateY(-50px);\n  opacity: 0;\n}\n\n.modal-fade-leave-to .modal-dialog {\n  transform: scale(0.9) translateY(30px);\n  opacity: 0;\n}\n\n/* Enhanced Animations */\n@keyframes fadeInBackdrop {\n  from {\n    opacity: 0;\n    backdrop-filter: blur(0px);\n    -webkit-backdrop-filter: blur(0px);\n  }\n  to {\n    opacity: 1;\n    backdrop-filter: blur(15px);\n    -webkit-backdrop-filter: blur(15px);\n  }\n}\n\n@keyframes modalSlideIn {\n  0% {\n    opacity: 0;\n    transform: scale(0.8) translateY(-50px);\n  }\n  50% {\n    opacity: 0.8;\n    transform: scale(1.02) translateY(-10px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    left: -100%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n\n/* Standard spin animation for reusability */\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* Enhanced Responsive Design */\n@media (max-width: 600px) {\n  .modal-dialog {\n    max-width: 95%;\n    margin: 1rem;\n    border-radius: 16px;\n  }\n\n  .modal-header {\n    padding: 1.5rem 1.5rem 1rem;\n  }\n\n  .modal-title {\n    font-size: 1.5rem;\n  }\n\n  .close-button {\n    width: 32px;\n    height: 32px;\n  }\n\n  .close-icon {\n    font-size: 1rem;\n  }\n\n  .modal-body {\n    padding: 1.5rem;\n    font-size: 1rem;\n  }\n\n  .modal-footer {\n    flex-direction: column;\n    padding: 1rem 1.5rem 1.5rem;\n    gap: 0.75rem;\n  }\n\n  .cancel-button, .confirm-button {\n    width: 100%;\n    padding: 0.875rem 1.5rem;\n    font-size: 1rem;\n  }\n}\n\n@media (max-width: 400px) {\n  .modal-dialog {\n    margin: 0.5rem;\n  }\n\n  .modal-header {\n    padding: 1.25rem 1.25rem 0.75rem;\n  }\n\n  .modal-title {\n    font-size: 1.375rem;\n  }\n\n  .modal-body {\n    padding: 1.25rem;\n    font-size: 0.95rem;\n  }\n\n  .modal-footer {\n    padding: 0.75rem 1.25rem 1.25rem;\n  }\n}\n\n/* Dark mode support (optional) */\n@media (prefers-color-scheme: dark) {\n  .modal-dialog {\n    background: linear-gradient(135deg, #1f2937 0%, #111827 50%, #0f172a 100%);\n    border: 1px solid rgba(102, 126, 234, 0.2);\n  }\n\n  .modal-body {\n    color: #e5e7eb;\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(102, 126, 234, 0.05) 100%);\n  }\n\n  .modal-message {\n    color: #f3f4f6;\n  }\n\n  .modal-footer {\n    background: linear-gradient(180deg, rgba(31, 41, 55, 0.8) 0%, rgba(17, 24, 39, 0.9) 100%);\n    border-top: 1px solid rgba(102, 126, 234, 0.2);\n  }\n\n  .cancel-button {\n    background: linear-gradient(135deg, #374151 0%, #1f2937 100%);\n    color: #d1d5db;\n    border: 1px solid #4b5563;\n  }\n\n  .cancel-button:hover {\n    background: linear-gradient(135deg, #4b5563 0%, #374151 100%);\n    color: #f3f4f6;\n  }\n}\n</style>","import { render } from \"./ConfirmationModal.vue?vue&type=template&id=5111db83&scoped=true\"\nimport script from \"./ConfirmationModal.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmationModal.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmationModal.vue?vue&type=style&index=0&id=5111db83&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5111db83\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=0b3a487c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0b3a487c&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"login-container\">\n    <div class=\"login-card\">\n      <div class=\"login-header\">\n        <div class=\"login-icon\">🔑</div>\n        <h1 class=\"login-title\">Добро пожаловать!</h1>\n        <p class=\"login-subtitle\">Войдите в свою учетную запись</p>\n      </div>\n\n      <form @submit.prevent=\"handleLogin\" class=\"login-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\">Email</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.email }\"\n              placeholder=\"example@email.com\"\n              @blur=\"validateEmail\"\n              @input=\"clearError('email')\"\n              required\n            />\n            <span class=\"input-icon\">📧</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Пароль</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"password\"\n              :type=\"showPassword ? 'text' : 'password'\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.password }\"\n              placeholder=\"Введите пароль\"\n              @blur=\"validatePassword\"\n              @input=\"clearError('password')\"\n              required\n            />\n            <button\n              type=\"button\"\n              class=\"password-toggle\"\n              @click=\"showPassword = !showPassword\"\n            >\n              {{ showPassword ? '🙈' : '👁️' }}\n            </button>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.password\" class=\"error-message\">{{ errors.password }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-options\">\n          <label class=\"checkbox-wrapper\">\n            <input type=\"checkbox\" v-model=\"rememberMe\" class=\"checkbox\">\n            <span class=\"checkmark\"></span>\n            <span class=\"checkbox-text\">Запомнить меня</span>\n          </label>\n          <router-link to=\"/reset-password\" class=\"forgot-password-link\">Забыли пароль?</router-link>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"login-button\"\n          :class=\"{ 'loading': isLoading }\"\n          :disabled=\"isLoading || !isFormValid\"\n        >\n          <span v-if=\"!isLoading\" class=\"button-content\">\n            <span class=\"button-text\">Войти</span>\n            <span class=\"button-icon\">→</span>\n          </span>\n          <span v-else class=\"loading-spinner\"></span>\n        </button>\n      </form>\n\n      <div class=\"login-footer\">\n        <p class=\"footer-text\">\n          Нет аккаунта?\n          <router-link to=\"/register\" class=\"register-link\">Зарегистрироваться</router-link>\n        </p>\n        <p v-if=\"loginError\" class=\"error-message text-center\">{{ loginError }}</p>\n        <p v-if=\"showResendEmailButton\" class=\"info-message text-center\">\n            Пожалуйста, подтвердите свой Email.\n            <button\n                @click=\"resendVerificationEmail\"\n                :disabled=\"isResendLoading || resendCooldown > 0\"\n                class=\"resend-email-button\"\n            >\n                <span v-if=\"isResendLoading\" class=\"small-loading-spinner\"></span>\n                <span v-else-if=\"resendCooldown > 0\">Повторно через {{ resendCooldown }}с</span>\n                <span v-else>Отправить повторно</span>\n            </button>\n        </p>\n        <p v-if=\"resendSuccessMessage\" class=\"success-message text-center\">{{ resendSuccessMessage }}</p>\n      </div>\n    </div>\n\n    <div class=\"bg-decoration\">\n      <div class=\"floating-shape shape-1\"></div>\n      <div class=\"floating-shape shape-2\"></div>\n      <div class=\"floating-shape shape-3\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onBeforeUnmount } from 'vue';\nimport { useRouter } from 'vue-router';\nimport {\n  auth,\n  signInWithEmailAndPassword,\n  sendEmailVerification,\n  setPersistence,\n  browserSessionPersistence,\n  browserLocalPersistence,\n  signOut,\n} from '../firebase';\n\nconst router = useRouter();\n\n// Reactive state\nconst email = ref('');\nconst password = ref('');\nconst showPassword = ref(false);\nconst rememberMe = ref(true);\nconst isLoading = ref(false);\nconst isResendLoading = ref(false);\nconst errors = ref({});\nconst loginError = ref('');\nconst showResendEmailButton = ref(false);\nconst resendCooldown = ref(0);\nlet resendCooldownInterval = null;\nconst resendSuccessMessage = ref('');\n\n// NEW: Store the user object if verification is needed\nconst unverifiedUser = ref(null);\n\n// Computed properties\nconst isFormValid = computed(() => {\n  return email.value.trim() !== '' &&\n         password.value.trim() !== '' &&\n         !errors.value.email &&\n         !errors.value.password;\n});\n\n// Methods\nconst validateEmail = () => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!email.value) {\n    errors.value.email = 'Email обязателен';\n  } else if (!emailRegex.test(email.value)) {\n    errors.value.email = 'Неверный формат email';\n  } else {\n    delete errors.value.email;\n  }\n};\n\nconst validatePassword = () => {\n  if (!password.value) {\n    errors.value.password = 'Пароль обязателен';\n  } else if (password.value.length < 6) {\n    errors.value.password = 'Пароль должен быть не менее 6 символов';\n  } else {\n    delete errors.value.password;\n  }\n};\n\nconst clearError = (field) => {\n  delete errors.value[field];\n  loginError.value = '';\n  showResendEmailButton.value = false;\n  resendSuccessMessage.value = '';\n  unverifiedUser.value = null; // Clear unverified user on new input/error clear\n};\n\nconst startCoolDown = (duration) => {\n  resendCooldown.value = duration;\n  if (resendCooldownInterval) {\n    clearInterval(resendCooldownInterval);\n  }\n  resendCooldownInterval = setInterval(() => {\n    if (resendCooldown.value > 0) {\n      resendCooldown.value--;\n    } else {\n      clearInterval(resendCooldownInterval);\n      resendCooldownInterval = null;\n    }\n  }, 1000);\n};\n\nconst handleLogin = async () => {\n  validateEmail();\n  validatePassword();\n  loginError.value = '';\n  showResendEmailButton.value = false;\n  resendSuccessMessage.value = '';\n  unverifiedUser.value = null; // Reset unverified user at the start of login attempt\n\n  if (!isFormValid.value) {\n    return;\n  }\n\n  isLoading.value = true;\n\n  try {\n    await setPersistence(\n      auth,\n      rememberMe.value ? browserLocalPersistence : browserSessionPersistence\n    );\n\n    const userCredential = await signInWithEmailAndPassword(auth, email.value, password.value);\n    const user = userCredential.user;\n\n    if (!user.emailVerified) {\n      // Store the user object before signing them out\n      unverifiedUser.value = user;\n\n      await signOut(auth); // Sign out the user immediately\n\n      loginError.value = 'Ваш Email не подтвержден. Пожалуйста, проверьте свою почту (и папку \"Спам\"!) и подтвердите аккаунт, прежде чем войти.';\n      showResendEmailButton.value = true;\n      startCoolDown(60);\n    } else {\n      router.push('/tasks');\n    }\n  } catch (error) {\n    console.error('Login error:', error.code, error.message);\n    switch (error.code) {\n      case 'auth/user-not-found':\n      case 'auth/wrong-password':\n      case 'auth/invalid-credential':\n        loginError.value = 'Неверный Email или пароль.';\n        break;\n      case 'auth/invalid-email':\n        loginError.value = 'Неверный формат Email. Проверьте правильность ввода.';\n        break;\n      case 'auth/too-many-requests':\n        loginError.value = 'Слишком много неудачных попыток входа. Попробуйте позже.';\n        showResendEmailButton.value = true;\n        startCoolDown(60);\n        break;\n      case 'auth/network-request-failed':\n        loginError.value = 'Ошибка сети. Проверьте ваше интернет-соединение.';\n        break;\n      default:\n        loginError.value = 'Произошла ошибка при входе. Пожалуйста, попробуйте снова. ' + error.message;\n        break;\n    }\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nconst resendVerificationEmail = async () => {\n  // Use the stored unverifiedUser first, as it's more reliable after a recent signOut\n  const userToVerify = unverifiedUser.value || auth.currentUser;\n\n  if (userToVerify) {\n    isResendLoading.value = true;\n    resendSuccessMessage.value = '';\n    loginError.value = ''; // Clear previous login errors\n\n    try {\n        await sendEmailVerification(userToVerify); // Use userToVerify here\n        resendSuccessMessage.value = 'Письмо для подтверждения отправлено повторно! Проверьте свой Email.';\n        startCoolDown(60); // Restart cooldown after successful send\n    } catch (error) {\n        console.error(\"Ошибка при повторной отправке письма:\", error);\n        if (error.code === 'auth/too-many-requests') {\n          loginError.value = 'Слишком много запросов на отправку письма. Пожалуйста, подождите.';\n          startCoolDown(60);\n        } else {\n          loginError.value = 'Не удалось отправить письмо повторно. Пожалуйста, попробуйте позже.';\n        }\n    } finally {\n        isResendLoading.value = false;\n    }\n  }\n  // No else block. If userToVerify is null, nothing happens.\n};\n\nonBeforeUnmount(() => {\n  if (resendCooldownInterval) {\n    clearInterval(resendCooldownInterval);\n    resendCooldownInterval = null;\n  }\n});\n</script>\n\n<style scoped>\n/* Your existing styles remain unchanged */\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n}\n\n.login-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 450px;\n  position: relative;\n  z-index: 2;\n  animation: slideInUp 0.8s ease-out;\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 2rem;\n  animation: fadeInDown 0.8s ease-out 0.2s both;\n}\n\n.login-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.login-title {\n  color: #333;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n}\n\n.login-subtitle {\n  color: #666;\n  font-size: 1rem;\n  margin: 0;\n}\n\n.login-form {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-label {\n  display: block;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 1rem 3rem 1rem 1rem;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: white;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  transform: translateY(-2px);\n}\n\n.form-input.error {\n  border-color: #f44336;\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.input-icon {\n  position: absolute;\n  right: 1rem;\n  font-size: 1.2rem;\n  pointer-events: none;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 1rem;\n  background: none;\n  border: none;\n  font-size: 1.2rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n}\n\n.password-toggle:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 0.85rem;\n  margin: 0.5rem 0 0 0;\n  font-weight: 500;\n}\n\n.form-options {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  font-size: 0.9rem;\n}\n\n.checkbox-wrapper {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  gap: 0.5rem;\n  color: #666;\n}\n\n.checkbox {\n  display: none;\n}\n\n.checkmark {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ddd;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.checkbox:checked + .checkmark {\n  background-color: #667eea;\n  border-color: #667eea;\n}\n\n.checkbox:checked + .checkmark::after {\n  content: '✓';\n  color: white;\n  font-weight: bold;\n  font-size: 0.8rem;\n}\n\n.forgot-password-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.forgot-password-link:hover {\n  color: #5a6fd8;\n  text-decoration: underline;\n}\n\n.login-button {\n  width: 100%;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.login-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);\n}\n\n.login-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.login-button:hover .button-icon {\n  transform: scale(1.2);\n}\n\n.loading-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 20px;\n  min-height: 20px;\n}\n\n.small-loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 16px;\n  min-height: 16px;\n  margin-right: 5px;\n}\n\n.login-footer {\n  text-align: center;\n  margin-top: 2rem;\n  animation: fadeInUp 0.8s ease-out 0.6s both;\n}\n\n.footer-text {\n  color: #666;\n  margin: 0;\n}\n\n.register-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.register-link:hover {\n  color: #5a6fd8;\n}\n\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.floating-shape {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  animation: float 6s ease-in-out infinite;\n}\n\n.shape-1 {\n  width: 100px;\n  height: 100px;\n  top: 20%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.shape-2 {\n  width: 150px;\n  height: 150px;\n  top: 60%;\n  right: 10%;\n  animation-delay: 2s;\n}\n\n.shape-3 {\n  width: 80px;\n  height: 80px;\n  bottom: 20%;\n  left: 20%;\n  animation-delay: 4s;\n}\n\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    transform: translate3d(0, -10px, 0);\n  }\n  70% {\n    transform: translate3d(0, -5px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-20px);\n  }\n}\n\n.error-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.error-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.error-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.error-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.login-footer .error-message.text-center {\n  text-align: center;\n  margin-top: 1rem;\n  color: #f44336;\n}\n\n.info-message {\n  color: #3f51b5;\n  font-size: 0.95rem;\n  margin-top: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(63, 81, 181, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(63, 81, 181, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.8rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n.success-message {\n  color: #4caf50;\n  font-size: 0.95rem;\n  margin-top: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.8rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n.resend-email-button {\n  background-color: #667eea;\n  color: white;\n  border: none;\n  padding: 0.7rem 1.2rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.resend-email-button:hover {\n  background-color: #5a6fd8;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(102, 126, 234, 0.3);\n}\n\n.resend-email-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n  opacity: 0.7;\n  transform: none;\n  box-shadow: none;\n}\n\n@media (max-width: 768px) {\n  .login-container {\n    padding: 1rem;\n  }\n\n  .login-card {\n    padding: 2rem;\n  }\n\n  .login-title {\n    font-size: 1.5rem;\n  }\n\n  .form-options {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 1rem;\n  }\n\n  .checkbox-wrapper {\n    align-items: flex-start;\n  }\n  .info-message, .success-message {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n  }\n  .resend-email-button {\n    font-size: 0.85rem;\n    padding: 0.6rem 1rem;\n  }\n}\n</style>\n","import script from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=0b3c1bdc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0b3c1bdc\"]])\n\nexport default __exports__","<template>\n  <div class=\"register-container\">\n    <div class=\"register-card\">\n      <div class=\"register-header\">\n        <div class=\"register-icon\">📝</div>\n        <h1 class=\"register-title\">Регистрация</h1>\n        <p class=\"register-subtitle\">Создайте новую учетную запись</p>\n      </div>\n\n      <form @submit.prevent=\"handleRegister\" class=\"register-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\">Email</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.email, 'success': validFields.email }\"\n              placeholder=\"example@email.com\"\n              @blur=\"validateEmail\"\n              required\n            />\n            <span class=\"input-icon\">📧</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Пароль</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"password\"\n              :type=\"showPassword ? 'text' : 'password'\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.password, 'success': validFields.password }\"\n              placeholder=\"Введите пароль\"\n              @blur=\"validatePassword\"\n              required\n            />\n            <button\n              type=\"button\"\n              class=\"password-toggle\"\n              @click=\"showPassword = !showPassword\"\n            >\n              {{ showPassword ? '🙈' : '👁️' }}\n            </button>\n          </div>\n          <div class=\"password-strength\">\n            <div class=\"strength-bar\">\n              <div class=\"strength-fill\" :class=\"passwordStrengthClass\"></div>\n            </div>\n            <span class=\"strength-text\">{{ passwordStrengthText }}</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.password\" class=\"error-message\">{{ errors.password }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Подтвердите пароль</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"confirmPassword\"\n              :type=\"showConfirmPassword ? 'text' : 'password'\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.confirmPassword, 'success': validFields.confirmPassword }\"\n              placeholder=\"Повторите пароль\"\n              @blur=\"validateConfirmPassword\"\n              @input=\"clearError('confirmPassword')\"\n              required\n            />\n            <button\n              type=\"button\"\n              class=\"password-toggle\"\n              @click=\"showConfirmPassword = !showConfirmPassword\"\n            >\n              {{ showConfirmPassword ? '🙈' : '👁️' }}\n            </button>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.confirmPassword\" class=\"error-message\">{{ errors.confirmPassword }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-options\">\n          <label class=\"checkbox-wrapper\">\n            <input type=\"checkbox\" v-model=\"agreeToTerms\" class=\"checkbox\">\n            <span class=\"checkmark\"></span>\n            <span class=\"checkbox-text\">\n              Я согласен с <a href=\"#\" class=\"terms-link\">условиями использования</a> и\n              <a href=\"#\" class=\"terms-link\">политикой конфиденциальности</a>\n            </span>\n          </label>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"register-button\"\n          :class=\"{ 'loading': isLoading }\"\n          :disabled=\"isLoading || !isFormValid\"\n        >\n          <span v-if=\"!isLoading\" class=\"button-content\">\n            <span class=\"button-text\">Зарегистрироваться</span>\n            <span class=\"button-icon\">✨</span>\n          </span>\n          <span v-else class=\"loading-spinner\"></span>\n        </button>\n      </form>\n\n      <div class=\"register-footer\">\n        <p class=\"footer-text\">\n          Уже есть аккаунт?\n          <router-link to=\"/login\" class=\"login-link\">Войти</router-link>\n        </p>\n      </div>\n    </div>\n\n    <div class=\"bg-decoration\">\n      <div class=\"floating-shape shape-1\"></div>\n      <div class=\"floating-shape shape-2\"></div>\n      <div class=\"floating-shape shape-3\"></div>\n    </div>\n\n    <ConfirmationModal\n      :isVisible=\"showSuccessModal\"\n      title=\"Регистрация успешна!\"\n      message=\"Ваш аккаунт был успешно создан. Пожалуйста, проверьте свой Email (и папку 'Спам'!) для подтверждения. Нажмите 'Далее', чтобы перейти к входу.\"\n      confirmButtonText=\"Далее\"\n      :cancelButtonText=\"null\"\n      :showCloseButton=\"false\"\n      @confirm=\"handleSuccessConfirm\"\n      @cancel=\"handleSuccessCancel\"\n    />\n\n    <ConfirmationModal\n      :isVisible=\"showErrorModal\"\n      title=\"Ошибка регистрации\"\n      :message=\"registerErrorMessage\"\n      confirmButtonText=\"ОК\"\n      :cancelButtonText=\"null\"\n      :showCloseButton=\"true\"\n      @confirm=\"closeErrorModal\"\n      @cancel=\"closeErrorModal\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, computed, defineEmits } from 'vue'; // Added reactive and defineEmits\nimport { useRouter } from 'vue-router';\nimport {\n  auth,\n  createUserWithEmailAndPassword,\n  sendEmailVerification,\n  signOut,\n  updateProfile // Added updateProfile\n} from '../firebase'; // Removed `functions` and `httpsCallable`\nimport ConfirmationModal from '../components/ConfirmationModal.vue';\n\nconst router = useRouter();\nconst emit = defineEmits(['show-notification']); // For global notifications\n\n// Reactive state\nconst email = ref('');\nconst password = ref('');\nconst confirmPassword = ref('');\nconst showPassword = ref(false);\nconst showConfirmPassword = ref(false);\nconst agreeToTerms = ref(false);\nconst isLoading = ref(false);\n\n// Use reactive for errors and validFields for better consistency\nconst errors = reactive({\n  email: '',\n  password: '',\n  confirmPassword: ''\n});\nconst validFields = reactive({\n  email: false,\n  password: false,\n  confirmPassword: false\n});\n\n// Modal specific state\nconst showSuccessModal = ref(false);\n// const successModalMessage = ref(''); // No longer directly used as message is hardcoded\nconst showErrorModal = ref(false);\nconst registerErrorMessage = ref('');\n\n// Computed properties\nconst isFormValid = computed(() => {\n  return validFields.email &&\n         validFields.password &&\n         validFields.confirmPassword &&\n         agreeToTerms.value; // Ensure all fields are valid AND terms agreed\n});\n\nconst passwordStrength = computed(() => {\n  const pwd = password.value;\n  let strength = 0;\n\n  if (pwd.length >= 8) strength++;\n  if (/[a-z]/.test(pwd)) strength++;\n  if (/[A-Z]/.test(pwd)) strength++;\n  if (/[0-9]/.test(pwd)) strength++;\n  if (/[^A-Za-z0-9]/.test(pwd)) strength++;\n\n  return strength;\n});\nconst passwordStrengthClass = computed(() => {\n  if (password.value === '') return ''; // No class if password is empty\n  if (passwordStrength.value <= 2) return 'weak';\n  if (passwordStrength.value <= 3) return 'medium';\n  return 'strong';\n});\nconst passwordStrengthText = computed(() => {\n  if (password.value === '') return '';\n  if (passwordStrength.value <= 2) return 'Слабый пароль';\n  if (passwordStrength.value <= 3) return 'Средний пароль';\n  return 'Сильный пароль';\n});\n\n// Methods\nconst validateEmail = () => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!email.value.trim()) { // Use .trim()\n    errors.email = 'Email обязателен';\n    validFields.email = false;\n  } else if (!emailRegex.test(email.value)) {\n    errors.email = 'Неверный формат email';\n    validFields.email = false;\n  } else {\n    errors.email = '';\n    validFields.email = true;\n  }\n};\nconst validatePassword = () => {\n  if (!password.value) { // Don't trim password\n    errors.password = 'Пароль обязателен';\n    validFields.password = false;\n  } else if (password.value.length < 6) {\n    errors.password = 'Пароль должен быть не менее 6 символов';\n    validFields.password = false;\n  } else {\n    errors.password = '';\n    validFields.password = true;\n  }\n\n  // Re-validate confirm password if password changes\n  if (confirmPassword.value) {\n    validateConfirmPassword();\n  }\n};\nconst validateConfirmPassword = () => {\n  if (!confirmPassword.value) {\n    errors.confirmPassword = 'Подтверждение пароля обязательно';\n    validFields.confirmPassword = false;\n  } else if (password.value !== confirmPassword.value) {\n    errors.confirmPassword = 'Пароли не совпадают';\n    validFields.confirmPassword = false;\n  } else {\n    errors.confirmPassword = '';\n    validFields.confirmPassword = true;\n  }\n};\n\nconst clearError = (field) => {\n  errors[field] = '';\n  // No need to set validFields to false here, validation logic will handle it on blur/submit\n};\n\n// Modals control methods (for success/error popups)\nconst handleSuccessConfirm = () => {\n  showSuccessModal.value = false;\n  router.push('/login'); // Redirect to login after successful registration\n};\nconst handleSuccessCancel = () => {\n  showSuccessModal.value = false; // Allows user to close without redirect if desired\n};\n\nconst openErrorModal = (message) => {\n  registerErrorMessage.value = message;\n  showErrorModal.value = true;\n};\nconst closeErrorModal = () => {\n  showErrorModal.value = false;\n  registerErrorMessage.value = '';\n};\n\nconst handleRegister = async () => {\n  // Clear any previous error messages\n  registerErrorMessage.value = '';\n  errors.email = '';\n  errors.password = '';\n  errors.confirmPassword = '';\n\n  // Client-side validation before attempting Firebase registration\n  validateEmail();\n  validatePassword();\n  validateConfirmPassword();\n\n  if (!agreeToTerms.value) {\n    openErrorModal('Вы должны согласиться с условиями использования и политикой конфиденциальности.');\n    return;\n  }\n\n  // Check if any errors exist in the reactive `errors` object\n  const hasFormErrors = Object.values(errors).some(error => error !== '');\n  if (hasFormErrors || !isFormValid.value) {\n    emit('show-notification', 'Пожалуйста, исправьте ошибки в форме.', 'error', 3000);\n    return; // Stop if there are validation errors\n  }\n\n  isLoading.value = true; // Set loading state to true\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email.value, password.value);\n    const user = userCredential.user;\n\n    // IMPORTANT: Null check the user object\n    if (!user) {\n      throw new Error(\"User object is undefined after successful registration (unexpected).\");\n    }\n\n    // Update user profile (e.g., set display name) - Optional but good practice\n    await updateProfile(user, {\n      displayName: email.value.split('@')[0] // Sets display name to the part before @ in email\n    });\n    console.log(\"User profile updated.\");\n\n    // Send email verification\n    await sendEmailVerification(user);\n    console.log(\"Email verification sent to:\", user.email);\n\n    // Sign out the user immediately after registration and email sent\n    await signOut(auth);\n    console.log(\"User signed out.\");\n\n    // Clear form fields\n    email.value = '';\n    password.value = '';\n    confirmPassword.value = '';\n    agreeToTerms.value = false;\n    // Reset validation states\n    validFields.email = false;\n    validFields.password = false;\n    validFields.confirmPassword = false;\n\n    // Show success modal\n    showSuccessModal.value = true; // Use the existing modal\n    // No dynamic message needed, it's hardcoded in the modal template\n\n  } catch (error) {\n    console.error('Registration error:', error.code, error.message);\n    let message = '';\n    switch (error.code) {\n      case 'auth/email-already-in-use':\n        message = 'Этот Email уже зарегистрирован. Пожалуйста, войдите или используйте другой Email.';\n        errors.email = message; // Display specific error below input\n        break;\n      case 'auth/invalid-email':\n        message = 'Неверный формат Email. Проверьте правильность ввода.';\n        errors.email = message;\n        break;\n      case 'auth/weak-password':\n        message = 'Пароль слишком слабый. Используйте не менее 6 символов, включая буквы, цифры и спецсимволы.';\n        errors.password = message;\n        break;\n      case 'auth/network-request-failed':\n        message = 'Ошибка сети. Проверьте ваше интернет-соединение.';\n        break;\n      case 'auth/operation-not-allowed':\n        message = 'Регистрация по Email/паролю отключена. Свяжитесь с администратором.';\n        break;\n      default:\n        // Generic error, use error.message directly\n        message = `Произошла ошибка при регистрации: ${error.message}. Пожалуйста, попробуйте снова.`;\n        break;\n    }\n    // Show error modal (or global notification)\n    openErrorModal(message); // Using existing error modal\n    // Alternatively, if App.vue has a global notification system:\n    // emit('show-notification', message, 'error', 5000);\n  } finally {\n    isLoading.value = false; // Always reset loading state\n  }\n};\n</script>\n\n<style scoped>\n/* All your existing styles here. No changes needed to the CSS unless specified below. */\n.register-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n}\n\n.register-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 500px;\n  position: relative;\n  z-index: 2;\n  animation: slideInUp 0.8s ease-out;\n}\n\n.register-header {\n  text-align: center;\n  margin-bottom: 2rem;\n  animation: fadeInDown 0.8s ease-out 0.2s both;\n}\n\n.register-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.register-title {\n  color: #333;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n}\n\n.register-subtitle {\n  color: #666;\n  font-size: 1rem;\n  margin: 0;\n}\n\n.register-form {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-label {\n  display: block;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 1rem 3rem 1rem 1rem;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: white;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  transform: translateY(-2px);\n}\n\n.form-input.error {\n  border-color: #f44336;\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.form-input.success {\n  border-color: #4caf50;\n  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);\n}\n\n.input-icon {\n  position: absolute;\n  right: 1rem;\n  font-size: 1.2rem;\n  pointer-events: none; /* Make sure icons don't block input clicks unless they are buttons */\n}\n\n.password-toggle {\n  position: absolute;\n  right: 1rem;\n  background: none;\n  border: none;\n  font-size: 1.2rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  pointer-events: all; /* Make password toggle clickable */\n}\n\n.password-toggle:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.password-strength {\n  margin-top: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.strength-bar {\n  flex: 1;\n  height: 4px;\n  background-color: #e1e5e9;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.strength-fill {\n  height: 100%;\n  transition: all 0.3s ease;\n  border-radius: 2px;\n}\n\n.strength-fill.weak {\n  width: 33%;\n  background-color: #f44336;\n}\n\n.strength-fill.medium {\n  width: 66%;\n  background-color: #ff9800;\n}\n\n.strength-fill.strong {\n  width: 100%;\n  background-color: #4caf50;\n}\n\n.strength-text {\n  font-size: 0.8rem;\n  font-weight: 500;\n  min-width: 100px;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 0.85rem;\n  margin: 0.5rem 0 0 0;\n  font-weight: 500;\n}\n\n.form-options {\n  margin-bottom: 2rem;\n}\n\n.checkbox-wrapper {\n  display: flex;\n  align-items: flex-start;\n  cursor: pointer;\n  user-select: none;\n  gap: 0.5rem;\n}\n\n.checkbox {\n  display: none;\n}\n\n.checkmark {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ddd;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.checkbox:checked + .checkmark {\n  background-color: #667eea;\n  border-color: #667eea;\n}\n\n.checkbox:checked + .checkmark::after {\n  content: '✓';\n  color: white;\n  font-weight: bold;\n  font-size: 0.8rem;\n}\n\n.checkbox-text {\n  color: #666;\n  font-size: 0.9rem;\n  line-height: 1.4;\n}\n\n.terms-link {\n  color: #667eea;\n  text-decoration: none;\n  transition: color 0.3s ease;\n}\n\n.terms-link:hover {\n  color: #5a6fd8;\n  text-decoration: underline;\n}\n\n.register-button {\n  width: 100%;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.register-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);\n}\n\n.register-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.register-button:hover .button-icon {\n  transform: scale(1.2);\n}\n\n.loading-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 20px;\n  min-height: 20px;\n}\n\n.register-footer {\n  text-align: center;\n  margin-top: 2rem;\n  animation: fadeInUp 0.8s ease-out 0.6s both;\n}\n\n.footer-text {\n  color: #666;\n  margin: 0;\n}\n\n.login-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.login-link:hover {\n  color: #5a6fd8;\n}\n\n/* Background decoration */\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.floating-shape {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  animation: float 6s ease-in-out infinite;\n}\n\n.shape-1 {\n  width: 100px;\n  height: 100px;\n  top: 20%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.shape-2 {\n  width: 150px;\n  height: 150px;\n  top: 60%;\n  right: 10%;\n  animation-delay: 2s;\n}\n\n.shape-3 {\n  width: 80px;\n  height: 80px;\n  bottom: 20%;\n  left: 20%;\n  animation-delay: 4s;\n}\n\n/* Animations */\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    transform: translate3d(0, -10px, 0);\n  }\n  70% {\n    transform: translate3d(0, -5px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg);\n  }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-20px);\n  }\n}\n\n/* Transition animations */\n.error-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.error-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.error-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.error-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.register-footer .error-message.text-center {\n  text-align: center;\n  margin-top: 1rem;\n  color: #f44336;\n}\n\n/* Стили для сообщения об успехе и кнопки повторной отправки (these are no longer used for direct display) */\n.success-message {\n  color: #4caf50;\n  font-size: 0.95rem;\n  margin-top: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.8rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n.resend-email-button {\n  background-color: #667eea;\n  color: white;\n  border: none;\n  padding: 0.7rem 1.2rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);\n}\n\n.resend-email-button:hover {\n  background-color: #5a6fd8;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(102, 126, 234, 0.3);\n}\n\n.resend-email-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n  opacity: 0.7;\n  transform: none;\n  box-shadow: none;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .register-container {\n    padding: 1rem;\n  }\n\n  .register-card {\n    padding: 2rem;\n  }\n\n  .register-title {\n    font-size: 1.5rem;\n  }\n\n  .checkbox-wrapper {\n    align-items: flex-start;\n  }\n  .success-message {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n  }\n  .resend-email-button {\n    font-size: 0.85rem;\n    padding: 0.6rem 1rem;\n  }\n}\n</style>","import script from \"./RegisterView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RegisterView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RegisterView.vue?vue&type=style&index=0&id=b1397b62&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b1397b62\"]])\n\nexport default __exports__","<template>\n  <div class=\"reset-password-container\">\n    <div class=\"reset-password-card\">\n      <div class=\"reset-password-header\">\n        <div class=\"reset-password-icon\">🔐</div>\n        <h1 class=\"reset-password-title\">Сброс пароля</h1>\n        <p class=\"reset-password-subtitle\">Введите ваш email, и мы отправим вам ссылку для сброса пароля.</p>\n      </div>\n\n      <form @submit.prevent=\"handleResetPassword\" class=\"reset-password-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\">Email</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.email }\"\n              placeholder=\"example@email.com\"\n              @blur=\"validateEmail\"\n              @input=\"clearError('email')\"\n              :disabled=\"isLoading\"\n              required\n            />\n            <span class=\"input-icon\">📧</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n          </transition>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"reset-button\"\n          :class=\"{ 'loading': isLoading }\"\n          :disabled=\"isLoading || !isFormValid\"\n        >\n          <span v-if=\"!isLoading\" class=\"button-content\">\n            <span class=\"button-text\">Отправить ссылку</span>\n            <span class=\"button-icon\">📤</span>\n          </span>\n          <span v-else class=\"loading-spinner\"></span>\n        </button>\n      </form>\n\n      <div class=\"reset-password-footer\">\n        <transition name=\"message\">\n          <div v-if=\"message\" :class=\"{ 'success-message': isSuccess, 'error-message': !isSuccess }\">\n            {{ message }}\n          </div>\n        </transition>\n        \n        <div class=\"back-to-login\">\n          <router-link to=\"/login\" class=\"back-link\">\n            <span class=\"back-icon\">←</span>\n            Вернуться ко входу\n          </router-link>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bg-decoration\">\n      <div class=\"floating-shape shape-1\"></div>\n      <div class=\"floating-shape shape-2\"></div>\n      <div class=\"floating-shape shape-3\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { auth, sendPasswordResetEmail } from \"../firebase\";\n\nexport default {\n  name: 'ResetPasswordView',\n  data() {\n    return {\n      email: '',\n      isLoading: false,\n      message: '',\n      isSuccess: false,\n      errors: {}\n    };\n  },\n  computed: {\n    isFormValid() {\n      return this.email.trim() !== '' && !this.errors.email;\n    }\n  },\n  methods: {\n    validateEmail() {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!this.email) {\n        this.errors.email = 'Email обязателен';\n      } else if (!emailRegex.test(this.email)) {\n        this.errors.email = 'Неверный формат email';\n      } else {\n        delete this.errors.email;\n      }\n    },\n    \n    clearError(field) {\n      delete this.errors[field];\n      this.message = '';\n      this.isSuccess = false;\n    },\n\n    async handleResetPassword() {\n      this.validateEmail();\n      \n      if (!this.isFormValid) {\n        return;\n      }\n\n      this.isLoading = true;\n      this.message = '';\n      this.isSuccess = false;\n\n      try {\n        await sendPasswordResetEmail(auth, this.email);\n        this.message = 'Ссылка для сброса пароля отправлена на ваш email. Проверьте папку \"Спам\", если не видите письма. Убедитесь что ваш аккаунт зарегестрирован.';\n        this.isSuccess = true;\n        this.email = '';\n      } catch (error) {\n        console.error(\"Ошибка сброса пароля:\", error.code, error.message);\n        this.isSuccess = false;\n        switch (error.code) {\n          case 'auth/invalid-email':\n            this.message = 'Неверный формат email.';\n            break;\n          case 'auth/user-not-found':\n            this.message = 'Пользователь с таким email не найден.';\n            break;\n          case 'auth/too-many-requests':\n            this.message = 'Слишком много запросов. Попробуйте позже.';\n            break;\n          case 'auth/network-request-failed':\n            this.message = 'Ошибка сети. Проверьте ваше интернет-соединение.';\n            break;\n          default:\n            this.message = 'Произошла ошибка при отправке ссылки. Попробуйте снова.';\n            break;\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.reset-password-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.reset-password-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 450px;\n  position: relative;\n  z-index: 2;\n  animation: slideInUp 0.8s ease-out;\n}\n\n.reset-password-header {\n  text-align: center;\n  margin-bottom: 2rem;\n  animation: fadeInDown 0.8s ease-out 0.2s both;\n}\n\n.reset-password-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.reset-password-title {\n  color: #333;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n}\n\n.reset-password-subtitle {\n  color: #666;\n  font-size: 1rem;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.reset-password-form {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-label {\n  display: block;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 1rem 3rem 1rem 1rem;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: white;\n  box-sizing: border-box;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  transform: translateY(-2px);\n}\n\n.form-input.error {\n  border-color: #f44336;\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.form-input:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n\n.input-icon {\n  position: absolute;\n  right: 1rem;\n  font-size: 1.2rem;\n  pointer-events: none;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 0.85rem;\n  margin: 0.5rem 0 0 0;\n  font-weight: 500;\n}\n\n.reset-button {\n  width: 100%;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 2rem;\n}\n\n.reset-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);\n}\n\n.reset-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.reset-button:hover .button-icon {\n  transform: scale(1.2);\n}\n\n.loading-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 20px;\n  min-height: 20px;\n}\n\n.reset-password-footer {\n  text-align: center;\n  animation: fadeInUp 0.8s ease-out 0.6s both;\n}\n\n.success-message {\n  color: #4caf50;\n  font-size: 0.95rem;\n  margin-bottom: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  animation: fadeIn 0.4s ease-out;\n}\n\n.error-message:not(.form-group .error-message) {\n  color: #f44336;\n  font-size: 0.95rem;\n  margin-bottom: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(244, 67, 54, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(244, 67, 54, 0.2);\n  animation: fadeIn 0.4s ease-out;\n}\n\n.back-to-login {\n  margin-top: 1.5rem;\n}\n\n.back-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.back-link:hover {\n  color: #5a6fd8;\n  transform: translateX(-2px);\n}\n\n.back-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.back-link:hover .back-icon {\n  transform: translateX(-2px);\n}\n\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.floating-shape {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  animation: float 6s ease-in-out infinite;\n}\n\n.shape-1 {\n  width: 100px;\n  height: 100px;\n  top: 20%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.shape-2 {\n  width: 150px;\n  height: 150px;\n  top: 60%;\n  right: 10%;\n  animation-delay: 2s;\n}\n\n.shape-3 {\n  width: 80px;\n  height: 80px;\n  bottom: 20%;\n  left: 20%;\n  animation-delay: 4s;\n}\n\n/* Animations */\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    transform: translate3d(0, -10px, 0);\n  }\n  70% {\n    transform: translate3d(0, -5px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-20px);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Transitions */\n.error-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.error-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.error-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.error-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.message-enter-active {\n  transition: all 0.4s ease-out;\n}\n\n.message-leave-active {\n  transition: all 0.4s ease-in;\n}\n\n.message-enter-from {\n  opacity: 0;\n  transform: translateY(10px);\n}\n\n.message-leave-to {\n  opacity: 0;\n  transform: translateY(10px);\n}\n\n/* Mobile responsiveness */\n@media (max-width: 768px) {\n  .reset-password-container {\n    padding: 1rem;\n  }\n\n  .reset-password-card {\n    padding: 2rem;\n  }\n\n  .reset-password-title {\n    font-size: 1.5rem;\n  }\n\n  .reset-password-subtitle {\n    font-size: 0.9rem;\n  }\n\n  .success-message,\n  .error-message:not(.form-group .error-message) {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n  }\n}\n</style>\n","import { render } from \"./ResetPasswordView.vue?vue&type=template&id=aaeea976&scoped=true\"\nimport script from \"./ResetPasswordView.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPasswordView.vue?vue&type=script&lang=js\"\n\nimport \"./ResetPasswordView.vue?vue&type=style&index=0&id=aaeea976&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-aaeea976\"]])\n\nexport default __exports__","\n\n<template>\n  <div class=\"task-container\">\n    <transition name=\"fade\">\n      <div v-if=\"notificationMessage\" :class=\"['notification', notificationType]\">\n        {{ notificationMessage }}\n      </div>\n    </transition>\n\n    <div class=\"header\">\n      <h1 class=\"title\">{{ msg }}</h1>\n      <div class=\"stats\">\n        <div class=\"stat-item\">\n          <span class=\"stat-number\">{{ completedTasks.length }}</span>\n          <span class=\"stat-label\">Выполнено</span>\n        </div>\n        <div class=\"stat-item\">\n          <span class=\"stat-number\">{{ pendingTasks.length }}</span>\n          <span class=\"stat-label\">Осталось</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"sync-section\">\n      <div class=\"sync-controls\">\n        <button\n          @click=\"refreshTasks\"\n          class=\"refresh-button\"\n          :disabled=\"isRefreshing\"\n          :class=\"{ 'refreshing': isRefreshing }\"\n        >\n          <span class=\"refresh-icon\" :class=\"{ 'spinning': isRefreshing }\">🔄</span>\n          <span class=\"button-text\">\n            {{ isRefreshing ? 'Обновление...' : 'Обновить' }}\n          </span>\n        </button>\n\n        <div class=\"auto-sync-toggle\">\n          <button\n            @click=\"toggleAutoSync\"\n            class=\"sync-toggle-button\"\n            :class=\"{ 'active': autoSyncEnabled }\"\n          >\n            <span class=\"sync-icon\">{{ autoSyncEnabled ? '🔒' : '🔓' }}</span>\n            <span class=\"button-text\">\n              {{ autoSyncEnabled ? 'Авто-синх ВКЛ' : 'Авто-синх ВЫКЛ' }}\n            </span>\n          </button>\n          <div v-if=\"autoSyncEnabled\" class=\"sync-status\">\n            <span class=\"sync-indicator\" :class=\"{ 'active': syncIndicator }\"></span>\n            <span class=\"next-sync-text\">\n              Следующее обновление: {{ nextSyncCountdown }}с\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"last-updated\" v-if=\"lastUpdated\">\n        <span class=\"update-text\">\n          Последнее обновление: {{ formatLastUpdated() }}\n        </span>\n      </div>\n    </div>\n\n    <div class=\"input-section\">\n      <div class=\"input-group\">\n        <input\n          v-model=\"newTask\"\n          placeholder=\"Новая задача\"\n          class=\"task-input\"\n          @keyup.enter=\"addTask\"\n          :class=\"{ 'shake': inputError }\"\n          :disabled=\"isAddingTask\"\n        />\n        <select\n          v-model=\"newTaskDifficulty\"\n          class=\"difficulty-select\"\n          :disabled=\"isAddingTask\"\n        >\n          <option value=\"easy\">Легко</option>\n          <option value=\"normal\">Нормально</option>\n          <option value=\"hard\">Сложно</option>\n        </select>\n        <button\n          @click=\"addTask\"\n          class=\"add-button\"\n          :disabled=\"!newTask.trim() || isAddingTask\"\n        >\n          <span v-if=\"!isAddingTask\" class=\"button-content\">\n            <span class=\"button-text\">Добавить</span>\n            <span class=\"button-icon\">+</span>\n          </span>\n          <span v-else class=\"loading-content\">\n            <span class=\"spinner\"></span>\n            <span class=\"button-text\">Добавление...</span>\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"filter-section\">\n      <div class=\"filter-buttons\">\n        <button\n          @click=\"currentFilter = 'all'\"\n          :class=\"{ active: currentFilter === 'all' }\"\n          class=\"filter-btn\"\n        >\n          Все ({{ tasks.length }})\n        </button>\n        <button\n          @click=\"currentFilter = 'pending'\"\n          :class=\"{ active: currentFilter === 'pending' }\"\n          class=\"filter-btn\"\n        >\n          Активные ({{ pendingTasks.length }})\n        </button>\n        <button\n          @click=\"currentFilter = 'completed'\"\n          :class=\"{ active: currentFilter === 'completed' }\"\n          class=\"filter-btn\"\n        >\n          Выполненные ({{ completedTasks.length }})\n        </button>\n      </div>\n    </div>\n\n    <div class=\"tasks-section\">\n      <transition-group name=\"task-list\" tag=\"ul\" class=\"task-list\">\n        <li\n          v-for=\"task in filteredTasks\"\n          :key=\"task.id\"\n          class=\"task-item\"\n          :class=\"{\n            'deleting': task.deleting,\n            'completed': task.completed,\n            'updating': task.updating\n          }\"\n        >\n          <div class=\"task-content\">\n            <div class=\"task-left\">\n              <button\n                @click=\"toggleTask(task.id)\"\n                class=\"checkbox-button\"\n                :disabled=\"task.updating\"\n              >\n                <span class=\"checkbox\" :class=\"{ checked: task.completed }\">\n                  <span v-if=\"task.completed\" class=\"checkmark\">✓</span>\n                </span>\n              </button>\n              <div class=\"task-info\">\n                <span class=\"task-text\" :class=\"{ completed: task.completed }\">\n                  {{ task.text }}\n                </span>\n                <div class=\"task-meta\">\n                  <span class=\"difficulty-badge\" :class=\"task.difficulty\">\n                    {{ getDifficultyLabel(task.difficulty) }}\n                  </span>\n                  <span class=\"task-date\">\n                    {{ formatDate(task.createdAt) }}\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div class=\"task-actions\">\n              <span v-if=\"task.updating\" class=\"updating-spinner\"></span>\n              <button\n                @click=\"deleteTask(task.id)\"\n                class=\"delete-button\"\n                :disabled=\"task.deleting || task.updating\"\n              >\n                <span class=\"delete-icon\">×</span>\n              </button>\n            </div>\n          </div>\n        </li>\n      </transition-group>\n\n      <div v-if=\"filteredTasks.length === 0\" class=\"empty-state\">\n        <div class=\"empty-icon\">\n          {{ currentFilter === 'completed' ? '🎉' : currentFilter === 'pending' ? '📝' : '📋' }}\n        </div>\n        <p class=\"empty-text\">\n          {{ getEmptyStateText() }}\n        </p>\n      </div>\n    </div>\n\n    <ConfirmationModal\n      :isVisible=\"showDeleteAccountModal\"\n      title=\"Подтвердите удаление аккаунта\"\n      message=\"Это действие безвозвратно удалит ваш аккаунт и все связанные с ним задачи. Вы уверены?\"\n      confirmButtonText=\"Удалить аккаунт\"\n      cancelButtonText=\"Отмена\"\n      :isLoading=\"isDeletingAccount\"\n      :inputErrorMessage=\"deletePasswordError\"\n      @confirm=\"confirmAccountDeletion\"\n      @cancel=\"cancelDeleteAccount\"\n    >\n      <template v-slot:content v-if=\"!isDeletingAccount\">\n        <div class=\"modal-input-group\">\n          <label for=\"currentLoginPassword\">Ваш текущий пароль:</label>\n          <input type=\"password\" id=\"currentLoginPassword\" v-model=\"currentLoginPassword\" autocomplete=\"current-password\" />\n        </div>\n      </template>\n    </ConfirmationModal>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted, watch, defineExpose } from 'vue'; // Removed defineEmits import from here\nimport { db, auth, deleteUser, signOut as firebaseSignOut } from '../firebase';\nimport {\n  collection,\n  getDocs,\n  deleteDoc,\n  doc,\n  updateDoc,\n  query,\n  where,\n  orderBy,\n  getDoc,\n  setDoc,\n  addDoc\n} from 'firebase/firestore';\nimport { reauthenticateWithCredential, EmailAuthProvider } from 'firebase/auth';\nimport { useRouter } from 'vue-router';\nimport ConfirmationModal from './ConfirmationModal.vue';\n\n// defineEmits is a compiler macro, no need to import it explicitly\nconst emit = defineEmits(['show-reauth-modal']); // defineEmits can be declared directly here\n\nconst router = useRouter();\n\n// --- Props ---\nconst props = defineProps({\n  msg: {\n    type: String,\n    default: \"Менеджер задач\"\n  },\n  user: {\n    type: Object,\n    default: null\n  }\n});\n\n// --- Reactive State ---\nconst newTask = ref('');\nconst newTaskDifficulty = ref('normal');\nconst tasks = ref([]);\nconst inputError = ref(false);\nconst isAddingTask = ref(false);\nconst currentFilter = ref('all');\n\n// Sync and Refresh state\nconst isRefreshing = ref(false);\nconst autoSyncEnabled = ref(true);\nconst syncIndicator = ref(false);\nconst lastUpdated = ref(null);\nconst nextSyncCountdown = ref(0);\nconst currentTime = ref(Date.now());\n\n// Intervals for polling and countdown\nlet autoSyncIntervalId = null;\nlet countdownIntervalId = null;\nlet updateCurrentTimeIntervalId = null;\n\nconst SYNC_INTERVAL = 10000;\n\n// Account Deletion State\nconst showDeleteAccountModal = ref(false);\nconst currentLoginPassword = ref('');\nconst isDeletingAccount = ref(false);\nconst deletePasswordError = ref(''); // Error message for password input\n\n// Notification State\nconst notificationMessage = ref('');\nconst notificationType = ref('');\nlet notificationTimeoutId = null;\n\n\n// --- Computed Properties ---\nconst completedTasks = computed(() => {\n  return tasks.value.filter(task => task.completed);\n});\n\nconst pendingTasks = computed(() => {\n  return tasks.value.filter(task => !task.completed);\n});\n\nconst filteredTasks = computed(() => {\n  switch (currentFilter.value) {\n    case 'completed':\n      return completedTasks.value;\n    case 'pending':\n      return pendingTasks.value;\n    default:\n      // Sort tasks by creation date (newest first) for consistency\n      return [...tasks.value].sort((a, b) => {\n        // Ensure both a.createdAt and b.createdAt are valid Date objects or Firebase Timestamps\n        const dateA = a.createdAt?.toDate ? a.createdAt.toDate() : new Date(a.createdAt);\n        const dateB = b.createdAt?.toDate ? b.createdAt.toDate() : new Date(b.createdAt);\n        return dateB.getTime() - dateA.getTime();\n      });\n  }\n});\n\n// --- Methods ---\n\n/**\n * Displays a notification message.\n */\n\n\n/**\n * Loads user preferences from Firestore.\n */\nconst loadUserPreferences = async (userId) => {\n  if (!userId) {\n    console.log(\"No userId provided to loadUserPreferences. Skipping preference load.\");\n    return;\n  }\n\n  try {\n    const docRef = doc(db, \"userPreferences\", userId);\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      const preferences = docSnap.data();\n      if (typeof preferences.autoSyncEnabled === 'boolean') {\n        autoSyncEnabled.value = preferences.autoSyncEnabled;\n        console.log(\"Loaded autoSyncEnabled from Firestore:\", preferences.autoSyncEnabled);\n      }\n    } else {\n      console.log(\"No user preferences found for this user. Will use default autoSyncEnabled: true.\");\n    }\n  } catch (e) {\n    console.error(\"Error loading user preferences:\", e);\n  }\n};\n\n/**\n * Saves a single user preference to Firestore.\n */\nconst saveUserPreference = async (key, value) => {\n  if (!props.user || !props.user.uid) {\n    console.error(\"Cannot save user preference: User not authenticated or UID unavailable.\");\n    return;\n  }\n\n  try {\n    const docRef = doc(db, \"userPreferences\", props.user.uid);\n    await setDoc(docRef, { [key]: value }, { merge: true });\n    console.log(`User preference '${key}' saved as '${value}' to Firestore.`);\n  } catch (e) {\n    console.error(`Error saving user preference '${key}':`, e);\n  }\n};\n\n\n/**\n * Loads tasks from Firestore. This method performs a single fetch.\n * It's used for initial load, manual refresh, and by the auto-sync polling.\n */\nconst loadTasks = async (userId) => {\n  if (!userId) {\n    tasks.value = [];\n    console.log(\"Cannot load tasks: No user ID provided (user logged out or not initialized).\");\n    return;\n  }\n\n  isRefreshing.value = true;\n  syncIndicator.value = true;\n\n  try {\n    const q = query(collection(db, \"tasks\"), where(\"userId\", \"==\", userId), orderBy(\"createdAt\", \"desc\"));\n    const querySnapshot = await getDocs(q);\n\n    tasks.value = querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      deleting: false,\n      updating: false,\n      completed: doc.data().completed ?? false,\n      difficulty: doc.data().difficulty ?? \"normal\",\n      createdAt: doc.data().createdAt,\n      text: doc.data().text\n    }));\n\n    lastUpdated.value = new Date();\n  } catch (e) {\n    console.error(\"Error loading tasks:\", e);\n  } finally {\n    setTimeout(() => {\n      syncIndicator.value = false;\n      isRefreshing.value = false;\n    }, 500);\n  }\n};\n\n/**\n * Initiates a manual refresh of tasks.\n * Resets the auto-sync timer if auto-sync is enabled.\n */\nconst refreshTasks = async () => {\n  if (!props.user || !props.user.uid || isRefreshing.value) {\n    console.log(\"Refresh aborted: User not authenticated or already refreshing.\");\n    return;\n  }\n\n  if (autoSyncEnabled.value) {\n    stopAutoSync();\n    await loadTasks(props.user.uid);\n    startAutoSync();\n  } else {\n    await loadTasks(props.user.uid);\n  }\n};\n\n/**\n * Toggles the auto-sync feature.\n */\nconst toggleAutoSync = () => {\n  autoSyncEnabled.value = !autoSyncEnabled.value;\n  saveUserPreference('autoSyncEnabled', autoSyncEnabled.value);\n\n  if (autoSyncEnabled.value) {\n    startAutoSync();\n  } else {\n    stopAutoSync();\n  }\n};\n\n/**\n * Starts the auto-sync by setting up the polling interval and countdown timer.\n */\nconst startAutoSync = () => {\n  if (!props.user || !props.user.uid) {\n    console.log(\"Cannot start auto-sync: User not authenticated or UID unavailable.\");\n    return;\n  }\n\n  stopAutoSync();\n\n  loadTasks(props.user.uid);\n\n  autoSyncIntervalId = setInterval(async () => {\n    console.log('Auto-sync: Refreshing tasks...');\n    if (props.user && props.user.uid) {\n      await loadTasks(props.user.uid);\n      nextSyncCountdown.value = SYNC_INTERVAL / 1000;\n    } else {\n      console.log(\"Auto-sync interval detected user logged out. Stopping auto-sync.\");\n      stopAutoSync();\n    }\n  }, SYNC_INTERVAL);\n  nextSyncCountdown.value = SYNC_INTERVAL / 1000;\n  countdownIntervalId = setInterval(() => {\n    if (nextSyncCountdown.value > 0) {\n      nextSyncCountdown.value--;\n    }\n  }, 1000);\n  console.log(\"Auto-sync enabled (polling every 10 seconds).\");\n};\n\n/**\n * Stops the auto-sync by clearing all intervals.\n */\nconst stopAutoSync = () => {\n  if (autoSyncIntervalId) {\n    clearInterval(autoSyncIntervalId);\n    autoSyncIntervalId = null;\n  }\n  if (countdownIntervalId) {\n    clearInterval(countdownIntervalId);\n    countdownIntervalId = null;\n  }\n  nextSyncCountdown.value = 0;\n  console.log(\"Auto-sync disabled.\");\n};\n\nconst addTask = async () => {\n  if (!newTask.value.trim()) {\n    inputError.value = true;\n    setTimeout(() => {\n      inputError.value = false;\n    }, 500);\n    return;\n  }\n  if (!props.user || !props.user.uid) {\n    console.error(\"User not authenticated to add task.\");\n    showNotification(\"Вы не авторизованы для добавления задач.\", \"error\");\n    return;\n  }\n\n  isAddingTask.value = true;\n\n  try {\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const taskData = {\n      text: newTask.value.trim(),\n      completed: false,\n      difficulty: newTaskDifficulty.value,\n      createdAt: new Date(),\n      userId: props.user.uid\n    };\n\n    const docRef = await addDoc(collection(db, \"tasks\"), taskData);\n\n    tasks.value.unshift({\n      id: docRef.id,\n      deleting: false,\n      updating: false,\n      ...taskData\n    });\n\n    newTask.value = \"\";\n    newTaskDifficulty.value = \"normal\";\n    showNotification(\"Задача успешно добавлена!\", \"success\");\n  } catch (e) {\n    console.error(\"Error adding task:\", e);\n    showNotification(\"Ошибка при добавлении задачи.\", \"error\");\n  } finally {\n    isAddingTask.value = false;\n  }\n};\n\nconst toggleTask = async (id) => {\n  const task = tasks.value.find(t => t.id === id);\n  if (!task || !props.user || !props.user.uid) {\n    console.error(\"Cannot toggle task: Task not found or user not authenticated.\");\n    return;\n  }\n\n  const originalCompleted = task.completed;\n  task.updating = true;\n  task.completed = !task.completed;\n\n  try {\n    await new Promise(resolve => setTimeout(resolve, 300));\n\n    await updateDoc(doc(db, \"tasks\", id), {\n      completed: task.completed\n    });\n    showNotification(\"Задача обновлена!\", \"success\");\n  } catch (e) {\n    console.error(\"Error updating task:\", e);\n    task.completed = originalCompleted;\n    showNotification(\"Ошибка при обновлении задачи.\", \"error\");\n  } finally {\n    task.updating = false;\n  }\n};\n\nconst deleteTask = async (id) => {\n  const taskIndex = tasks.value.findIndex(t => t.id === id);\n  if (taskIndex === -1 || !props.user || !props.user.uid) {\n    console.error(\"Cannot delete task: Task not found or user not authenticated.\");\n    return;\n  }\n\n  const taskToDelete = tasks.value[taskIndex];\n  taskToDelete.deleting = true;\n\n  try {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    await deleteDoc(doc(db, \"tasks\", id));\n\n    tasks.value = tasks.value.filter(t => t.id !== id);\n    showNotification(\"Задача успешно удалена!\", \"success\");\n  } catch (e) {\n    console.error(\"Error deleting task:\", e);\n    if (taskToDelete) {\n      taskToDelete.deleting = false;\n    }\n    showNotification(\"Ошибка при удалении задачи.\", \"error\");\n  }\n};\n\nconst getDifficultyLabel = (difficulty) => {\n  const labels = {\n    easy: \"Легко\",\n    normal: \"Нормально\",\n    hard: \"Сложно\"\n  };\n  return labels[difficulty] || labels.normal;\n};\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"\";\n  let date;\n  if (timestamp.toDate && typeof timestamp.toDate === 'function') {\n    date = timestamp.toDate();\n  } else if (timestamp instanceof Date) {\n    date = timestamp;\n  } else {\n    date = new Date(timestamp);\n  }\n\n  if (isNaN(date.getTime())) {\n    return \"Неверная дата\";\n  }\n\n  return date.toLocaleDateString('ru-RU', {\n    day: '2-digit',\n    month: '2-digit',\n    year: '2-digit'\n  });\n};\n\nconst formatLastUpdated = () => {\n  if (!lastUpdated.value) return '';\n\n  const now = new Date(currentTime.value);\n  const diffSeconds = Math.floor((now.getTime() - lastUpdated.value.getTime()) / 1000);\n\n  if (diffSeconds < 60) {\n    if (diffSeconds <= 5) {\n      return 'только что';\n    } else {\n      return `${diffSeconds} сек. назад`;\n    }\n  } else if (diffSeconds < 3600) {\n    const minutes = Math.floor(diffSeconds / 60);\n    return `${minutes} мин. назад`;\n  } else if (diffSeconds < 86400) {\n    const hours = Math.floor(diffSeconds / 3600);\n    return `${hours} час. назад`;\n  } else {\n    return lastUpdated.value.toLocaleDateString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    });\n  }\n};\n\nconst getEmptyStateText = () => {\n  switch (currentFilter.value) {\n    case 'completed':\n      return 'Нет выполненных задач';\n    case 'pending':\n      return 'Нет активных задач. Отличная работа!';\n    default:\n      return 'Пока нет задач. Добавьте первую!';\n  }\n};\n\n/**\n * Opens the account deletion confirmation modal specific to MainPage.vue.\n */\nconst promptDeleteAccount = () => {\n  if (!props.user) {\n    showNotification(\"Вы не авторизованы.\", \"error\");\n    return;\n  }\n  // Clear previous inputs and errors when opening the modal\n  currentLoginPassword.value = '';\n  deletePasswordError.value = '';\n  isDeletingAccount.value = false; // Ensure loading state is off when opening\n  showDeleteAccountModal.value = true;\n};\n\n/**\n * Handles the actual account deletion process (Client-Side).\n */\nconst confirmAccountDeletion = async () => {\n  const currentUser = auth.currentUser;\n  deletePasswordError.value = ''; // Clear previous password error before new attempt\n\n  if (!currentUser || !currentUser.email) {\n    // This case should ideally not happen if promptDeleteAccount checks auth\n    showNotification(\"Ошибка: Пользователь не авторизован или Email недоступен.\", \"error\");\n    // Don't close modal, let user see error or cancel manually\n    return;\n  }\n  if (!currentLoginPassword.value.trim()) {\n    deletePasswordError.value = \"Пожалуйста, введите ваш пароль.\"; // More generic initial error\n    return; // Keep modal open and show specific error\n  }\n\n  isDeletingAccount.value = true; // Set loading state to true immediately for deletion logic\n\n  try {\n    // 1. Client-side re-authentication (REQUIRED by Firebase Auth for deleteUser)\n    console.log(\"Attempting client-side re-authentication...\");\n    const credential = EmailAuthProvider.credential(currentUser.email, currentLoginPassword.value);\n    await reauthenticateWithCredential(currentUser, credential);\n    console.log(\"Client-side re-authentication successful.\");\n    showNotification(\"Повторная аутентификация пройдена. Удаление аккаунта...\", \"success\", 1500);\n\n    // 2. Delete all tasks associated with the user (client-side)\n    console.log(`Attempting to delete tasks for user: ${currentUser.uid}`);\n    const tasksRef = collection(db, 'tasks');\n    const userTasksQuery = query(tasksRef, where('userId', '==', currentUser.uid));\n    const querySnapshot = await getDocs(userTasksQuery);\n\n    const deletePromises = [];\n    querySnapshot.forEach((d) => {\n      deletePromises.push(deleteDoc(d.ref));\n    });\n\n    // Ensure all Firestore deletions complete\n    await Promise.all(deletePromises);\n    console.log(`Successfully deleted ${querySnapshot.size} tasks for user.`);\n    showNotification(\"Все задачи удалены.\", \"success\", 1000);\n\n    // 3. Delete user preferences (client-side) - Assuming preferences are stored by UID\n    const userPrefRef = doc(db, 'userPreferences', currentUser.uid);\n    const userPrefSnap = await getDoc(userPrefRef);\n    if (userPrefSnap.exists()) {\n      await deleteDoc(userPrefRef);\n      console.log(`Successfully deleted user preferences for user: ${currentUser.uid}`);\n      showNotification(\"Пользовательские настройки удалены.\", \"success\", 1000);\n    }\n\n    // 4. Delete the Firebase Authentication user account\n    await deleteUser(currentUser);\n    console.log(\"User account successfully deleted. Redirecting to /register.\");\n    showNotification(\"Аккаунт успешно удален. Вы будете перенаправлены.\", \"success\", 3000);\n\n    // Sign out to clear local state (though deleteUser often auto-logs out)\n    await firebaseSignOut(auth);\n\n    // Close the modal here because deletion was successful\n    showDeleteAccountModal.value = false;\n    currentLoginPassword.value = ''; // Clear password field on success\n\n    // Redirect to login/register page after a short delay\n    setTimeout(() => {\n      router.replace('/register');\n    }, 2500);\n\n  } catch (error) {\n    console.error(\"Ошибка при удалении аккаунта:\", error);\n    let notificationMessageText = \"Произошла ошибка при попытке удалить аккаунт.\";\n\n    if (error.code) {\n        if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\n            deletePasswordError.value = \"Неверный пароль.\"; // Specific error message for the modal input\n            notificationMessageText = \"Неверный пароль. Пожалуйста, попробуйте снова.\"; // More descriptive for global notification\n        } else if (error.code === 'auth/user-not-found') {\n            notificationMessageText = \"Пользователь не найден. Возможно, он уже был удален.\";\n        } else if (error.code === 'auth/requires-recent-login') {\n            // This error means the user needs to re-authenticate more generally (e.g., if they were logged in for too long)\n            // Emit to App.vue to show its generic re-auth modal (which then reloads the page or re-authenticates silently)\n            emit('show-reauth-modal');\n            // Do NOT set deletePasswordError or close modal here.\n            // The re-auth modal will handle the re-authentication flow,\n            // and upon success, the user can re-attempt deletion.\n            return; // Exit this function, preventing further execution in finally block\n        } else if (error.code === 'permission-denied') {\n            notificationMessageText = `Ошибка: Недостаточно прав для удаления данных. Проверьте правила безопасности Firestore. (${error.message})`;\n        } else if (error.code === 'unavailable') {\n            notificationMessageText = `Ошибка сети или службы Firebase недоступна. Пожалуйста, попробуйте позже.`;\n        } else {\n            notificationMessageText = `Ошибка Firebase: ${error.message}`;\n        }\n    } else {\n        notificationMessageText = `Неизвестная ошибка: ${error.message || error}`;\n    }\n    showNotification(notificationMessageText, \"error\", 5000);\n\n    // IMPORTANT: If there's a password error, the modal should remain open.\n    // If it's another error (like network, or general firebase error), it might be okay to close or keep open.\n    // For now, we'll keep it open if deletePasswordError is set.\n    // If it's a general error not tied to input, it will remain open, which is acceptable.\n  } finally {\n    isDeletingAccount.value = false; // Always reset loading state\n  }\n};\n\n\n// --- Watchers ---\n// Watch the user prop for changes\nwatch(() => props.user, async (newVal, oldVal) => {\n  if (newVal && newVal.uid) {\n    console.log(\"MainPage: User prop changed to logged in:\", newVal.uid);\n    await loadUserPreferences(newVal.uid);\n    if (autoSyncEnabled.value) {\n      startAutoSync();\n    } else {\n      await loadTasks(newVal.uid);\n    }\n  } else if (oldVal && !newVal) {\n    console.log(\"MainPage: User prop changed to logged out.\");\n    tasks.value = [];\n    stopAutoSync();\n  }\n}, { immediate: true });\n\n// --- Lifecycle Hooks ---\nonMounted(() => {\n  updateCurrentTimeIntervalId = setInterval(() => {\n    currentTime.value = Date.now();\n  }, 1000);\n});\n\nonUnmounted(() => {\n  stopAutoSync();\n  if (updateCurrentTimeIntervalId) {\n    updateCurrentTimeIntervalId = null;\n  }\n});\n\n// EXPOSE methods to parent components (App.vue)\ndefineExpose({\n  promptDeleteAccount\n});\n</script>\n\n<style scoped>\n/* Your existing styles remain unchanged for most elements. */\n.task-container {\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 2rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: calc(100vh - 70px);\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  box-sizing: border-box;\n  border-radius: 15px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n}\n\n.header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.title {\n  color: white;\n  font-size: 2.5rem;\n  font-weight: 700;\n  margin: 0 0 1rem 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  animation: fadeInDown 0.8s ease-out;\n}\n\n.stats {\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  margin-top: 1rem;\n}\n\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: white;\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.stat-number {\n  font-size: 1.8rem;\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n}\n\n.stat-label {\n  font-size: 0.9rem;\n  opacity: 0.8;\n}\n\n/* --- New styles for sync section --- */\n.sync-section {\n  margin-bottom: 1.5rem;\n  animation: fadeInUp 0.8s ease-out 0.1s both;\n}\n\n.sync-controls {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 1rem;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  margin-bottom: 0.5rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.refresh-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: linear-gradient(45deg, #2196F3, #1976D2);\n  color: white;\n  border: none;\n  padding: 0.8rem 1.2rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  min-width: 120px;\n  justify-content: center;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n\n.refresh-button:hover:not(:disabled) {\n  background: linear-gradient(45deg, #1976D2, #2196F3);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 10px rgba(33, 150, 243, 0.4);\n}\n\n.refresh-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  background: #90CAF9;\n  box-shadow: none;\n}\n\n.refresh-button.refreshing {\n  background: linear-gradient(45deg, #FFB300, #F57C00);\n  color: #fff;\n}\n\n.refresh-icon {\n  font-size: 1.1rem;\n  transition: transform 0.3s ease;\n}\n\n.refresh-icon.spinning {\n  animation: spin 1s linear infinite;\n}\n\n.auto-sync-toggle {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n}\n\n.sync-toggle-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  padding: 0.8rem 1.2rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n  min-width: 160px;\n  justify-content: center;\n}\n\n.sync-toggle-button.active {\n  background: linear-gradient(45deg, #4CAF50, #45a049);\n  border-color: #4CAF50;\n  box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);\n}\n\n.sync-toggle-button:hover:not(.active) {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.sync-toggle-button.active:hover {\n  background: linear-gradient(45deg, #45a049, #4CAF50);\n  box-shadow: 0 4px 10px rgba(76, 175, 80, 0.4);\n}\n\n.sync-icon {\n  font-size: 1.1rem;\n}\n\n.sync-status {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: white;\n  font-size: 0.8rem;\n  margin-left: 0.5rem;\n}\n\n.sync-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.5);\n  transition: all 0.3s ease;\n}\n\n.sync-indicator.active {\n  background: #4CAF50;\n  box-shadow: 0 0 10px rgba(76, 175, 80, 0.6);\n  animation: pulse 1.5s infinite ease-in-out;\n}\n\n.next-sync-text {\n  opacity: 0.8;\n}\n\n.last-updated {\n  text-align: center;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.8rem;\n  background: rgba(255, 255, 255, 0.05);\n  padding: 0.5rem;\n  border-radius: 8px;\n  backdrop-filter: blur(5px);\n  margin-top: 0.5rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.update-text {\n  font-style: italic;\n}\n/* --- End of new styles for sync section --- */\n\n.input-section {\n  margin-bottom: 1.5rem;\n  animation: fadeInUp 0.8s ease-out 0.2s both;\n}\n\n.input-group {\n  display: flex;\n  gap: 0.5rem;\n  background: white;\n  padding: 0.5rem;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.input-group:focus-within {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);\n}\n\n.task-input {\n  flex: 1;\n  border: none;\n  outline: none;\n  font-size: 1.1rem;\n  padding: 1rem;\n  border-radius: 8px;\n  background: transparent;\n  transition: all 0.3s ease;\n}\n\n.difficulty-select {\n  border: none;\n  outline: none;\n  font-size: 1rem;\n  padding: 1rem;\n  border-radius: 8px;\n  background: #f8f9fa;\n  cursor: pointer;\n  min-width: 120px;\n  border: 1px solid #e0e0e0;\n}\n\n.difficulty-select:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.task-input::placeholder {\n  color: #999;\n}\n\n.task-input.shake {\n  animation: shake 0.5s ease-in-out;\n}\n\n.add-button {\n  background: linear-gradient(45deg, #4CAF50, #45a049);\n  color: white;\n  border: none;\n  padding: 1rem 1.5rem;\n  border-radius: 8px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  min-width: 140px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n\n.button-content,\n.loading-content {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: center;\n}\n\n.add-button:hover:not(:disabled) {\n  background: linear-gradient(45deg, #45a049, #4CAF50);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);\n}\n\n.add-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  background: #A5D6A7;\n  box-shadow: none;\n}\n\n.spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.updating-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(102, 126, 234, 0.3);\n  border-top: 2px solid #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-right: 0.5rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.15);\n    opacity: 0.8;\n  }\n}\n\n.filter-section {\n  margin-bottom: 1.5rem;\n  animation: fadeInUp 0.8s ease-out 0.3s both;\n}\n\n.filter-buttons {\n  display: flex;\n  gap: 0.5rem;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 0.5rem;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.filter-btn {\n  flex: 1;\n  background: transparent;\n  color: white;\n  border: none;\n  padding: 0.8rem 1rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  opacity: 0.7;\n}\n\n.filter-btn.active {\n  background: white;\n  color: #667eea;\n  opacity: 1;\n  font-weight: 600;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\n}\n\n.filter-btn:hover:not(.active) {\n  opacity: 1;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.tasks-section {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.task-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  position: relative;\n}\n\n.task-item {\n  background: white;\n  margin-bottom: 1rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  overflow: hidden;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  will-change: transform, opacity;\n}\n\n.task-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.task-item.deleting {\n  opacity: 0.6;\n  transform: scale(0.95);\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.task-item.completed {\n  opacity: 0.8;\n  background: #f0f0f0;\n}\n\n.task-item.updating {\n  opacity: 0.7;\n}\n\n.task-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1.2rem;\n}\n\n.task-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n}\n\n.checkbox-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n}\n\n.checkbox {\n  width: 24px;\n  height: 24px;\n  border: 2px solid #ddd;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.checkbox.checked {\n  background: #4CAF50;\n  border-color: #4CAF50;\n}\n\n.checkmark {\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n.task-info {\n  flex: 1;\n}\n\n.task-text {\n  font-size: 1.1rem;\n  color: #333;\n  display: block;\n  margin-bottom: 0.5rem;\n  transition: all 0.3s ease;\n  word-break: break-word;\n}\n\n.task-text.completed {\n  text-decoration: line-through;\n  color: #999;\n}\n\n.task-meta {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.difficulty-badge {\n  padding: 0.2rem 0.6rem;\n  border-radius: 12px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.difficulty-badge.easy {\n  background: #d4edda;\n  color: #155724;\n}\n\n.difficulty-badge.normal {\n  background: #fff3cd;\n  color: #856404;\n}\n\n.difficulty-badge.hard {\n  background: #f8d7da;\n  color: #721c24;\n}\n\n.task-date {\n  font-size: 0.8rem;\n  color: #999;\n}\n\n.task-actions {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-shrink: 0;\n}\n\n.delete-button {\n  background: linear-gradient(45deg, #f44336, #d32f2f);\n  color: white;\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 1.5rem;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n\n.delete-button:hover:not(:disabled) {\n  background: linear-gradient(45deg, #d32f2f, #f44336);\n  transform: scale(1.1);\n  box-shadow: 0 4px 8px rgba(244, 67, 54, 0.3);\n}\n\n.delete-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  background: #FFCDD2;\n  box-shadow: none;\n}\n\n.delete-icon {\n  line-height: 1;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: white;\n  opacity: 0.8;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.empty-icon {\n  font-size: 4rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.empty-text {\n  font-size: 1.2rem;\n  margin: 0;\n}\n\n/* Animations */\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translate3d(0, -100%, 0);\n  }\n  to {\n    opacity: 1;\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translate3d(0, 100%, 0);\n  }\n  to {\n    opacity: 1;\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n  20%, 40%, 60%, 80% { transform: translateX(5px); }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);\n    transform: translate3d(0, -30px, 0);\n  }\n  70% {\n    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);\n    transform: translate3d(0, -15px, 0);\n  }\n  90% { transform: translate3d(0,-4px,0); }\n}\n\n/* ---- UNIFIED Transition group animations for filtering ---- */\n.task-list-enter-active,\n.task-list-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.task-list-enter-from {\n  opacity: 0;\n  transform: translateX(-30px) scale(0.9);\n}\n\n.task-list-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  opacity: 1;\n  position: absolute;\n  width: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  margin-bottom: 0 !important;\n}\n\n.task-list-leave-to {\n  opacity: 0;\n  transform: translateX(30px) scale(0.9);\n}\n\n/* For elements that are moving (due to other items being added/removed) */\n.task-list-move {\n  transition: transform 0.3s ease;\n}\n\n#currentLoginPassword {\n  width: 100%;\n  padding: 0.875rem 1.25rem;\n  border: 2px solid transparent;\n  border-radius: 12px;\n  font-size: 1rem;\n  font-weight: 500;\n  color: #1f2937;\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n  box-shadow: \n    0 4px 6px rgba(0, 0, 0, 0.05),\n    inset 0 1px 0 rgba(255, 255, 255, 0.9);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  outline: none;\n  position: relative;\n}\n\n#currentLoginPassword::placeholder {\n  color: #9ca3af;\n  font-weight: 400;\n}\n\n#currentLoginPassword:focus {\n  border-color: #667eea;\n  background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);\n  box-shadow: \n    0 8px 16px rgba(102, 126, 234, 0.15),\n    0 0 0 4px rgba(102, 126, 234, 0.1),\n    inset 0 1px 0 rgba(255, 255, 255, 0.9);\n  transform: translateY(-1px);\n}\n\n#currentLoginPassword:hover:not(:focus) {\n  border-color: rgba(102, 126, 234, 0.3);\n  box-shadow: \n    0 6px 12px rgba(0, 0, 0, 0.08),\n    inset 0 1px 0 rgba(255, 255, 255, 0.9);\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .task-container {\n    padding: 1rem;\n    min-height: calc(100vh - 50px);\n  }\n\n  .title {\n    font-size: 2rem;\n  }\n\n  .stats {\n    gap: 1rem;\n    flex-wrap: wrap;\n  }\n\n  .stat-item {\n    padding: 0.8rem;\n    flex: 1 1 auto;\n  }\n\n  .stat-number {\n    font-size: 1.5rem;\n  }\n\n  .sync-controls {\n    flex-direction: column;\n    gap: 0.8rem;\n    padding: 0.8rem;\n  }\n\n  .refresh-button, .sync-toggle-button {\n    width: 100%;\n    min-width: unset;\n  }\n\n  .auto-sync-toggle {\n    flex-direction: column;\n    align-items: center;\n    gap: 0.8rem;\n    width: 100%;\n  }\n\n  .sync-status {\n    width: 100%;\n    justify-content: center;\n    margin-left: 0;\n  }\n\n  .input-group {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .add-button {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .filter-buttons {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .task-content {\n    padding: 1rem;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 1rem;\n  }\n\n  .task-left {\n    width: 100%;\n  }\n\n  .task-info {\n    width: calc(100% - 34px);\n  }\n\n  .task-text {\n    font-size: 1rem;\n  }\n\n  .task-meta {\n    flex-direction: row;\n    align-items: center;\n    gap: 0.8rem;\n    margin-top: 0.5rem;\n  }\n\n  .task-actions {\n    width: 100%;\n    justify-content: flex-end;\n    margin-top: 1rem;\n  }\n\n}\n</style>\n","import script from \"./MainPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MainPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MainPage.vue?vue&type=style&index=0&id=62718256&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-62718256\"]])\n\nexport default __exports__","// src/router/index.js\nimport { createRouter, createWebHashHistory } from 'vue-router';\nimport LoginView from '@/views/LoginView.vue';\nimport RegisterView from '@/views/RegisterView.vue';\nimport ResetPasswordView from '@/views/ResetPasswordView.vue';\nimport MainPage from '@/components/MainPage.vue';\n\nimport { auth } from '../firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\n\nconst routes = [\n  {\n    path: '/',\n    name: 'root',\n    redirect: { name: 'tasks' }, // Default redirect to tasks if authenticated\n    meta: {\n      requiresAuth: true // This route implicitly requires authentication via redirect\n    }\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: LoginView,\n    meta: {\n      requiresAuth: false // Public page\n    }\n  },\n  {\n    path: '/register',\n    name: 'register',\n    component: RegisterView,\n    meta: {\n      requiresAuth: false // Public page\n    }\n  },\n  {\n    path: '/reset-password',\n    name: 'reset-password',\n    component: ResetPasswordView,\n    meta: {\n      requiresAuth: false // Public page\n    }\n  },\n  {\n    path: '/tasks',\n    name: 'tasks',\n    component: MainPage,\n    meta: {\n      requiresAuth: true // Protected page\n    }\n  },\n  // Catch-all route for 404 errors, redirects to root which then redirects to tasks/login\n  {\n    path: '/:catchAll(.*)',\n    redirect: '/'\n  }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(process.env.BASE_URL),\n  routes\n});\n\n// A Promise to ensure Firebase Auth state is resolved before any routing decision.\n// This prevents race conditions where the router tries to redirect before Firebase confirms user status.\nconst getCurrentUser = () => {\n  return new Promise((resolve, reject) => {\n    const unsubscribe = onAuthStateChanged(\n      auth,\n      user => {\n        unsubscribe(); // Unsubscribe immediately after the first state change\n        resolve(user);\n      },\n      reject\n    );\n  });\n};\n\nrouter.beforeEach(async (to, from, next) => {\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  const currentUser = await getCurrentUser(); // Wait for the current user to be determined\n\n  // Scenario 1: Route requires authentication AND user is NOT logged in OR email is not verified.\n  if (requiresAuth && (!currentUser || !currentUser.emailVerified)) {\n    // If the user is trying to access a protected route (like /tasks) while logged out\n    // or with an unverified email, redirect to the login page.\n    if (to.path !== '/login' && to.path !== '/register' && to.path !== '/reset-password') {\n      console.log(`Redirecting to /login from ${to.path} (requires auth and/or email verification, but condition not met).`);\n      next('/login');\n    } else {\n      // If the destination is already a public auth page (login, register, reset), allow access.\n      console.log(`Allowing navigation to ${to.path} (public auth page).`);\n      next();\n    }\n  }\n  // Scenario 2: User IS logged in AND email IS verified AND trying to access a public authentication page\n  // (login, register, reset-password, or the root path which redirects to tasks).\n  else if ((to.path === '/login' || to.path === '/register' || to.path === '/reset-password' || to.path === '/') && currentUser && currentUser.emailVerified) {\n    console.log(`Redirecting to /tasks from ${to.path} (user logged in and email verified, but on public auth page).`);\n    next('/tasks');\n  }\n  // Scenario 3: All other cases (user is logged in and verified accessing a protected route,\n  // or user is not logged in and accessing a non-protected public route).\n  else {\n    console.log(`Allowing navigation to ${to.path} (no special auth redirect needed).`);\n    next();\n  }\n});\n\nexport default router;","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\ncreateApp(App).use(router).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktodo_focus\"] = self[\"webpackChunktodo_focus\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(7787); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","$setup","user","_createBlock","_component_router_link","to","_cache","_hoisted_5","onClick","args","toggleDropdown","_hoisted_6","_toDisplayString","displayName","email","_normalizeClass","dropdownOpen","_hoisted_7","handleLogout","openDeleteConfirmation","_hoisted_8","_createVNode","_component_router_view","Component","_Transition","name","mode","_resolveDynamicComponent","ref","onShowReauthModal","openReauthModal","_component_FooterElement","_component_ConfirmationModal","isVisible","showReauthModal","title","message","confirmButtonText","onConfirm","closeReauthModalAndLogout","onCancel","closeReauthModal","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","db","getAnalytics","getFirestore","auth","getAuth","initializeAppCheck","provider","ReCaptchaV3Provider","isTokenAutoRefreshEnabled","setPersistence","browserLocalPersistence","then","console","log","catch","error","errorCode","code","errorMessage","$options","currentYear","computed","Date","getFullYear","__exports__","$props","_withModifiers","cancel","showCloseButton","cancelButtonText","inputErrorMessage","isLoading","_renderSlot","_ctx","$slots","undefined","disabled","confirm","_hoisted_9","props","type","Boolean","default","String","methods","this","$emit","components","FooterElement","ConfirmationModal","setup","mainPageRef","router","useRouter","route","useRoute","onAuthStateChanged","currentUser","value","async","signOut","path","replace","alert","handleClickOutside","event","userInfoDropdown","document","querySelector","contains","target","promptDeleteAccount","warn","onMounted","addEventListener","onUnmounted","removeEventListener","render","password","showPassword","rememberMe","isResendLoading","errors","loginError","showResendEmailButton","resendCooldown","resendCooldownInterval","resendSuccessMessage","unverifiedUser","isFormValid","trim","validateEmail","emailRegex","test","validatePassword","length","clearError","field","startCoolDown","duration","clearInterval","setInterval","handleLogin","browserSessionPersistence","userCredential","signInWithEmailAndPassword","emailVerified","push","resendVerificationEmail","userToVerify","sendEmailVerification","onBeforeUnmount","onSubmit","$event","placeholder","onBlur","onInput","required","_hoisted_10","_hoisted_11","_hoisted_14","_hoisted_13","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","emit","__emit","confirmPassword","showConfirmPassword","agreeToTerms","reactive","validFields","showSuccessModal","showErrorModal","registerErrorMessage","passwordStrength","pwd","strength","passwordStrengthClass","passwordStrengthText","validateConfirmPassword","handleSuccessConfirm","handleSuccessCancel","openErrorModal","closeErrorModal","handleRegister","hasFormErrors","Object","values","some","createUserWithEmailAndPassword","Error","updateProfile","split","_hoisted_12","href","handleResetPassword","$data","isSuccess","data","sendPasswordResetEmail","SYNC_INTERVAL","__props","newTask","newTaskDifficulty","tasks","inputError","isAddingTask","currentFilter","isRefreshing","autoSyncEnabled","syncIndicator","lastUpdated","nextSyncCountdown","currentTime","now","autoSyncIntervalId","countdownIntervalId","updateCurrentTimeIntervalId","showDeleteAccountModal","currentLoginPassword","isDeletingAccount","deletePasswordError","notificationMessage","notificationType","completedTasks","filter","task","completed","pendingTasks","filteredTasks","sort","a","b","dateA","createdAt","toDate","dateB","getTime","loadUserPreferences","userId","docRef","doc","docSnap","getDoc","exists","preferences","e","saveUserPreference","key","uid","setDoc","merge","loadTasks","q","query","collection","where","orderBy","querySnapshot","getDocs","docs","map","deleting","updating","difficulty","text","setTimeout","refreshTasks","stopAutoSync","startAutoSync","toggleAutoSync","addTask","showNotification","Promise","resolve","taskData","addDoc","unshift","toggleTask","find","t","originalCompleted","updateDoc","deleteTask","taskIndex","findIndex","taskToDelete","deleteDoc","getDifficultyLabel","labels","easy","normal","hard","formatDate","timestamp","date","isNaN","toLocaleDateString","day","month","year","formatLastUpdated","diffSeconds","Math","floor","minutes","hours","getEmptyStateText","confirmAccountDeletion","credential","EmailAuthProvider","reauthenticateWithCredential","tasksRef","userTasksQuery","deletePromises","forEach","d","all","size","userPrefRef","userPrefSnap","deleteUser","firebaseSignOut","notificationMessageText","watch","newVal","oldVal","immediate","__expose","msg","_hoisted_19","onKeyup","_withKeys","_hoisted_26","_hoisted_25","_hoisted_27","_hoisted_28","active","_hoisted_29","_TransitionGroup","tag","_Fragment","_renderList","_hoisted_30","_hoisted_31","checked","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_41","_hoisted_42","cancelDeleteAccount","_hoisted_43","for","autocomplete","routes","redirect","meta","requiresAuth","component","LoginView","RegisterView","ResetPasswordView","MainPage","createRouter","history","createWebHashHistory","getCurrentUser","reject","unsubscribe","beforeEach","from","next","matched","record","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","splice","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}