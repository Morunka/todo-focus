{"version":3,"file":"js/app.2b4f21bb.js","mappings":"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","sources":["webpack://todo-focus/./src/App.vue","webpack://todo-focus/./src/firebase.js","webpack://todo-focus/./src/components/FooterElement.vue","webpack://todo-focus/./src/components/FooterElement.vue?7532","webpack://todo-focus/./src/components/ConfirmationModal.vue","webpack://todo-focus/./src/components/ConfirmationModal.vue?017d","webpack://todo-focus/./src/App.vue?7ccd","webpack://todo-focus/./src/views/LoginView.vue","webpack://todo-focus/./src/views/LoginView.vue?5755","webpack://todo-focus/./src/views/RegisterView.vue","webpack://todo-focus/./src/views/RegisterView.vue?1ec6","webpack://todo-focus/./src/views/ResetPasswordView.vue","webpack://todo-focus/./src/views/ResetPasswordView.vue?c056","webpack://todo-focus/./src/components/MainPage.vue","webpack://todo-focus/./src/components/MainPage.vue?b3e7","webpack://todo-focus/./src/router/index.js","webpack://todo-focus/./src/main.js","webpack://todo-focus/webpack/bootstrap","webpack://todo-focus/webpack/runtime/chunk loaded","webpack://todo-focus/webpack/runtime/compat get default export","webpack://todo-focus/webpack/runtime/define property getters","webpack://todo-focus/webpack/runtime/global","webpack://todo-focus/webpack/runtime/hasOwnProperty shorthand","webpack://todo-focus/webpack/runtime/jsonp chunk loading","webpack://todo-focus/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <title>{{ pageTitle }}</title>\n    <nav class=\"navbar\">\n      <div class=\"nav-container\">\n        <div class=\"nav-brand\">\n          <h2 class=\"brand-title\">ToDo список «Фокус»</h2>\n        </div>\n        <div class=\"nav-links\">\n          <router-link to=\"/tasks\" class=\"nav-link\" v-if=\"user\">\n            <span class=\"nav-icon\">📋</span>\n            <span class=\"nav-text\">Задачи</span>\n          </router-link>\n\n          <router-link to=\"/login\" class=\"nav-link\" v-if=\"!user\">\n            <span class=\"nav-icon\">🔐</span>\n            <span class=\"nav-text\">Войти</span>\n          </router-link>\n\n          <div v-else class=\"user-info-dropdown\">\n            <button class=\"user-info-button\" @click=\"toggleDropdown\">\n              <span class=\"user-icon\">👤</span>\n              <span class=\"user-name\">{{ user?.displayName || user?.email || 'Пользователь' }}</span>\n              <span class=\"dropdown-arrow\" :class=\"{ 'rotated': dropdownOpen }\">▼</span>\n            </button>\n            <div class=\"dropdown-menu\" v-if=\"dropdownOpen\">\n              <button @click=\"handleLogout\" class=\"dropdown-item\">\n                <span class=\"dropdown-icon\">➡️</span>\n                Выйти\n              </button>\n              <button @click=\"openDeleteConfirmation\" class=\"dropdown-item delete-account-item\">\n                <span class=\"dropdown-icon\">🗑️</span>\n                Удалить аккаунт\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n\n    <main class=\"main-content\">\n      <router-view v-slot=\"{ Component }\">\n        <transition name=\"page\" mode=\"out-in\">\n          <component :is=\"Component\" />\n        </transition>\n      </router-view>\n    </main>\n\n    <FooterElement />\n\n    <ConfirmationModal\n      :isVisible=\"showDeleteConfirmationModal\"\n      title=\"Удаление аккаунта\"\n      message=\"Вы уверены, что хотите безвозвратно удалить свой аккаунт и все связанные с ним задачи? Это действие необратимо.\"\n      confirmButtonText=\"Удалить\"\n      cancelButtonText=\"Отмена\"\n      @confirm=\"handleDeleteAccount\"\n      @cancel=\"closeDeleteConfirmation\"\n    />\n\n    <ConfirmationModal\n      :isVisible=\"showReauthModal\"\n      title=\"Требуется повторная аутентификация\"\n      message=\"Для удаления аккаунта необходимо недавнее подтверждение. Пожалуйста, выйдите из системы и войдите снова, затем попробуйте удалить аккаунт.\"\n      confirmButtonText=\"Понятно\"\n      :cancelButtonText=\"Отмена\" @confirm=\"closeReauthModalAndLogout\"\n      @cancel=\"closeReauthModal\" />\n  </div>\n</template>\n\n<script>\nimport { auth, signOut, onAuthStateChanged, deleteUser } from './firebase';\nimport { db } from './firebase';\nimport { collection, query, where, getDocs, deleteDoc } from 'firebase/firestore';\n\nimport FooterElement from './components/FooterElement.vue';\nimport ConfirmationModal from './components/ConfirmationModal.vue';\n\nexport default {\n  components: {\n    FooterElement,\n    ConfirmationModal\n  },\n  data() {\n    return {\n      user: null,\n      dropdownOpen: false,\n      showDeleteConfirmationModal: false,\n      showReauthModal: false // NEW: To control visibility of re-authentication modal\n    };\n  },\n  created() {\n    onAuthStateChanged(auth, (currentUser) => {\n      this.user = currentUser;\n    });\n  },\n  methods: {\n    async handleLogout() {\n      try {\n        await signOut(auth);\n        this.dropdownOpen = false;\n        console.log(\"User successfully logged out. Redirecting to /login.\");\n        if (this.$route.path !== '/login') {\n          this.$router.replace('/login');\n        }\n      } catch (error) {\n        console.error(\"Error logging out:\", error);\n        alert(`Ошибка при выходе: ${error.message}`);\n      }\n    },\n    toggleDropdown() {\n      this.dropdownOpen = !this.dropdownOpen;\n    },\n    handleClickOutside(event) {\n      const userInfoDropdown = this.$el.querySelector('.user-info-dropdown');\n      if (this.dropdownOpen && userInfoDropdown && !userInfoDropdown.contains(event.target)) {\n        this.dropdownOpen = false;\n      }\n    },\n\n    /**\n     * Opens the custom confirmation modal for account deletion.\n     */\n    openDeleteConfirmation() {\n      this.dropdownOpen = false; // Close the user dropdown\n      this.showDeleteConfirmationModal = true; // Show the custom modal\n    },\n\n    /**\n     * Closes the custom confirmation modal.\n     */\n    closeDeleteConfirmation() {\n      this.showDeleteConfirmationModal = false;\n    },\n\n    // NEW: Methods for the re-authentication modal\n    openReauthModal() {\n      this.showReauthModal = true;\n    },\n    closeReauthModal() {\n      this.showReauthModal = false;\n    },\n    closeReauthModalAndLogout() {\n      this.closeReauthModal();\n      this.handleLogout(); // Automatically log out after they acknowledge the message\n    },\n\n    /**\n     * Handles the actual account deletion process, triggered by modal confirmation.\n     */\n    async handleDeleteAccount() {\n      this.closeDeleteConfirmation(); // Close the initial deletion modal\n\n      const currentUser = auth.currentUser;\n\n      if (!currentUser) {\n        console.error(\"No user is logged in to delete account.\");\n        this.$router.replace('/login');\n        return;\n      }\n\n      try {\n        console.log(`Attempting to delete tasks for user: ${currentUser.uid}`);\n        const tasksRef = collection(db, 'tasks');\n        const userTasksQuery = query(tasksRef, where('userId', '==', currentUser.uid));\n        const querySnapshot = await getDocs(userTasksQuery);\n\n        const deletePromises = [];\n        querySnapshot.forEach((doc) => {\n          deletePromises.push(deleteDoc(doc.ref));\n        });\n\n        await Promise.all(deletePromises);\n        console.log(`Successfully deleted ${querySnapshot.size} tasks for user.`);\n\n        await deleteUser(currentUser);\n\n        console.log(\"User account successfully deleted. Redirecting to /register.\");\n        this.$router.replace('/register');\n\n      } catch (error) {\n        console.error(\"Error deleting account:\", error);\n        if (error.code === 'auth/requires-recent-login') {\n          // Changed: Use the custom modal instead of alert\n          this.openReauthModal();\n        } else if (error.code === 'auth/user-not-found') {\n          // This case might also benefit from a custom modal in a real app,\n          // but for now, we'll keep the alert for simplicity\n          alert(\"Аккаунт не найден. Возможно, он уже был удален.\");\n          this.$router.replace('/login');\n        } else {\n          alert(`Ошибка при удалении аккаунта: ${error.message}`);\n        }\n      }\n    }\n  },\n  mounted() {\n    document.addEventListener('click', this.handleClickOutside);\n  },\n  beforeUnmount() {\n    document.removeEventListener('click', this.handleClickOutside);\n  }\n};\n</script>\n\n<style>\n/* All your existing styles from the previous answer remain unchanged. */\n/* I'm including the full style block here as requested. */\n\n#app {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-smoothing: grayscale;\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n}\n\n.navbar {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  animation: slideDown 0.8s ease-out;\n}\n\n.nav-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 2rem;\n}\n\n.nav-brand {\n  animation: fadeInLeft 0.8s ease-out;\n}\n\n.brand-title {\n  color: white;\n  font-size: 1.8rem;\n  font-weight: 700;\n  margin: 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n\n.nav-links {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  animation: fadeInRight 0.8s ease-out;\n}\n\n.nav-link {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  color: rgba(255, 255, 255, 0.8);\n  text-decoration: none;\n  font-weight: 600;\n  border-radius: 25px;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n\n.nav-link::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n\n.nav-link:hover {\n  color: white;\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n.nav-link:hover::before {\n  left: 100%;\n}\n\n.nav-link.router-link-exact-active {\n  color: white;\n  background: linear-gradient(45deg, #42b983, #369870);\n  box-shadow: 0 2px 8px rgba(66, 185, 131, 0.3);\n}\n\n.nav-icon {\n  font-size: 1.2rem;\n}\n\n.nav-text {\n  font-size: 1rem;\n}\n\n/* New styles for user info and dropdown menu */\n.user-info-dropdown {\n  position: relative;\n  display: inline-block;\n  margin-left: 1rem;\n}\n\n.user-info-button {\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  border-radius: 25px;\n  padding: 0.75rem 1.5rem;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.user-info-button:hover {\n  background: rgba(255, 255, 255, 0.25);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n}\n\n.user-icon {\n  font-size: 1.2rem;\n}\n\n.user-name {\n  max-width: 150px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.dropdown-arrow {\n  font-size: 0.8rem;\n  transition: transform 0.3s ease;\n}\n\n.dropdown-arrow.rotated {\n  transform: rotate(180deg);\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n  min-width: 160px;\n  z-index: 1;\n  overflow: hidden;\n  animation: slideInFromTop 0.3s ease-out;\n}\n\n.dropdown-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 10px 15px;\n  border: none;\n  background: none;\n  text-align: left;\n  cursor: pointer;\n  font-size: 1rem;\n  color: #333;\n  transition: background-color 0.2s ease, color 0.2s ease;\n}\n\n.dropdown-item:hover {\n  background-color: #f0f0f0;\n  color: #667eea;\n}\n\n.dropdown-icon {\n  font-size: 1.1rem;\n  margin-right: 5px;\n}\n\n/* NEW: Style for the delete account button */\n.dropdown-item.delete-account-item {\n  color: #dc3545; /* Red color to indicate a destructive action */\n  font-weight: 600;\n}\n\n.dropdown-item.delete-account-item:hover {\n  background-color: #f8d7da; /* Light red background on hover */\n  color: #a71d2a; /* Darker red on hover */\n}\n\n\n.main-content {\n  flex-grow: 1;\n  animation: fadeInUp 0.8s ease-out 0.2s both;\n}\n\n/* Page transitions */\n.page-enter-active {\n  transition: all 0.4s ease-out;\n}\n\n.page-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.page-enter-from {\n  opacity: 0;\n  transform: translateY(20px);\n}\n\n.page-leave-to {\n  opacity: 0;\n  transform: translateY(-20px);\n}\n\n/* Animations */\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-100%);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideInFromTop {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .nav-container {\n    padding: 1rem;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .nav-links {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .nav-link, .user-info-button {\n    flex: 1;\n    justify-content: center;\n    min-width: 100px;\n    padding: 0.75rem 1rem;\n  }\n\n  .brand-title {\n    font-size: 1.5rem;\n  }\n\n  .user-name {\n    max-width: 80px;\n  }\n\n  .user-info-dropdown {\n    margin-left: 0;\n    width: 100%;\n  }\n\n  .dropdown-menu {\n    left: 0;\n    width: 100%;\n    min-width: unset;\n  }\n}\n\n@media (max-width: 480px) {\n  .nav-link, .user-info-button {\n    padding: 0.5rem 0.8rem;\n    font-size: 0.9rem;\n  }\n\n  .nav-icon, .user-icon {\n    font-size: 1rem;\n  }\n\n  .brand-title {\n    font-size: 1.3rem;\n  }\n}\n\n/* Footer styles (copied from FooterElement.vue and adapted as needed) */\n.bg-gray-800 {\n  background-color: #2d3748;\n}\n\n.text-white {\n  color: #ffffff;\n}\n\n.py-6 {\n  padding-top: 1.5rem;\n  padding-bottom: 1.5rem;\n}\n\n.mt-auto {\n  margin-top: auto;\n}\n\n.container {\n  max-width: 1200px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.text-sm {\n  font-size: 0.875rem;\n}\n\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n\n.text-blue-400 {\n  color: #63b3ed;\n}\n.hover\\:text-blue-300:hover {\n  color: #90cdf4;\n}\n\n.text-purple-400 {\n  color: #a78bfa;\n}\n.hover\\:text-purple-300:hover {\n  color: #c4b5fd;\n}\n\n.text-green-400 {\n  color: #68d391;\n}\n.hover\\:text-green-300:hover {\n  color: #9ae6b4;\n}\n\n.text-yellow-400 {\n  color: #f6e05e;\n}\n.hover\\:text-yellow-300:hover {\n  color: #faf089;\n}\n\n.underline {\n  text-decoration: underline;\n}\n\n.transition-colors {\n  transition-property: background-color, border-color, color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n\n.duration-200 {\n  transition-duration: 200ms;\n}\n\n/* Custom Scrollbar Styles */\n/* Webkit browsers (Chrome, Safari, Edge) */\n::-webkit-scrollbar {\n  width: 12px;\n}\n\n::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 10px;\n  backdrop-filter: blur(5px);\n}\n\n::-webkit-scrollbar-thumb {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 10px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  transition: all 0.3s ease;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n  transform: scale(1.1);\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);\n}\n\n::-webkit-scrollbar-thumb:active {\n  background: linear-gradient(135deg, #4c5bc7 0%, #5e3a7e 100%);\n}\n\n/* Firefox scrollbar */\nhtml {\n  scrollbar-width: thin;\n  scrollbar-color: #667eea rgba(255, 255, 255, 0.1);\n}\n\n/* Custom scrollbar for dropdown menu */\n.dropdown-menu::-webkit-scrollbar {\n  width: 6px;\n}\n\n.dropdown-menu::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n}\n\n.dropdown-menu::-webkit-scrollbar-thumb {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 3px;\n}\n\n.dropdown-menu::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n}\n\n/* Footer styles (copied from FooterElement.vue and adapted as needed) */\n.bg-gray-800 {\n  background-color: #2d3748;\n}\n</style>\n","// firebase.js\n// Place this as early as possible, even before firebase imports\n// This must execute BEFORE Firebase SDKs attempt to initialize,\n// so it needs to be near the top of the file, outside of any functions.\nif (process.env.NODE_ENV === 'development') {\n  self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;\n  console.log(\"App Check Debug Token enabled for development. Expecting token in console.\");\n}\n\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport {\n  getFirestore, // Import getFirestore to get the Firestore instance\n} from \"firebase/firestore\";\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  sendPasswordResetEmail,\n  updateProfile,\n  sendEmailVerification,\n  setPersistence,\n  browserLocalPersistence,\n  browserSessionPersistence,\n  deleteUser // Import deleteUser for account deletion\n} from \"firebase/auth\";\n\n// Import App Check modules\nimport { initializeAppCheck, ReCaptchaV3Provider } from 'firebase/app-check';\n\n// Your web app's Firebase configuration - NOW USING ENVIRONMENT VARIABLES\nconst firebaseConfig = {\n  // Use 'process.env.VUE_APP_' for Vue CLI projects.\n  apiKey: process.env.VUE_APP_FIREBASE_API_KEY,\n  authDomain: process.env.VUE_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.VUE_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.VUE_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.VUE_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.VUE_APP_FIREBASE_APP_ID,\n  measurementId: process.env.VUE_APP_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app); // Ensure analytics is properly initialized\nconst db = getFirestore(app); // Initialize Firestore instance\nconst auth = getAuth(app);\n\n// Initialize App Check (it will pick up self.FIREBASE_APPCHECK_DEBUG_TOKEN if set)\n// This should be initialized regardless of NODE_ENV if you intend to use it in both dev/prod\n// but the reCAPTCHA provider itself is production-only.\ninitializeAppCheck(app, {\n  provider: new ReCaptchaV3Provider(process.env.VUE_APP_RECAPTCHA_SITE_KEY),\n  isTokenAutoRefreshEnabled: true\n});\n\n\n// Set Firebase Authentication state persistence to local storage\n// This will keep the user logged in even after closing and reopening the browser\nsetPersistence(auth, browserLocalPersistence)\n  .then(() => {\n    console.log(\"Firebase Auth persistence set to 'local'.\");\n  })\n  .catch((error) => {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    console.error(\"Error setting Firebase Auth persistence:\", errorCode, errorMessage);\n  });\n\nexport {\n  db, // Export db\n  auth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  sendPasswordResetEmail,\n  updateProfile,\n  analytics,\n  sendEmailVerification,\n  setPersistence,\n  browserSessionPersistence,\n  browserLocalPersistence,\n  deleteUser // Export deleteUser\n};","<template>\n  <footer class=\"app-footer\">\n    <div class=\"footer-container\">\n      <div class=\"footer-content\">\n        <div class=\"footer-section\">\n          <p class=\"footer-text primary\">\n            Работает на \n            <a \n              href=\"https://firebase.google.com/\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link firebase\"\n            >\n              <span class=\"link-icon\">🔥</span>\n              Firebase\n            </a>, размещено на \n            <a \n              href=\"https://github.com/Morunka/todo-focus\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link github\"\n            >\n              <span class=\"link-icon\">📂</span>\n              Github pages\n            </a>\n          </p>\n          <p class=\"footer-text secondary\">\n            Приложение создано с помощью \n            <a \n              href=\"https://vuejs.org\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link vue\"\n            >\n              <span class=\"link-icon\">⚡</span>\n              Vue.js\n            </a>\n            от \n            <a \n              href=\"https://t.me/MEOW_MUR920\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              class=\"footer-link author\"\n            >\n              <span class=\"link-icon\">👨‍💻</span>\n              Morunka\n            </a>\n          </p>\n        </div>\n        \n        <div class=\"footer-stats\">\n          <div class=\"stat-badge\">\n            <span class=\"stat-icon\">📱</span>\n            <span class=\"stat-text\">Адаптивный</span>\n          </div>\n          <div class=\"stat-badge\">\n            <span class=\"stat-icon\">⚡</span>\n            <span class=\"stat-text\">Быстрый</span>\n          </div>\n          <div class=\"stat-badge\">\n            <span class=\"stat-icon\">🔒</span>\n            <span class=\"stat-text\">Защищенный</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"footer-divider\"></div>\n      \n      <div class=\"footer-bottom\">\n        <p class=\"copyright\">\n          © {{ currentYear }} ToDo список «Фокус».\n        </p>\n      </div>\n    </div>\n  </footer>\n</template>\n\n<script>\nexport default {\n  name: 'FooterElement',\n  computed: {\n    currentYear() {\n      return new Date().getFullYear();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.app-footer {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  margin-top: auto;\n  position: relative;\n  overflow: hidden;\n}\n\n.app-footer::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.05);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n}\n\n.footer-container {\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 2rem;\n  position: relative;\n  z-index: 1;\n}\n\n.footer-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.footer-section {\n  text-align: center;\n}\n\n.footer-text {\n  margin: 0.5rem 0;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  line-height: 1.6;\n}\n\n.footer-text.primary {\n  font-size: 0.95rem;\n  color: rgba(255, 255, 255, 0.95);\n  font-weight: 500;\n}\n\n.footer-text.secondary {\n  font-size: 0.9rem;\n  color: rgba(255, 255, 255, 0.85);\n  font-weight: 400;\n}\n\n.footer-link {\n  color: inherit;\n  text-decoration: none;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.2rem 0.4rem;\n  border-radius: 6px;\n  transition: all 0.3s ease;\n  position: relative;\n  font-weight: 600;\n}\n\n.footer-link:hover {\n  transform: translateY(-2px);\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n\n.footer-link.firebase {\n  color: #ff9800;\n}\n\n.footer-link.firebase:hover {\n  background: rgba(255, 152, 0, 0.15);\n  box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);\n}\n\n.footer-link.github {\n  color: #e91e63;\n}\n\n.footer-link.github:hover {\n  background: rgba(233, 30, 99, 0.15);\n  box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);\n}\n\n.footer-link.vue {\n  color: #4caf50;\n}\n\n.footer-link.vue:hover {\n  background: rgba(76, 175, 80, 0.15);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.footer-link.author {\n  color: #ffc107;\n}\n\n.footer-link.author:hover {\n  background: rgba(255, 193, 7, 0.15);\n  box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);\n}\n\n.link-icon {\n  font-size: 0.9rem;\n  animation: pulse 2s infinite;\n}\n\n.footer-stats {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.stat-badge {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  background: rgba(255, 255, 255, 0.1);\n  padding: 0.6rem 1rem;\n  border-radius: 20px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  transition: all 0.3s ease;\n  font-size: 0.85rem;\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 500;\n}\n\n.stat-badge:hover {\n  transform: translateY(-3px);\n  background: rgba(255, 255, 255, 0.15);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n}\n\n.stat-icon {\n  font-size: 1rem;\n}\n\n.stat-text {\n  font-size: 0.8rem;\n  letter-spacing: 0.5px;\n}\n\n.footer-divider {\n  width: 100%;\n  height: 1px;\n  background: linear-gradient(\n    to right,\n    transparent,\n    rgba(255, 255, 255, 0.3) 20%,\n    rgba(255, 255, 255, 0.6) 50%,\n    rgba(255, 255, 255, 0.3) 80%,\n    transparent\n  );\n  margin: 1.5rem 0;\n}\n\n.footer-bottom {\n  text-align: center;\n}\n\n.copyright {\n  margin: 0;\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 0.7);\n  font-weight: 400;\n  letter-spacing: 0.5px;\n}\n\n/* Animations */\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .footer-container {\n    padding: 1.5rem 1rem;\n  }\n  \n  .footer-content {\n    gap: 1rem;\n  }\n  \n  .footer-text.primary,\n  .footer-text.secondary {\n    font-size: 0.85rem;\n  }\n  \n  .footer-stats {\n    gap: 0.5rem;\n  }\n  \n  .stat-badge {\n    padding: 0.5rem 0.8rem;\n    font-size: 0.8rem;\n  }\n  \n  .footer-link {\n    padding: 0.3rem 0.5rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .footer-section {\n    padding: 0 0.5rem;\n  }\n  \n  .footer-text.primary,\n  .footer-text.secondary {\n    font-size: 0.8rem;\n    line-height: 1.5;\n  }\n  \n  .footer-stats {\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .stat-badge {\n    width: 100%;\n    max-width: 200px;\n    justify-content: center;\n  }\n}\n</style>","import { render } from \"./FooterElement.vue?vue&type=template&id=c3e4910c&scoped=true\"\nimport script from \"./FooterElement.vue?vue&type=script&lang=js\"\nexport * from \"./FooterElement.vue?vue&type=script&lang=js\"\n\nimport \"./FooterElement.vue?vue&type=style&index=0&id=c3e4910c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c3e4910c\"]])\n\nexport default __exports__","<template>\n    <transition name=\"modal-fade\">\n      <div class=\"modal-overlay\" v-if=\"isVisible\" @click.self=\"cancel\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-header\">\n            <h3 class=\"modal-title\">{{ title }}</h3>\n            <button class=\"close-button\" @click=\"cancel\" v-if=\"showCloseButton || cancelButtonText !== null\">\n              <span class=\"material-icons\">❌</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <p class=\"modal-message\">{{ message }}</p>\n          </div>\n          <div class=\"modal-footer\" :class=\"{ 'single-button-footer': confirmButtonText && cancelButtonText === null }\">\n            <button class=\"cancel-button\" @click=\"cancel\" v-if=\"cancelButtonText !== null\">\n              {{ cancelButtonText }}\n            </button>\n            <button class=\"confirm-button\" @click=\"confirm\" v-if=\"confirmButtonText !== null\">\n              {{ confirmButtonText }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </transition>\n</template>\n\n<script>\nexport default {\n  props: {\n    isVisible: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: 'Подтверждение'\n    },\n    message: {\n      type: String,\n      default: 'Вы уверены, что хотите выполнить это действие?'\n    },\n    confirmButtonText: {\n      type: String,\n      default: 'Подтвердить'\n    },\n    cancelButtonText: {\n      type: String,\n      default: 'Отмена'\n    },\n    // New prop: controls whether the 'X' close button in the header is shown\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    }\n  },\n  methods: {\n    confirm() {\n      this.$emit('confirm');\n    },\n    cancel() {\n      // Emit 'cancel' only if the cancel button is meant to be visible or 'X' is active\n      if (this.cancelButtonText !== null || this.showCloseButton) {\n        this.$emit('cancel');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Modal Overlay */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000; /* Ensure it's above other content */\n}\n\n/* Modal Dialog Box */\n.modal-dialog {\n  background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);\n  border-radius: 15px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 450px;\n  animation: slide-in 0.3s ease-out;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden; /* Ensures rounded corners */\n}\n\n/* Modal Header */\n.modal-header {\n  padding: 1.5rem 1.5rem 1rem;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal-title {\n  font-size: 1.6rem;\n  font-weight: 700;\n  margin: 0;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 1.8rem;\n  cursor: pointer;\n  transition: color 0.2s ease, transform 0.2s ease;\n  padding: 0.2rem;\n  display: flex; /* For material-icons centering */\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: white;\n  transform: rotate(90deg);\n}\n\n/* Modal Body */\n.modal-body {\n  padding: 1.5rem;\n  color: #333;\n  font-size: 1.1rem;\n  line-height: 1.6;\n  text-align: center;\n  flex-grow: 1; /* Allow content to push footer down */\n}\n\n.modal-message {\n  margin: 0;\n  font-weight: 500;\n}\n\n/* Modal Footer */\n.modal-footer {\n  padding: 1rem 1.5rem 1.5rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  border-top: 1px solid #e0e0e0;\n  background: #fdfdfd;\n}\n\n/* New style for single button footer */\n.modal-footer.single-button-footer {\n  justify-content: center; /* Center the single button */\n}\n\n.cancel-button, .confirm-button {\n  padding: 0.8rem 1.5rem;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.cancel-button {\n  background-color: #e0e0e0;\n  color: #555;\n  border: 1px solid #ccc;\n}\n\n.cancel-button:hover {\n  background-color: #d0d0d0;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.confirm-button {\n  background: linear-gradient(45deg, #42b983, #369870); /* Green for success/primary action */\n  color: white;\n  border: none;\n}\n\n.confirm-button:hover {\n  background: linear-gradient(45deg, #369870, #42b983);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(66, 185, 131, 0.3);\n}\n\n/* Transitions for Modal */\n.modal-fade-enter-active, .modal-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-fade-enter-from, .modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-active .modal-dialog, .modal-fade-leave-active .modal-dialog {\n  transition: transform 0.3s ease-out;\n}\n\n.modal-fade-enter-from .modal-dialog {\n  transform: translateY(-50px);\n}\n\n.modal-fade-leave-to .modal-dialog {\n  transform: translateY(50px);\n}\n\n/* Animation for the modal dialog itself */\n@keyframes slide-in {\n  from {\n    opacity: 0;\n    transform: translateY(-50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Responsive adjustments */\n@media (max-width: 600px) {\n  .modal-dialog {\n    max-width: 95%;\n    margin: 1rem;\n  }\n\n  .modal-header {\n    padding: 1rem;\n  }\n\n  .modal-title {\n    font-size: 1.4rem;\n  }\n\n  .close-button {\n    font-size: 1.5rem;\n  }\n\n  .modal-body {\n    padding: 1rem;\n    font-size: 1rem;\n  }\n\n  .modal-footer {\n    flex-direction: column;\n    padding: 1rem;\n    gap: 0.8rem;\n  }\n\n  .cancel-button, .confirm-button {\n    width: 100%;\n    padding: 0.7rem 1rem;\n    font-size: 0.95rem;\n  }\n}\n</style>","import { render } from \"./ConfirmationModal.vue?vue&type=template&id=313e6638&scoped=true\"\nimport script from \"./ConfirmationModal.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmationModal.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmationModal.vue?vue&type=style&index=0&id=313e6638&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-313e6638\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=9ff5943c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=9ff5943c&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"login-container\">\n    <div class=\"login-card\">\n      <div class=\"login-header\">\n        <div class=\"login-icon\">🔑</div>\n        <h1 class=\"login-title\">Добро пожаловать!</h1>\n        <p class=\"login-subtitle\">Войдите в свою учетную запись</p>\n      </div>\n\n      <form @submit.prevent=\"handleLogin\" class=\"login-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\">Email</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.email }\"\n              placeholder=\"example@email.com\"\n              @blur=\"validateEmail\"\n              @input=\"clearError('email')\"\n              required\n            />\n            <span class=\"input-icon\">📧</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Пароль</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"password\"\n              :type=\"showPassword ? 'text' : 'password'\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.password }\"\n              placeholder=\"Введите пароль\"\n              @blur=\"validatePassword\"\n              @input=\"clearError('password')\"\n              required\n            />\n            <button\n              type=\"button\"\n              class=\"password-toggle\"\n              @click=\"showPassword = !showPassword\"\n            >\n              {{ showPassword ? '🙈' : '👁️' }}\n            </button>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.password\" class=\"error-message\">{{ errors.password }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-options\">\n          <label class=\"checkbox-wrapper\">\n            <input type=\"checkbox\" v-model=\"rememberMe\" class=\"checkbox\">\n            <span class=\"checkmark\"></span>\n            <span class=\"checkbox-text\">Запомнить меня</span>\n          </label>\n          <router-link to=\"/reset-password\" class=\"forgot-password-link\">Забыли пароль?</router-link>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"login-button\"\n          :class=\"{ 'loading': isLoading }\"\n          :disabled=\"isLoading || !isFormValid\"\n        >\n          <span v-if=\"!isLoading\" class=\"button-content\">\n            <span class=\"button-text\">Войти</span>\n            <span class=\"button-icon\">→</span>\n          </span>\n          <span v-else class=\"loading-spinner\"></span>\n        </button>\n      </form>\n\n      <div class=\"login-footer\">\n        <p class=\"footer-text\">\n          Нет аккаунта?\n          <router-link to=\"/register\" class=\"register-link\">Зарегистрироваться</router-link>\n        </p>\n        <p v-if=\"loginError\" class=\"error-message text-center\">{{ loginError }}</p>\n        <p v-if=\"showResendEmailButton\" class=\"info-message text-center\">\n            Пожалуйста, подтвердите свой Email.\n            <button\n                @click=\"resendVerificationEmail\"\n                :disabled=\"isResendLoading || resendCooldown > 0\"\n                class=\"resend-email-button\"\n            >\n                <span v-if=\"isResendLoading\" class=\"small-loading-spinner\"></span>\n                <span v-else-if=\"resendCooldown > 0\">Повторно через {{ resendCooldown }}с</span>\n                <span v-else>Отправить повторно</span>\n            </button>\n        </p>\n        <p v-if=\"resendSuccessMessage\" class=\"success-message text-center\">{{ resendSuccessMessage }}</p>\n      </div>\n    </div>\n\n    <div class=\"bg-decoration\">\n      <div class=\"floating-shape shape-1\"></div>\n      <div class=\"floating-shape shape-2\"></div>\n      <div class=\"floating-shape shape-3\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onBeforeUnmount } from 'vue';\nimport { useRouter } from 'vue-router';\nimport {\n  auth,\n  signInWithEmailAndPassword,\n  sendEmailVerification,\n  setPersistence,\n  browserSessionPersistence,\n  browserLocalPersistence,\n  signOut,\n} from '../firebase';\n\nconst router = useRouter();\n\n// Reactive state\nconst email = ref('');\nconst password = ref('');\nconst showPassword = ref(false);\nconst rememberMe = ref(true);\nconst isLoading = ref(false);\nconst isResendLoading = ref(false);\nconst errors = ref({});\nconst loginError = ref('');\nconst showResendEmailButton = ref(false);\nconst resendCooldown = ref(0);\nlet resendCooldownInterval = null;\nconst resendSuccessMessage = ref('');\n\n// NEW: Store the user object if verification is needed\nconst unverifiedUser = ref(null);\n\n// Computed properties\nconst isFormValid = computed(() => {\n  return email.value.trim() !== '' &&\n         password.value.trim() !== '' &&\n         !errors.value.email &&\n         !errors.value.password;\n});\n\n// Methods\nconst validateEmail = () => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!email.value) {\n    errors.value.email = 'Email обязателен';\n  } else if (!emailRegex.test(email.value)) {\n    errors.value.email = 'Неверный формат email';\n  } else {\n    delete errors.value.email;\n  }\n};\n\nconst validatePassword = () => {\n  if (!password.value) {\n    errors.value.password = 'Пароль обязателен';\n  } else if (password.value.length < 6) {\n    errors.value.password = 'Пароль должен быть не менее 6 символов';\n  } else {\n    delete errors.value.password;\n  }\n};\n\nconst clearError = (field) => {\n  delete errors.value[field];\n  loginError.value = '';\n  showResendEmailButton.value = false;\n  resendSuccessMessage.value = '';\n  unverifiedUser.value = null; // Clear unverified user on new input/error clear\n};\n\nconst startCoolDown = (duration) => {\n  resendCooldown.value = duration;\n  if (resendCooldownInterval) {\n    clearInterval(resendCooldownInterval);\n  }\n  resendCooldownInterval = setInterval(() => {\n    if (resendCooldown.value > 0) {\n      resendCooldown.value--;\n    } else {\n      clearInterval(resendCooldownInterval);\n      resendCooldownInterval = null;\n    }\n  }, 1000);\n};\n\nconst handleLogin = async () => {\n  validateEmail();\n  validatePassword();\n  loginError.value = '';\n  showResendEmailButton.value = false;\n  resendSuccessMessage.value = '';\n  unverifiedUser.value = null; // Reset unverified user at the start of login attempt\n\n  if (!isFormValid.value) {\n    return;\n  }\n\n  isLoading.value = true;\n\n  try {\n    await setPersistence(\n      auth,\n      rememberMe.value ? browserLocalPersistence : browserSessionPersistence\n    );\n\n    const userCredential = await signInWithEmailAndPassword(auth, email.value, password.value);\n    const user = userCredential.user;\n\n    if (!user.emailVerified) {\n      // Store the user object before signing them out\n      unverifiedUser.value = user;\n\n      await signOut(auth); // Sign out the user immediately\n\n      loginError.value = 'Ваш Email не подтвержден. Пожалуйста, проверьте свою почту (и папку \"Спам\"!) и подтвердите аккаунт, прежде чем войти.';\n      showResendEmailButton.value = true;\n      startCoolDown(60);\n    } else {\n      router.push('/tasks');\n    }\n  } catch (error) {\n    console.error('Login error:', error.code, error.message);\n    switch (error.code) {\n      case 'auth/user-not-found':\n      case 'auth/wrong-password':\n      case 'auth/invalid-credential':\n        loginError.value = 'Неверный Email или пароль.';\n        break;\n      case 'auth/invalid-email':\n        loginError.value = 'Неверный формат Email. Проверьте правильность ввода.';\n        break;\n      case 'auth/too-many-requests':\n        loginError.value = 'Слишком много неудачных попыток входа. Попробуйте позже.';\n        showResendEmailButton.value = true;\n        startCoolDown(60);\n        break;\n      case 'auth/network-request-failed':\n        loginError.value = 'Ошибка сети. Проверьте ваше интернет-соединение.';\n        break;\n      default:\n        loginError.value = 'Произошла ошибка при входе. Пожалуйста, попробуйте снова. ' + error.message;\n        break;\n    }\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nconst resendVerificationEmail = async () => {\n  // Use the stored unverifiedUser first, as it's more reliable after a recent signOut\n  const userToVerify = unverifiedUser.value || auth.currentUser;\n\n  if (userToVerify) {\n    isResendLoading.value = true;\n    resendSuccessMessage.value = '';\n    loginError.value = ''; // Clear previous login errors\n\n    try {\n        await sendEmailVerification(userToVerify); // Use userToVerify here\n        resendSuccessMessage.value = 'Письмо для подтверждения отправлено повторно! Проверьте свой Email.';\n        startCoolDown(60); // Restart cooldown after successful send\n    } catch (error) {\n        console.error(\"Ошибка при повторной отправке письма:\", error);\n        if (error.code === 'auth/too-many-requests') {\n          loginError.value = 'Слишком много запросов на отправку письма. Пожалуйста, подождите.';\n          startCoolDown(60);\n        } else {\n          loginError.value = 'Не удалось отправить письмо повторно. Пожалуйста, попробуйте позже.';\n        }\n    } finally {\n        isResendLoading.value = false;\n    }\n  }\n  // No else block. If userToVerify is null, nothing happens.\n};\n\nonBeforeUnmount(() => {\n  if (resendCooldownInterval) {\n    clearInterval(resendCooldownInterval);\n    resendCooldownInterval = null;\n  }\n});\n</script>\n\n<style scoped>\n/* Your existing styles remain unchanged */\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n}\n\n.login-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 450px;\n  position: relative;\n  z-index: 2;\n  animation: slideInUp 0.8s ease-out;\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 2rem;\n  animation: fadeInDown 0.8s ease-out 0.2s both;\n}\n\n.login-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.login-title {\n  color: #333;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n}\n\n.login-subtitle {\n  color: #666;\n  font-size: 1rem;\n  margin: 0;\n}\n\n.login-form {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-label {\n  display: block;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 1rem 3rem 1rem 1rem;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: white;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  transform: translateY(-2px);\n}\n\n.form-input.error {\n  border-color: #f44336;\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.input-icon {\n  position: absolute;\n  right: 1rem;\n  font-size: 1.2rem;\n  pointer-events: none;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 1rem;\n  background: none;\n  border: none;\n  font-size: 1.2rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n}\n\n.password-toggle:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 0.85rem;\n  margin: 0.5rem 0 0 0;\n  font-weight: 500;\n}\n\n.form-options {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  font-size: 0.9rem;\n}\n\n.checkbox-wrapper {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  gap: 0.5rem;\n  color: #666;\n}\n\n.checkbox {\n  display: none;\n}\n\n.checkmark {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ddd;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.checkbox:checked + .checkmark {\n  background-color: #667eea;\n  border-color: #667eea;\n}\n\n.checkbox:checked + .checkmark::after {\n  content: '✓';\n  color: white;\n  font-weight: bold;\n  font-size: 0.8rem;\n}\n\n.forgot-password-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.forgot-password-link:hover {\n  color: #5a6fd8;\n  text-decoration: underline;\n}\n\n.login-button {\n  width: 100%;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.login-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);\n}\n\n.login-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.login-button:hover .button-icon {\n  transform: scale(1.2);\n}\n\n.loading-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 20px;\n  min-height: 20px;\n}\n\n.small-loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 16px;\n  min-height: 16px;\n  margin-right: 5px;\n}\n\n.login-footer {\n  text-align: center;\n  margin-top: 2rem;\n  animation: fadeInUp 0.8s ease-out 0.6s both;\n}\n\n.footer-text {\n  color: #666;\n  margin: 0;\n}\n\n.register-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.register-link:hover {\n  color: #5a6fd8;\n}\n\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.floating-shape {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  animation: float 6s ease-in-out infinite;\n}\n\n.shape-1 {\n  width: 100px;\n  height: 100px;\n  top: 20%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.shape-2 {\n  width: 150px;\n  height: 150px;\n  top: 60%;\n  right: 10%;\n  animation-delay: 2s;\n}\n\n.shape-3 {\n  width: 80px;\n  height: 80px;\n  bottom: 20%;\n  left: 20%;\n  animation-delay: 4s;\n}\n\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    transform: translate3d(0, -10px, 0);\n  }\n  70% {\n    transform: translate3d(0, -5px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-20px);\n  }\n}\n\n.error-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.error-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.error-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.error-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.login-footer .error-message.text-center {\n  text-align: center;\n  margin-top: 1rem;\n  color: #f44336;\n}\n\n.info-message {\n  color: #3f51b5;\n  font-size: 0.95rem;\n  margin-top: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(63, 81, 181, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(63, 81, 181, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.8rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n.success-message {\n  color: #4caf50;\n  font-size: 0.95rem;\n  margin-top: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.8rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n.resend-email-button {\n  background-color: #667eea;\n  color: white;\n  border: none;\n  padding: 0.7rem 1.2rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.resend-email-button:hover {\n  background-color: #5a6fd8;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(102, 126, 234, 0.3);\n}\n\n.resend-email-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n  opacity: 0.7;\n  transform: none;\n  box-shadow: none;\n}\n\n@media (max-width: 768px) {\n  .login-container {\n    padding: 1rem;\n  }\n\n  .login-card {\n    padding: 2rem;\n  }\n\n  .login-title {\n    font-size: 1.5rem;\n  }\n\n  .form-options {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 1rem;\n  }\n\n  .checkbox-wrapper {\n    align-items: flex-start;\n  }\n  .info-message, .success-message {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n  }\n  .resend-email-button {\n    font-size: 0.85rem;\n    padding: 0.6rem 1rem;\n  }\n}\n</style>\n","import script from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=0b3c1bdc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0b3c1bdc\"]])\n\nexport default __exports__","<template>\n  <div class=\"register-container\">\n    <div class=\"register-card\">\n      <div class=\"register-header\">\n        <div class=\"register-icon\">📝</div>\n        <h1 class=\"register-title\">Регистрация</h1>\n        <p class=\"register-subtitle\">Создайте новую учетную запись</p>\n      </div>\n\n      <form @submit.prevent=\"handleRegister\" class=\"register-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\">Email</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.email, 'success': validFields.email }\"\n              placeholder=\"example@email.com\"\n              @blur=\"validateEmail\"\n              @input=\"clearError('email')\"\n              required\n            />\n            <span class=\"input-icon\">📧</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Пароль</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"password\"\n              :type=\"showPassword ? 'text' : 'password'\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.password, 'success': validFields.password }\"\n              placeholder=\"Введите пароль\"\n              @blur=\"validatePassword\"\n              @input=\"clearError('password')\"\n              required\n            />\n            <button\n              type=\"button\"\n              class=\"password-toggle\"\n              @click=\"showPassword = !showPassword\"\n            >\n              {{ showPassword ? '🙈' : '👁️' }}\n            </button>\n          </div>\n          <div class=\"password-strength\">\n            <div class=\"strength-bar\">\n              <div class=\"strength-fill\" :class=\"passwordStrengthClass\"></div>\n            </div>\n            <span class=\"strength-text\">{{ passwordStrengthText }}</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.password\" class=\"error-message\">{{ errors.password }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\">Подтвердите пароль</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"confirmPassword\"\n              :type=\"showConfirmPassword ? 'text' : 'password'\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.confirmPassword, 'success': validFields.confirmPassword }\"\n              placeholder=\"Повторите пароль\"\n              @blur=\"validateConfirmPassword\"\n              @input=\"clearError('confirmPassword')\"\n              required\n            />\n            <button\n              type=\"button\"\n              class=\"password-toggle\"\n              @click=\"showConfirmPassword = !showConfirmPassword\"\n            >\n              {{ showConfirmPassword ? '🙈' : '👁️' }}\n            </button>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.confirmPassword\" class=\"error-message\">{{ errors.confirmPassword }}</p>\n          </transition>\n        </div>\n\n        <div class=\"form-options\">\n          <label class=\"checkbox-wrapper\">\n            <input type=\"checkbox\" v-model=\"agreeToTerms\" class=\"checkbox\">\n            <span class=\"checkmark\"></span>\n            <span class=\"checkbox-text\">\n              Я согласен с <a href=\"#\" class=\"terms-link\">условиями использования</a> и\n              <a href=\"#\" class=\"terms-link\">политикой конфиденциальности</a>\n            </span>\n          </label>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"register-button\"\n          :class=\"{ 'loading': isLoading }\"\n          :disabled=\"isLoading || !isFormValid\"\n        >\n          <span v-if=\"!isLoading\" class=\"button-content\">\n            <span class=\"button-text\">Зарегистрироваться</span>\n            <span class=\"button-icon\">✨</span>\n          </span>\n          <span v-else class=\"loading-spinner\"></span>\n        </button>\n      </form>\n\n      <div class=\"register-footer\">\n        <p class=\"footer-text\">\n          Уже есть аккаунт?\n          <router-link to=\"/login\" class=\"login-link\">Войти</router-link>\n        </p>\n        </div>\n    </div>\n\n    <div class=\"bg-decoration\">\n      <div class=\"floating-shape shape-1\"></div>\n      <div class=\"floating-shape shape-2\"></div>\n      <div class=\"floating-shape shape-3\"></div>\n    </div>\n\n    <ConfirmationModal\n      :isVisible=\"showSuccessModal\"\n      title=\"Регистрация успешна!\"\n      message=\"Ваш аккаунт был успешно создан. Пожалуйста, проверьте свой Email (и папку 'Спам'!) для подтверждения. Нажмите 'Далее', чтобы перейти к входу.\"\n      confirmButtonText=\"Далее\"\n      :cancelButtonText=\"null\" :showCloseButton=\"false\" @confirm=\"handleSuccessConfirm\"\n      @cancel=\"handleSuccessCancel\" />\n\n    <ConfirmationModal\n      :isVisible=\"showErrorModal\"\n      title=\"Ошибка регистрации\"\n      :message=\"registerErrorMessage\"\n      confirmButtonText=\"ОК\"\n      :cancelButtonText=\"null\"\n      :showCloseButton=\"true\"\n      @confirm=\"closeErrorModal\"\n      @cancel=\"closeErrorModal\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { auth, createUserWithEmailAndPassword, sendEmailVerification, signOut } from '../firebase';\nimport ConfirmationModal from '../components/ConfirmationModal.vue'; // Import the modal component\n\nconst router = useRouter();\n\n// Reactive state\nconst email = ref('');\nconst password = ref('');\nconst confirmPassword = ref('');\nconst showPassword = ref(false);\nconst showConfirmPassword = ref(false);\nconst agreeToTerms = ref(false);\nconst isLoading = ref(false);\nconst errors = ref({});\nconst validFields = ref({});\n\n// Modal specific state\nconst showSuccessModal = ref(false);\nconst showErrorModal = ref(false);\nconst registerErrorMessage = ref(''); // Use a distinct variable for the error modal message\n\n// Computed properties (remain largely the same)\nconst isFormValid = computed(() => {\n  return email.value.trim() !== '' &&\n         password.value.trim() !== '' &&\n         confirmPassword.value.trim() !== '' &&\n         agreeToTerms.value &&\n         !errors.value.email &&\n         !errors.value.password &&\n         !errors.value.confirmPassword;\n});\n\nconst passwordStrength = computed(() => {\n  const pwd = password.value;\n  let strength = 0;\n\n  if (pwd.length >= 8) strength++;\n  if (/[a-z]/.test(pwd)) strength++;\n  if (/[A-Z]/.test(pwd)) strength++;\n  if (/[0-9]/.test(pwd)) strength++;\n  if (/[^A-Za-z0-9]/.test(pwd)) strength++;\n\n  return strength;\n});\n\nconst passwordStrengthClass = computed(() => {\n  if (passwordStrength.value <= 2) return 'weak';\n  if (passwordStrength.value <= 3) return 'medium';\n  return 'strong';\n});\n\nconst passwordStrengthText = computed(() => {\n  if (password.value === '') return '';\n  if (passwordStrength.value <= 2) return 'Слабый пароль';\n  if (passwordStrength.value <= 3) return 'Средний пароль';\n  return 'Сильный пароль';\n});\n\n// Methods (updated for modal interaction)\nconst validateEmail = () => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!email.value) {\n    errors.value.email = 'Email обязателен';\n    validFields.value.email = false;\n  } else if (!emailRegex.test(email.value)) {\n    errors.value.email = 'Неверный формат email';\n    validFields.value.email = false;\n  } else {\n    delete errors.value.email;\n    validFields.value.email = true;\n  }\n};\n\nconst validatePassword = () => {\n  if (!password.value) {\n    errors.value.password = 'Пароль обязателен';\n    validFields.value.password = false;\n  } else if (password.value.length < 6) {\n    errors.value.password = 'Пароль должен быть не менее 6 символов';\n    validFields.value.password = false;\n  } else {\n    delete errors.value.password;\n    validFields.value.password = true;\n  }\n\n  if (confirmPassword.value) {\n    validateConfirmPassword();\n  }\n};\n\nconst validateConfirmPassword = () => {\n  if (!confirmPassword.value) {\n    errors.value.confirmPassword = 'Подтверждение пароля обязательно';\n    validFields.value.confirmPassword = false;\n  } else if (password.value !== confirmPassword.value) {\n    errors.value.confirmPassword = 'Пароли не совпадают';\n    validFields.value.confirmPassword = false;\n  } else {\n    delete errors.value.confirmPassword;\n    validFields.value.confirmPassword = true;\n  }\n};\n\nconst clearError = (field) => {\n  delete errors.value[field];\n  // No longer directly manipulating registerError/successMessage from here\n};\n\n// Modals control methods\nconst openSuccessModal = () => {\n  showSuccessModal.value = true;\n};\n\nconst handleSuccessConfirm = () => {\n  showSuccessModal.value = false;\n  router.push('/login'); // Redirect only when \"Далее\" is clicked\n};\n\nconst handleSuccessCancel = () => {\n  // If the user clicks outside or the 'X' button (if it were visible),\n  // they still just close the modal without redirection.\n  showSuccessModal.value = false;\n};\n\nconst openErrorModal = (message) => {\n  registerErrorMessage.value = message;\n  showErrorModal.value = true;\n};\n\nconst closeErrorModal = () => {\n  showErrorModal.value = false;\n  registerErrorMessage.value = '';\n};\n\n\nconst handleRegister = async () => {\n  // Clear any previous error/success messages\n  registerErrorMessage.value = '';\n  // successMessage.value = ''; // This is now handled by modal visibility\n\n  // Client-side validation before attempting Firebase registration\n  validateEmail();\n  validatePassword();\n  validateConfirmPassword();\n\n  if (!agreeToTerms.value) {\n    // A specific error for terms agreement\n    openErrorModal('Вы должны согласиться с условиями использования.');\n    return; // Stop function execution\n  }\n\n  // Check if there are any validation errors\n  if (Object.keys(errors.value).length > 0) {\n    return; // Stop if client-side validation failed\n  }\n\n  isLoading.value = true;\n\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email.value, password.value);\n    const user = userCredential.user;\n\n    await sendEmailVerification(user);\n    await signOut(auth); // Sign out the user immediately after registration and verification email sent\n\n    // Clear form fields\n    email.value = '';\n    password.value = '';\n    confirmPassword.value = '';\n    agreeToTerms.value = false;\n    errors.value = {};\n    validFields.value = {};\n\n    // Show the success modal instead of direct message and timeout redirect\n    openSuccessModal();\n\n  } catch (error) {\n    console.error('Registration error:', error.code, error.message);\n    let message = '';\n    switch (error.code) {\n      case 'auth/email-already-in-use':\n        message = 'Этот Email уже зарегистрирован. Пожалуйста, войдите или восстановите пароль.';\n        break;\n      case 'auth/invalid-email':\n        message = 'Неверный формат Email. Проверьте правильность ввода.';\n        break;\n      case 'auth/weak-password':\n        message = 'Пароль слишком слабый. Используйте не менее 6 символов.'; // Removed specific requirements as they are in validatePassword\n        break;\n      case 'auth/network-request-failed':\n        message = 'Ошибка сети. Проверьте ваше интернет-соединение.';\n        break;\n      default:\n        message = 'Произошла ошибка при регистрации. Пожалуйста, попробуйте снова. ' + error.message;\n        break;\n    }\n    openErrorModal(message); // Show the error modal\n  } finally {\n    isLoading.value = false;\n  }\n};\n</script>\n\n<style scoped>\n/* All your existing styles here. No changes needed to the CSS. */\n.register-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n}\n\n.register-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 500px;\n  position: relative;\n  z-index: 2;\n  animation: slideInUp 0.8s ease-out;\n}\n\n.register-header {\n  text-align: center;\n  margin-bottom: 2rem;\n  animation: fadeInDown 0.8s ease-out 0.2s both;\n}\n\n.register-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.register-title {\n  color: #333;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n}\n\n.register-subtitle {\n  color: #666;\n  font-size: 1rem;\n  margin: 0;\n}\n\n.register-form {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-label {\n  display: block;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 1rem 3rem 1rem 1rem;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: white;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  transform: translateY(-2px);\n}\n\n.form-input.error {\n  border-color: #f44336;\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.form-input.success {\n  border-color: #4caf50;\n  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);\n}\n\n.input-icon {\n  position: absolute;\n  right: 1rem;\n  font-size: 1.2rem;\n  pointer-events: none;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 1rem;\n  background: none;\n  border: none;\n  font-size: 1.2rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n}\n\n.password-toggle:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.password-strength {\n  margin-top: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.strength-bar {\n  flex: 1;\n  height: 4px;\n  background-color: #e1e5e9;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.strength-fill {\n  height: 100%;\n  transition: all 0.3s ease;\n  border-radius: 2px;\n}\n\n.strength-fill.weak {\n  width: 33%;\n  background-color: #f44336;\n}\n\n.strength-fill.medium {\n  width: 66%;\n  background-color: #ff9800;\n}\n\n.strength-fill.strong {\n  width: 100%;\n  background-color: #4caf50;\n}\n\n.strength-text {\n  font-size: 0.8rem;\n  font-weight: 500;\n  min-width: 100px;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 0.85rem;\n  margin: 0.5rem 0 0 0;\n  font-weight: 500;\n}\n\n.form-options {\n  margin-bottom: 2rem;\n}\n\n.checkbox-wrapper {\n  display: flex;\n  align-items: flex-start;\n  cursor: pointer;\n  user-select: none;\n  gap: 0.5rem;\n}\n\n.checkbox {\n  display: none;\n}\n\n.checkmark {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #ddd;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.checkbox:checked + .checkmark {\n  background-color: #667eea;\n  border-color: #667eea;\n}\n\n.checkbox:checked + .checkmark::after {\n  content: '✓';\n  color: white;\n  font-weight: bold;\n  font-size: 0.8rem;\n}\n\n.checkbox-text {\n  color: #666;\n  font-size: 0.9rem;\n  line-height: 1.4;\n}\n\n.terms-link {\n  color: #667eea;\n  text-decoration: none;\n  transition: color 0.3s ease;\n}\n\n.terms-link:hover {\n  color: #5a6fd8;\n  text-decoration: underline;\n}\n\n.register-button {\n  width: 100%;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.register-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);\n}\n\n.register-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.register-button:hover .button-icon {\n  transform: scale(1.2);\n}\n\n.loading-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 20px;\n  min-height: 20px;\n}\n\n.register-footer {\n  text-align: center;\n  margin-top: 2rem;\n  animation: fadeInUp 0.8s ease-out 0.6s both;\n}\n\n.footer-text {\n  color: #666;\n  margin: 0;\n}\n\n.login-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: color 0.3s ease;\n}\n\n.login-link:hover {\n  color: #5a6fd8;\n}\n\n/* Background decoration */\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.floating-shape {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  animation: float 6s ease-in-out infinite;\n}\n\n.shape-1 {\n  width: 100px;\n  height: 100px;\n  top: 20%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.shape-2 {\n  width: 150px;\n  height: 150px;\n  top: 60%;\n  right: 10%;\n  animation-delay: 2s;\n}\n\n.shape-3 {\n  width: 80px;\n  height: 80px;\n  bottom: 20%;\n  left: 20%;\n  animation-delay: 4s;\n}\n\n/* Animations */\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    transform: translate3d(0, -10px, 0);\n  }\n  70% {\n    transform: translate3d(0, -5px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-20px);\n  }\n}\n\n/* Transition animations */\n.error-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.error-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.error-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.error-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.register-footer .error-message.text-center {\n  text-align: center;\n  margin-top: 1rem;\n  color: #f44336;\n}\n\n/* Стили для сообщения об успехе и кнопки повторной отправки (these are no longer used for direct display) */\n.success-message {\n  color: #4caf50;\n  font-size: 0.95rem;\n  margin-top: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.8rem;\n  animation: fadeIn 0.4s ease-out;\n}\n\n.resend-email-button {\n  background-color: #667eea;\n  color: white;\n  border: none;\n  padding: 0.7rem 1.2rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);\n}\n\n.resend-email-button:hover {\n  background-color: #5a6fd8;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(102, 126, 234, 0.3);\n}\n\n.resend-email-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n  opacity: 0.7;\n  transform: none;\n  box-shadow: none;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .register-container {\n    padding: 1rem;\n  }\n\n  .register-card {\n    padding: 2rem;\n  }\n\n  .register-title {\n    font-size: 1.5rem;\n  }\n\n  .checkbox-wrapper {\n    align-items: flex-start;\n  }\n  .success-message {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n  }\n  .resend-email-button {\n    font-size: 0.85rem;\n    padding: 0.6rem 1rem;\n  }\n}\n</style>","import script from \"./RegisterView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RegisterView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RegisterView.vue?vue&type=style&index=0&id=98bc6f6e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-98bc6f6e\"]])\n\nexport default __exports__","<template>\n  <div class=\"reset-password-container\">\n    <div class=\"reset-password-card\">\n      <div class=\"reset-password-header\">\n        <div class=\"reset-password-icon\">🔐</div>\n        <h1 class=\"reset-password-title\">Сброс пароля</h1>\n        <p class=\"reset-password-subtitle\">Введите ваш email, и мы отправим вам ссылку для сброса пароля.</p>\n      </div>\n\n      <form @submit.prevent=\"handleResetPassword\" class=\"reset-password-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\">Email</label>\n          <div class=\"input-wrapper\">\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'error': errors.email }\"\n              placeholder=\"example@email.com\"\n              @blur=\"validateEmail\"\n              @input=\"clearError('email')\"\n              :disabled=\"isLoading\"\n              required\n            />\n            <span class=\"input-icon\">📧</span>\n          </div>\n          <transition name=\"error\">\n            <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n          </transition>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"reset-button\"\n          :class=\"{ 'loading': isLoading }\"\n          :disabled=\"isLoading || !isFormValid\"\n        >\n          <span v-if=\"!isLoading\" class=\"button-content\">\n            <span class=\"button-text\">Отправить ссылку</span>\n            <span class=\"button-icon\">📤</span>\n          </span>\n          <span v-else class=\"loading-spinner\"></span>\n        </button>\n      </form>\n\n      <div class=\"reset-password-footer\">\n        <transition name=\"message\">\n          <div v-if=\"message\" :class=\"{ 'success-message': isSuccess, 'error-message': !isSuccess }\">\n            {{ message }}\n          </div>\n        </transition>\n        \n        <div class=\"back-to-login\">\n          <router-link to=\"/login\" class=\"back-link\">\n            <span class=\"back-icon\">←</span>\n            Вернуться ко входу\n          </router-link>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bg-decoration\">\n      <div class=\"floating-shape shape-1\"></div>\n      <div class=\"floating-shape shape-2\"></div>\n      <div class=\"floating-shape shape-3\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { auth, sendPasswordResetEmail } from \"../firebase\";\n\nexport default {\n  name: 'ResetPasswordView',\n  data() {\n    return {\n      email: '',\n      isLoading: false,\n      message: '',\n      isSuccess: false,\n      errors: {}\n    };\n  },\n  computed: {\n    isFormValid() {\n      return this.email.trim() !== '' && !this.errors.email;\n    }\n  },\n  methods: {\n    validateEmail() {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!this.email) {\n        this.errors.email = 'Email обязателен';\n      } else if (!emailRegex.test(this.email)) {\n        this.errors.email = 'Неверный формат email';\n      } else {\n        delete this.errors.email;\n      }\n    },\n    \n    clearError(field) {\n      delete this.errors[field];\n      this.message = '';\n      this.isSuccess = false;\n    },\n\n    async handleResetPassword() {\n      this.validateEmail();\n      \n      if (!this.isFormValid) {\n        return;\n      }\n\n      this.isLoading = true;\n      this.message = '';\n      this.isSuccess = false;\n\n      try {\n        await sendPasswordResetEmail(auth, this.email);\n        this.message = 'Ссылка для сброса пароля отправлена на ваш email. Проверьте папку \"Спам\", если не видите письма. Убедитесь что ваш аккаунт зарегестрирован.';\n        this.isSuccess = true;\n        this.email = '';\n      } catch (error) {\n        console.error(\"Ошибка сброса пароля:\", error.code, error.message);\n        this.isSuccess = false;\n        switch (error.code) {\n          case 'auth/invalid-email':\n            this.message = 'Неверный формат email.';\n            break;\n          case 'auth/user-not-found':\n            this.message = 'Пользователь с таким email не найден.';\n            break;\n          case 'auth/too-many-requests':\n            this.message = 'Слишком много запросов. Попробуйте позже.';\n            break;\n          case 'auth/network-request-failed':\n            this.message = 'Ошибка сети. Проверьте ваше интернет-соединение.';\n            break;\n          default:\n            this.message = 'Произошла ошибка при отправке ссылки. Попробуйте снова.';\n            break;\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.reset-password-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.reset-password-card {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  padding: 3rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 450px;\n  position: relative;\n  z-index: 2;\n  animation: slideInUp 0.8s ease-out;\n}\n\n.reset-password-header {\n  text-align: center;\n  margin-bottom: 2rem;\n  animation: fadeInDown 0.8s ease-out 0.2s both;\n}\n\n.reset-password-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.reset-password-title {\n  color: #333;\n  font-size: 2rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n}\n\n.reset-password-subtitle {\n  color: #666;\n  font-size: 1rem;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.reset-password-form {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-label {\n  display: block;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 1rem 3rem 1rem 1rem;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: white;\n  box-sizing: border-box;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  transform: translateY(-2px);\n}\n\n.form-input.error {\n  border-color: #f44336;\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.form-input:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n\n.input-icon {\n  position: absolute;\n  right: 1rem;\n  font-size: 1.2rem;\n  pointer-events: none;\n}\n\n.error-message {\n  color: #f44336;\n  font-size: 0.85rem;\n  margin: 0.5rem 0 0 0;\n  font-weight: 500;\n}\n\n.reset-button {\n  width: 100%;\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 2rem;\n}\n\n.reset-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);\n}\n\n.reset-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.button-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.reset-button:hover .button-icon {\n  transform: scale(1.2);\n}\n\n.loading-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  flex-shrink: 0;\n  flex-grow: 0;\n  min-width: 20px;\n  min-height: 20px;\n}\n\n.reset-password-footer {\n  text-align: center;\n  animation: fadeInUp 0.8s ease-out 0.6s both;\n}\n\n.success-message {\n  color: #4caf50;\n  font-size: 0.95rem;\n  margin-bottom: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  animation: fadeIn 0.4s ease-out;\n}\n\n.error-message:not(.form-group .error-message) {\n  color: #f44336;\n  font-size: 0.95rem;\n  margin-bottom: 1.5rem;\n  font-weight: 500;\n  line-height: 1.5;\n  background-color: rgba(244, 67, 54, 0.1);\n  padding: 1rem;\n  border-radius: 10px;\n  border: 1px solid rgba(244, 67, 54, 0.2);\n  animation: fadeIn 0.4s ease-out;\n}\n\n.back-to-login {\n  margin-top: 1.5rem;\n}\n\n.back-link {\n  color: #667eea;\n  text-decoration: none;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.back-link:hover {\n  color: #5a6fd8;\n  transform: translateX(-2px);\n}\n\n.back-icon {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.back-link:hover .back-icon {\n  transform: translateX(-2px);\n}\n\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.floating-shape {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  animation: float 6s ease-in-out infinite;\n}\n\n.shape-1 {\n  width: 100px;\n  height: 100px;\n  top: 20%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.shape-2 {\n  width: 150px;\n  height: 150px;\n  top: 60%;\n  right: 10%;\n  animation-delay: 2s;\n}\n\n.shape-3 {\n  width: 80px;\n  height: 80px;\n  bottom: 20%;\n  left: 20%;\n  animation-delay: 4s;\n}\n\n/* Animations */\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(50px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    transform: translate3d(0, -10px, 0);\n  }\n  70% {\n    transform: translate3d(0, -5px, 0);\n  }\n  90% {\n    transform: translate3d(0,-2px,0);\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-20px);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Transitions */\n.error-enter-active {\n  transition: all 0.3s ease-out;\n}\n\n.error-leave-active {\n  transition: all 0.3s ease-in;\n}\n\n.error-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.error-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.message-enter-active {\n  transition: all 0.4s ease-out;\n}\n\n.message-leave-active {\n  transition: all 0.4s ease-in;\n}\n\n.message-enter-from {\n  opacity: 0;\n  transform: translateY(10px);\n}\n\n.message-leave-to {\n  opacity: 0;\n  transform: translateY(10px);\n}\n\n/* Mobile responsiveness */\n@media (max-width: 768px) {\n  .reset-password-container {\n    padding: 1rem;\n  }\n\n  .reset-password-card {\n    padding: 2rem;\n  }\n\n  .reset-password-title {\n    font-size: 1.5rem;\n  }\n\n  .reset-password-subtitle {\n    font-size: 0.9rem;\n  }\n\n  .success-message,\n  .error-message:not(.form-group .error-message) {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n  }\n}\n</style>\n","import { render } from \"./ResetPasswordView.vue?vue&type=template&id=aaeea976&scoped=true\"\nimport script from \"./ResetPasswordView.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPasswordView.vue?vue&type=script&lang=js\"\n\nimport \"./ResetPasswordView.vue?vue&type=style&index=0&id=aaeea976&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-aaeea976\"]])\n\nexport default __exports__","<template>\n  <div class=\"task-container\">\n    <div class=\"header\">\n      <h1 class=\"title\">{{ msg }}</h1>\n      <div class=\"stats\">\n        <div class=\"stat-item\">\n          <span class=\"stat-number\">{{ completedTasks.length }}</span>\n          <span class=\"stat-label\">Выполнено</span>\n        </div>\n        <div class=\"stat-item\">\n          <span class=\"stat-number\">{{ pendingTasks.length }}</span>\n          <span class=\"stat-label\">Осталось</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"sync-section\">\n      <div class=\"sync-controls\">\n        <button\n          @click=\"refreshTasks\"\n          class=\"refresh-button\"\n          :disabled=\"isRefreshing\"\n          :class=\"{ 'refreshing': isRefreshing }\"\n        >\n          <span class=\"refresh-icon\" :class=\"{ 'spinning': isRefreshing }\">🔄</span>\n          <span class=\"button-text\">\n            {{ isRefreshing ? 'Обновление...' : 'Обновить' }}\n          </span>\n        </button>\n\n        <div class=\"auto-sync-toggle\">\n          <button\n            @click=\"toggleAutoSync\"\n            class=\"sync-toggle-button\"\n            :class=\"{ 'active': autoSyncEnabled }\"\n          >\n            <span class=\"sync-icon\">{{ autoSyncEnabled ? '🔒' : '🔓' }}</span>\n            <span class=\"button-text\">\n              {{ autoSyncEnabled ? 'Авто-синх ВКЛ' : 'Авто-синх ВЫКЛ' }}\n            </span>\n          </button>\n          <div v-if=\"autoSyncEnabled\" class=\"sync-status\">\n            <span class=\"sync-indicator\" :class=\"{ 'active': syncIndicator }\"></span>\n            <span class=\"next-sync-text\">\n              Следующее обновление: {{ nextSyncCountdown }}с\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"last-updated\" v-if=\"lastUpdated\">\n        <span class=\"update-text\">\n          Последнее обновление: {{ formatLastUpdated() }}\n        </span>\n      </div>\n    </div>\n\n    <div class=\"input-section\">\n      <div class=\"input-group\">\n        <input\n          v-model=\"newTask\"\n          placeholder=\"Новая задача\"\n          class=\"task-input\"\n          @keyup.enter=\"addTask\"\n          :class=\"{ 'shake': inputError }\"\n          :disabled=\"isAddingTask\"\n        />\n        <select\n          v-model=\"newTaskDifficulty\"\n          class=\"difficulty-select\"\n          :disabled=\"isAddingTask\"\n        >\n          <option value=\"easy\">Легко</option>\n          <option value=\"normal\">Нормально</option>\n          <option value=\"hard\">Сложно</option>\n        </select>\n        <button\n          @click=\"addTask\"\n          class=\"add-button\"\n          :disabled=\"!newTask.trim() || isAddingTask\"\n        >\n          <span v-if=\"!isAddingTask\" class=\"button-content\">\n            <span class=\"button-text\">Добавить</span>\n            <span class=\"button-icon\">+</span>\n          </span>\n          <span v-else class=\"loading-content\">\n            <span class=\"spinner\"></span>\n            <span class=\"button-text\">Добавление...</span>\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"filter-section\">\n      <div class=\"filter-buttons\">\n        <button\n          @click=\"currentFilter = 'all'\"\n          :class=\"{ active: currentFilter === 'all' }\"\n          class=\"filter-btn\"\n        >\n          Все ({{ tasks.length }})\n        </button>\n        <button\n          @click=\"currentFilter = 'pending'\"\n          :class=\"{ active: currentFilter === 'pending' }\"\n          class=\"filter-btn\"\n        >\n          Активные ({{ pendingTasks.length }})\n        </button>\n        <button\n          @click=\"currentFilter = 'completed'\"\n          :class=\"{ active: currentFilter === 'completed' }\"\n          class=\"filter-btn\"\n        >\n          Выполненные ({{ completedTasks.length }})\n        </button>\n      </div>\n    </div>\n\n    <div class=\"tasks-section\">\n      <transition-group name=\"task-list\" tag=\"ul\" class=\"task-list\">\n        <li\n          v-for=\"task in filteredTasks\"\n          :key=\"task.id\"\n          class=\"task-item\"\n          :class=\"{\n            'deleting': task.deleting,\n            'completed': task.completed,\n            'updating': task.updating\n          }\"\n        >\n          <div class=\"task-content\">\n            <div class=\"task-left\">\n              <button\n                @click=\"toggleTask(task.id)\"\n                class=\"checkbox-button\"\n                :disabled=\"task.updating\"\n              >\n                <span class=\"checkbox\" :class=\"{ checked: task.completed }\">\n                  <span v-if=\"task.completed\" class=\"checkmark\">✓</span>\n                </span>\n              </button>\n              <div class=\"task-info\">\n                <span class=\"task-text\" :class=\"{ completed: task.completed }\">\n                  {{ task.text }}\n                </span>\n                <div class=\"task-meta\">\n                  <span class=\"difficulty-badge\" :class=\"task.difficulty\">\n                    {{ getDifficultyLabel(task.difficulty) }}\n                  </span>\n                  <span class=\"task-date\">\n                    {{ formatDate(task.createdAt) }}\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div class=\"task-actions\">\n              <span v-if=\"task.updating\" class=\"updating-spinner\"></span>\n              <button\n                @click=\"deleteTask(task.id)\"\n                class=\"delete-button\"\n                :disabled=\"task.deleting || task.updating\"\n              >\n                <span class=\"delete-icon\">×</span>\n              </button>\n            </div>\n          </div>\n        </li>\n      </transition-group>\n\n      <div v-if=\"filteredTasks.length === 0\" class=\"empty-state\">\n        <div class=\"empty-icon\">\n          {{ currentFilter === 'completed' ? '🎉' : currentFilter === 'pending' ? '📝' : '📋' }}\n        </div>\n        <p class=\"empty-text\">\n          {{ getEmptyStateText() }}\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { db, auth } from '../firebase';\nimport {\n  collection,\n  addDoc,\n  getDocs,\n  deleteDoc,\n  doc,\n  updateDoc,\n  query,\n  where,\n  orderBy,\n  getDoc,\n  setDoc\n} from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\n\n// --- Props ---\nconst props = defineProps({\n  msg: {\n    type: String,\n    default: \"Менеджер задач\"\n  }\n});\n\n// --- Reactive State ---\nconst newTask = ref('');\nconst newTaskDifficulty = ref('normal');\nconst tasks = ref([]);\nconst inputError = ref(false);\nconst isAddingTask = ref(false);\nconst currentFilter = ref('all');\nconst user = ref(null); // This will hold the Firebase user object\n\n// Sync and Refresh state\nconst isRefreshing = ref(false);\nconst autoSyncEnabled = ref(true); // Default to true, will be overwritten by preference\nconst syncIndicator = ref(false);\nconst lastUpdated = ref(null);\nconst nextSyncCountdown = ref(0);\nconst currentTime = ref(Date.now()); // New reactive variable for current time\n\n// Intervals for polling and countdown\nlet autoSyncIntervalId = null;\nlet countdownIntervalId = null;\nlet updateCurrentTimeIntervalId = null; // New interval for current time\n\nconst SYNC_INTERVAL = 10000; // 10 seconds for polling\n\n// --- Computed Properties ---\nconst completedTasks = computed(() => {\n  return tasks.value.filter(task => task.completed);\n});\n\nconst pendingTasks = computed(() => {\n  return tasks.value.filter(task => !task.completed);\n});\n\nconst filteredTasks = computed(() => {\n  switch (currentFilter.value) {\n    case 'completed':\n      return completedTasks.value;\n    case 'pending':\n      return pendingTasks.value;\n    default:\n      // Sort tasks by creation date (newest first) for consistency\n      return [...tasks.value].sort((a, b) => {\n        // Ensure both a.createdAt and b.createdAt are valid Date objects or Firebase Timestamps\n        const dateA = a.createdAt?.toDate ? a.createdAt.toDate() : new Date(a.createdAt);\n        const dateB = b.createdAt?.toDate ? b.createdAt.toDate() : new Date(b.createdAt);\n        return dateB.getTime() - dateA.getTime();\n      });\n  }\n});\n\n// --- Methods ---\n\n/**\n * Loads user preferences from Firestore.\n */\nconst loadUserPreferences = async (userId) => {\n  // Added check: Ensure userId is not null or undefined before proceeding\n  if (!userId) {\n    console.log(\"No userId provided to loadUserPreferences. Skipping preference load.\");\n    return;\n  }\n\n  try {\n    const docRef = doc(db, \"userPreferences\", userId);\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      const preferences = docSnap.data();\n      if (typeof preferences.autoSyncEnabled === 'boolean') {\n        autoSyncEnabled.value = preferences.autoSyncEnabled;\n        console.log(\"Loaded autoSyncEnabled from Firestore:\", preferences.autoSyncEnabled);\n      }\n    } else {\n      console.log(\"No user preferences found for this user. Will use default autoSyncEnabled: true.\");\n    }\n  } catch (e) {\n    console.error(\"Error loading user preferences:\", e);\n  }\n};\n\n/**\n * Saves a single user preference to Firestore.\n */\nconst saveUserPreference = async (key, value) => {\n  // Added check: Ensure user.value is not null before accessing uid\n  if (!user.value || !user.value.uid) {\n    console.error(\"Cannot save user preference: User not authenticated or UID unavailable.\");\n    return;\n  }\n\n  try {\n    const docRef = doc(db, \"userPreferences\", user.value.uid);\n    await setDoc(docRef, { [key]: value }, { merge: true });\n    console.log(`User preference '${key}' saved as '${value}' to Firestore.`);\n  } catch (e) {\n    console.error(`Error saving user preference '${key}':`, e);\n  }\n};\n\n\n/**\n * Loads tasks from Firestore. This method performs a single fetch.\n * It's used for initial load, manual refresh, and by the auto-sync polling.\n */\nconst loadTasks = async (userId) => {\n  // Added check: Ensure userId is not null or undefined before proceeding\n  if (!userId) {\n    tasks.value = []; // Clear tasks if no UID is provided (user logged out)\n    console.log(\"Cannot load tasks: No user ID provided (user logged out or not initialized).\");\n    return;\n  }\n\n  isRefreshing.value = true;\n  syncIndicator.value = true;\n\n  try {\n    const q = query(collection(db, \"tasks\"), where(\"userId\", \"==\", userId), orderBy(\"createdAt\", \"desc\"));\n    const querySnapshot = await getDocs(q);\n\n    tasks.value = querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      deleting: false, // Local state for deletion animation\n      updating: false, // Local state for update animation\n      completed: doc.data().completed ?? false,\n      difficulty: doc.data().difficulty ?? \"normal\",\n      createdAt: doc.data().createdAt, // Firebase Timestamp object\n      text: doc.data().text\n    }));\n\n    lastUpdated.value = new Date();\n  } catch (e) {\n    console.error(\"Error loading tasks:\", e);\n  } finally {\n    // Briefly show sync indicator and then reset refreshing state\n    setTimeout(() => {\n      syncIndicator.value = false;\n      isRefreshing.value = false;\n    }, 500); // Simulate network delay for a smoother UX\n  }\n};\n\n/**\n * Initiates a manual refresh of tasks.\n * Resets the auto-sync timer if auto-sync is enabled.\n */\nconst refreshTasks = async () => {\n  // Added check: Ensure user.value is not null before proceeding\n  if (!user.value || !user.value.uid || isRefreshing.value) {\n    console.log(\"Refresh aborted: User not authenticated or already refreshing.\");\n    return;\n  }\n\n  // Manual refresh should reset the auto-sync timer\n  if (autoSyncEnabled.value) {\n    stopAutoSync(); // Stop current intervals\n    await loadTasks(user.value.uid); // Perform refresh\n    startAutoSync(); // Restart intervals\n  } else {\n    await loadTasks(user.value.uid); // Just perform refresh if auto-sync is off\n  }\n};\n\n/**\n * Toggles the auto-sync feature.\n */\nconst toggleAutoSync = () => {\n  autoSyncEnabled.value = !autoSyncEnabled.value;\n  saveUserPreference('autoSyncEnabled', autoSyncEnabled.value); // Save preference to Firestore\n\n  if (autoSyncEnabled.value) {\n    startAutoSync();\n  } else {\n    stopAutoSync();\n  }\n};\n\n/**\n * Starts the auto-sync by setting up the polling interval and countdown timer.\n */\nconst startAutoSync = () => {\n  // Added check: Ensure user.value is not null before proceeding\n  if (!user.value || !user.value.uid) {\n    console.log(\"Cannot start auto-sync: User not authenticated or UID unavailable.\");\n    return;\n  }\n\n  // Clear any existing intervals to prevent duplicates\n  stopAutoSync();\n\n  // Initial load when auto-sync starts\n  loadTasks(user.value.uid);\n\n  // Start the main polling interval\n  autoSyncIntervalId = setInterval(async () => {\n    console.log('Auto-sync: Refreshing tasks...');\n    // Added check here for robustness within the interval\n    if (user.value && user.value.uid) {\n      await loadTasks(user.value.uid); // Fetch tasks from DB\n      nextSyncCountdown.value = SYNC_INTERVAL / 1000; // Reset countdown after refresh\n    } else {\n      console.log(\"Auto-sync interval detected user logged out. Stopping auto-sync.\");\n      stopAutoSync();\n    }\n  }, SYNC_INTERVAL);\n\n  // Start the countdown timer for display\n  nextSyncCountdown.value = SYNC_INTERVAL / 1000; // Set initial countdown value\n  countdownIntervalId = setInterval(() => {\n    if (nextSyncCountdown.value > 0) {\n      nextSyncCountdown.value--;\n    } else {\n      // The main polling interval will handle the reset, so no need for explicit action here.\n    }\n  }, 1000);\n\n  console.log(\"Auto-sync enabled (polling every 10 seconds).\");\n};\n\n/**\n * Stops the auto-sync by clearing all intervals.\n */\nconst stopAutoSync = () => {\n  if (autoSyncIntervalId) {\n    clearInterval(autoSyncIntervalId);\n    autoSyncIntervalId = null;\n  }\n  if (countdownIntervalId) {\n    clearInterval(countdownIntervalId);\n    countdownIntervalId = null;\n  }\n  nextSyncCountdown.value = 0; // Reset countdown display\n  console.log(\"Auto-sync disabled.\");\n};\n\n\nconst addTask = async () => {\n  if (!newTask.value.trim()) {\n    inputError.value = true;\n    setTimeout(() => {\n      inputError.value = false;\n    }, 500);\n    return;\n  }\n  // Added check: Ensure user.value is not null before accessing uid\n  if (!user.value || !user.value.uid) {\n    console.error(\"User not authenticated to add task.\");\n    return;\n  }\n\n  isAddingTask.value = true;\n\n  try {\n    // Simulate network delay for demo purposes\n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const taskData = {\n      text: newTask.value.trim(),\n      completed: false,\n      difficulty: newTaskDifficulty.value,\n      createdAt: new Date(), // Firebase will convert this to a Timestamp\n      userId: user.value.uid // Attach user ID to the task\n    };\n\n    const docRef = await addDoc(collection(db, \"tasks\"), taskData);\n\n    // Optimistically add the task to the local array\n    tasks.value.unshift({ // Use unshift to add to the beginning, mirroring orderBy('desc')\n      id: docRef.id,\n      deleting: false,\n      updating: false,\n      ...taskData // Spread all data including text, completed, difficulty, createdAt\n    });\n\n    newTask.value = \"\";\n    newTaskDifficulty.value = \"normal\";\n  } catch (e) {\n    console.error(\"Error adding task:\", e);\n  } finally {\n    isAddingTask.value = false;\n  }\n};\n\nconst toggleTask = async (id) => {\n  const task = tasks.value.find(t => t.id === id);\n  // Added check: Ensure user.value is not null before proceeding\n  if (!task || !user.value || !user.value.uid) {\n    console.error(\"Cannot toggle task: Task not found or user not authenticated.\");\n    return;\n  }\n\n  const originalCompleted = task.completed;\n  task.updating = true;\n  // Optimistically update the UI\n  task.completed = !task.completed;\n\n  try {\n    await new Promise(resolve => setTimeout(resolve, 300));\n\n    await updateDoc(doc(db, \"tasks\", id), {\n      completed: task.completed // Use the new toggled state\n    });\n\n    // If successful, no need to do anything, UI is already updated\n  } catch (e) {\n    console.error(\"Error updating task:\", e);\n    // Revert UI if update fails\n    task.completed = originalCompleted;\n  } finally {\n    task.updating = false;\n  }\n};\n\nconst deleteTask = async (id) => {\n  const taskIndex = tasks.value.findIndex(t => t.id === id);\n  // Added check: Ensure user.value is not null before proceeding\n  if (taskIndex === -1 || !user.value || !user.value.uid) {\n    console.error(\"Cannot delete task: Task not found or user not authenticated.\");\n    return;\n  }\n\n  const taskToDelete = tasks.value[taskIndex];\n  taskToDelete.deleting = true; // Set local state for animation\n\n  try {\n    // A small delay before actual deletion for the animation to be visible\n    await new Promise(resolve => setTimeout(resolve, 300));\n    await deleteDoc(doc(db, \"tasks\", id));\n\n    // Remove from local array after successful deletion from Firestore\n    tasks.value = tasks.value.filter(t => t.id !== id);\n\n  } catch (e) {\n    console.error(\"Error deleting task:\", e);\n    // If deletion fails, revert the deleting state\n    if (taskToDelete) {\n      taskToDelete.deleting = false;\n    }\n  }\n};\n\nconst getDifficultyLabel = (difficulty) => {\n  const labels = {\n    easy: \"Легко\",\n    normal: \"Нормально\",\n    hard: \"Сложно\"\n  };\n  return labels[difficulty] || labels.normal;\n};\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"\";\n  let date;\n  // Firebase Timestamp objects have a .toDate() method\n  if (timestamp.toDate && typeof timestamp.toDate === 'function') {\n    date = timestamp.toDate();\n  } else if (timestamp instanceof Date) {\n    date = timestamp;\n  } else {\n    // Fallback for other formats (e.g., string or number representing date)\n    date = new Date(timestamp);\n  }\n\n  if (isNaN(date.getTime())) { // Check if date is valid\n    return \"Неверная дата\";\n  }\n\n  return date.toLocaleDateString('ru-RU', {\n    day: '2-digit',\n    month: '2-digit',\n    year: '2-digit'\n  });\n};\n\nconst formatLastUpdated = () => {\n  if (!lastUpdated.value) return '';\n\n  const now = new Date(currentTime.value); // Use currentTime for dynamic updates\n  const diffSeconds = Math.floor((now.getTime() - lastUpdated.value.getTime()) / 1000); // Difference in seconds\n\n  if (diffSeconds < 60) {\n    if (diffSeconds <= 5) { // 'только что' for very recent updates\n      return 'только что';\n    } else {\n      return `${diffSeconds} сек. назад`;\n    }\n  } else if (diffSeconds < 3600) { // Less than an hour, show in minutes\n    const minutes = Math.floor(diffSeconds / 60);\n    return `${minutes} мин. назад`;\n  } else if (diffSeconds < 86400) { // Less than a day, show in hours\n    const hours = Math.floor(diffSeconds / 3600);\n    return `${hours} час. назад`;\n  } else {\n    // If more than a day, show the formatted date\n    return lastUpdated.value.toLocaleDateString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric' // Changed to numeric year for clarity on older dates\n    });\n  }\n};\n\nconst getEmptyStateText = () => {\n  switch (currentFilter.value) {\n    case 'completed':\n      return 'Нет выполненных задач';\n    case 'pending':\n      return 'Нет активных задач. Отличная работа!';\n    default:\n      return 'Пока нет задач. Добавьте первую!';\n  }\n};\n\n// --- Lifecycle Hooks ---\n\nonMounted(() => {\n  // Start updating currentTime every second for the \"Последнее обновление\" text\n  updateCurrentTimeIntervalId = setInterval(() => {\n    currentTime.value = Date.now();\n  }, 1000);\n\n  // Subscribe to authentication state changes when the component is mounted.\n  onAuthStateChanged(auth, async (currentUser) => {\n    user.value = currentUser; // Update the reactive user object\n\n    if (currentUser) {\n      console.log(\"MainPage: User logged in, UID:\", currentUser.uid);\n      // Ensure currentUser is passed directly to functions that need it\n      await loadUserPreferences(currentUser.uid);\n\n      if (autoSyncEnabled.value) {\n        startAutoSync(); // startAutoSync internally checks user.value\n      } else {\n        await loadTasks(currentUser.uid); // loadTasks internally checks userId\n      }\n    } else {\n      console.log(\"MainPage: User logged out or not authenticated.\");\n      // If user logs out, clear tasks and stop auto-sync\n      tasks.value = [];\n      stopAutoSync();\n    }\n  });\n});\n\nonUnmounted(() => {\n  stopAutoSync(); // Ensure all polling/countdown intervals are cleared\n  if (updateCurrentTimeIntervalId) {\n    clearInterval(updateCurrentTimeIntervalId);\n    updateCurrentTimeIntervalId = null;\n  }\n});\n</script>\n\n<style scoped>\n/* Your existing styles remain unchanged for most elements. */\n.task-container {\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 2rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: calc(100vh - 70px);\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  box-sizing: border-box;\n  border-radius: 15px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n}\n\n.header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.title {\n  color: white;\n  font-size: 2.5rem;\n  font-weight: 700;\n  margin: 0 0 1rem 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  animation: fadeInDown 0.8s ease-out;\n}\n\n.stats {\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  margin-top: 1rem;\n}\n\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: white;\n  background: rgba(255, 255, 255, 0.1);\n  padding: 1rem;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.stat-number {\n  font-size: 1.8rem;\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n}\n\n.stat-label {\n  font-size: 0.9rem;\n  opacity: 0.8;\n}\n\n/* --- New styles for sync section --- */\n.sync-section {\n  margin-bottom: 1.5rem;\n  animation: fadeInUp 0.8s ease-out 0.1s both;\n}\n\n.sync-controls {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 1rem;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  margin-bottom: 0.5rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.refresh-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: linear-gradient(45deg, #2196F3, #1976D2);\n  color: white;\n  border: none;\n  padding: 0.8rem 1.2rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  min-width: 120px;\n  justify-content: center;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n\n.refresh-button:hover:not(:disabled) {\n  background: linear-gradient(45deg, #1976D2, #2196F3);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 10px rgba(33, 150, 243, 0.4);\n}\n\n.refresh-button:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  background: #90CAF9;\n  box-shadow: none;\n}\n\n.refresh-button.refreshing {\n  background: linear-gradient(45deg, #FFB300, #F57C00);\n  color: #fff;\n}\n\n.refresh-icon {\n  font-size: 1.1rem;\n  transition: transform 0.3s ease;\n}\n\n.refresh-icon.spinning {\n  animation: spin 1s linear infinite;\n}\n\n.auto-sync-toggle {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n}\n\n.sync-toggle-button {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  padding: 0.8rem 1.2rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n  min-width: 160px;\n  justify-content: center;\n}\n\n.sync-toggle-button.active {\n  background: linear-gradient(45deg, #4CAF50, #45a049);\n  border-color: #4CAF50;\n  box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);\n}\n\n.sync-toggle-button:hover:not(.active) {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.sync-toggle-button.active:hover {\n  background: linear-gradient(45deg, #45a049, #4CAF50);\n  box-shadow: 0 4px 10px rgba(76, 175, 80, 0.4);\n}\n\n.sync-icon {\n  font-size: 1.1rem;\n}\n\n.sync-status {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: white;\n  font-size: 0.8rem;\n  margin-left: 0.5rem;\n}\n\n.sync-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.5);\n  transition: all 0.3s ease;\n}\n\n.sync-indicator.active {\n  background: #4CAF50;\n  box-shadow: 0 0 10px rgba(76, 175, 80, 0.6);\n  animation: pulse 1.5s infinite ease-in-out;\n}\n\n.next-sync-text {\n  opacity: 0.8;\n}\n\n.last-updated {\n  text-align: center;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.8rem;\n  background: rgba(255, 255, 255, 0.05);\n  padding: 0.5rem;\n  border-radius: 8px;\n  backdrop-filter: blur(5px);\n  margin-top: 0.5rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.update-text {\n  font-style: italic;\n}\n/* --- End of new styles for sync section --- */\n\n.input-section {\n  margin-bottom: 1.5rem;\n  animation: fadeInUp 0.8s ease-out 0.2s both;\n}\n\n.input-group {\n  display: flex;\n  gap: 0.5rem;\n  background: white;\n  padding: 0.5rem;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.input-group:focus-within {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);\n}\n\n.task-input {\n  flex: 1;\n  border: none;\n  outline: none;\n  font-size: 1.1rem;\n  padding: 1rem;\n  border-radius: 8px;\n  background: transparent;\n  transition: all 0.3s ease;\n}\n\n.difficulty-select {\n  border: none;\n  outline: none;\n  font-size: 1rem;\n  padding: 1rem;\n  border-radius: 8px;\n  background: #f8f9fa;\n  cursor: pointer;\n  min-width: 120px;\n  border: 1px solid #e0e0e0;\n}\n\n.difficulty-select:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.task-input::placeholder {\n  color: #999;\n}\n\n.task-input.shake {\n  animation: shake 0.5s ease-in-out;\n}\n\n.add-button {\n  background: linear-gradient(45deg, #4CAF50, #45a049);\n  color: white;\n  border: none;\n  padding: 1rem 1.5rem;\n  border-radius: 8px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  min-width: 140px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n\n.button-content,\n.loading-content {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: center;\n}\n\n.add-button:hover:not(:disabled) {\n  background: linear-gradient(45deg, #45a049, #4CAF50);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);\n}\n\n.add-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  background: #A5D6A7;\n  box-shadow: none;\n}\n\n.spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top: 2px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.updating-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid rgba(102, 126, 234, 0.3);\n  border-top: 2px solid #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-right: 0.5rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.15);\n    opacity: 0.8;\n  }\n}\n\n.filter-section {\n  margin-bottom: 1.5rem;\n  animation: fadeInUp 0.8s ease-out 0.3s both;\n}\n\n.filter-buttons {\n  display: flex;\n  gap: 0.5rem;\n  background: rgba(255, 255, 255, 0.15);\n  padding: 0.5rem;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.filter-btn {\n  flex: 1;\n  background: transparent;\n  color: white;\n  border: none;\n  padding: 0.8rem 1rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  opacity: 0.7;\n}\n\n.filter-btn.active {\n  background: white;\n  color: #667eea;\n  opacity: 1;\n  font-weight: 600;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\n}\n\n.filter-btn:hover:not(.active) {\n  opacity: 1;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.tasks-section {\n  animation: fadeInUp 0.8s ease-out 0.4s both;\n}\n\n.task-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  /* IMPORTANT: Added for correct absolute positioning of leaving items */\n  position: relative;\n}\n\n.task-item {\n  background: white;\n  margin-bottom: 1rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  /* General transition for non-animation properties. Ensure this doesn't conflict. */\n  transition: all 0.3s ease;\n  overflow: hidden;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  /* Hint to the browser for animation performance */\n  will-change: transform, opacity;\n}\n\n.task-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.task-item.deleting {\n  opacity: 0.6;\n  transform: scale(0.95);\n  /* Ensure deleting also has its own consistent transition if applied separately */\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.task-item.completed {\n  opacity: 0.8; /* Keep this for static display of completed tasks */\n  background: #f0f0f0;\n}\n\n.task-item.updating {\n  opacity: 0.7;\n}\n\n.task-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1.2rem;\n}\n\n.task-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n}\n\n.checkbox-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n}\n\n.checkbox {\n  width: 24px;\n  height: 24px;\n  border: 2px solid #ddd;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.checkbox.checked {\n  background: #4CAF50;\n  border-color: #4CAF50;\n}\n\n.checkmark {\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n.task-info {\n  flex: 1;\n}\n\n.task-text {\n  font-size: 1.1rem;\n  color: #333;\n  display: block;\n  margin-bottom: 0.5rem;\n  transition: all 0.3s ease;\n  word-break: break-word;\n}\n\n.task-text.completed {\n  text-decoration: line-through;\n  color: #999;\n}\n\n.task-meta {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.difficulty-badge {\n  padding: 0.2rem 0.6rem;\n  border-radius: 12px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.difficulty-badge.easy {\n  background: #d4edda;\n  color: #155724;\n}\n\n.difficulty-badge.normal {\n  background: #fff3cd;\n  color: #856404;\n}\n\n.difficulty-badge.hard {\n  background: #f8d7da;\n  color: #721c24;\n}\n\n.task-date {\n  font-size: 0.8rem;\n  color: #999;\n}\n\n.task-actions {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-shrink: 0;\n}\n\n.delete-button {\n  background: linear-gradient(45deg, #f44336, #d32f2f);\n  color: white;\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 1.5rem;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n\n.delete-button:hover:not(:disabled) {\n  background: linear-gradient(45deg, #d32f2f, #f44336);\n  transform: scale(1.1);\n  box-shadow: 0 4px 8px rgba(244, 67, 54, 0.3);\n}\n\n.delete-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  background: #FFCDD2;\n  box-shadow: none;\n}\n\n.delete-icon {\n  line-height: 1;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: white;\n  opacity: 0.8;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.empty-icon {\n  font-size: 4rem;\n  margin-bottom: 1rem;\n  animation: bounce 2s infinite;\n}\n\n.empty-text {\n  font-size: 1.2rem;\n  margin: 0;\n}\n\n/* Animations */\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translate3d(0, -100%, 0);\n  }\n  to {\n    opacity: 1;\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translate3d(0, 100%, 0);\n  }\n  to {\n    opacity: 1;\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n  20%, 40%, 60%, 80% { transform: translateX(5px); }\n}\n\n@keyframes bounce {\n  0%, 20%, 53%, 80%, 100% {\n    animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);\n    transform: translate3d(0,0,0);\n  }\n  40%, 43% {\n    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);\n    transform: translate3d(0, -30px, 0);\n  }\n  70% {\n    animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);\n    transform: translate3d(0, -15px, 0);\n  }\n  90% { transform: translate3d(0,-4px,0); }\n}\n\n/* ---- UNIFIED Transition group animations for filtering ---- */\n.task-list-enter-active,\n.task-list-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease; /* Unified transition for enter and leave */\n}\n\n/*\n  For enter and leave, we will use symmetrical transforms.\n*/\n.task-list-enter-from {\n  opacity: 0;\n  transform: translateX(-30px) scale(0.9); /* Starts faded, smaller, and off to the left */\n}\n\n/*\n  IMPORTANT FIX for consistent fade-out:\n  By explicitly setting `opacity: 1` here, any task (completed or not) will first snap to full opacity\n  when the leave transition *starts*, then fade to `opacity: 0` as defined in `task-list-leave-to`.\n  This makes the visual fade-out identical in range (1 to 0) and duration (0.3s).\n  NOTE: For completed tasks, this might cause a very brief flicker (from 0.8 to 1) just before fading to 0.\n*/\n.task-list-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  opacity: 1; /* <-- This forces the starting opacity to 1 for the fade-out */\n\n  position: absolute;\n  width: 100%; /* Important: maintain original width during transition */\n  top: 0; /* Align with the current top position of where it was */\n  left: 0; /* Align with the current left position */\n  right: 0; /* Ensure full width */\n  margin-bottom: 0 !important; /* Prevent margins from affecting vertical layout */\n}\n\n.task-list-leave-to {\n  opacity: 0;\n  transform: translateX(30px) scale(0.9); /* Ends faded, smaller, and off to the right */\n}\n\n/* For elements that are moving (due to other items being added/removed) */\n.task-list-move {\n  transition: transform 0.3s ease; /* Consistent transition duration for movement */\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .task-container {\n    padding: 1rem;\n    min-height: calc(100vh - 50px);\n  }\n\n  .title {\n    font-size: 2rem;\n  }\n\n  .stats {\n    gap: 1rem;\n    flex-wrap: wrap;\n  }\n\n  .stat-item {\n    padding: 0.8rem;\n    flex: 1 1 auto;\n  }\n\n  .stat-number {\n    font-size: 1.5rem;\n  }\n\n  .sync-controls {\n    flex-direction: column;\n    gap: 0.8rem;\n    padding: 0.8rem;\n  }\n\n  .refresh-button, .sync-toggle-button {\n    width: 100%;\n    min-width: unset;\n  }\n\n  .auto-sync-toggle {\n    flex-direction: column;\n    align-items: center;\n    gap: 0.8rem;\n    width: 100%;\n  }\n\n  .sync-status {\n    width: 100%;\n    justify-content: center;\n    margin-left: 0;\n  }\n\n  .input-group {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .add-button {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .filter-buttons {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .task-content {\n    padding: 1rem;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 1rem;\n  }\n\n  .task-left {\n    width: 100%;\n  }\n\n  .task-info {\n    width: calc(100% - 34px);\n  }\n\n  .task-text {\n    font-size: 1rem;\n  }\n\n  .task-meta {\n    flex-direction: row;\n    align-items: center;\n    gap: 0.8rem;\n    margin-top: 0.5rem;\n  }\n\n  .task-actions {\n    width: 100%;\n    justify-content: flex-end;\n    margin-top: 1rem;\n  }\n}\n</style>\n","import script from \"./MainPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MainPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MainPage.vue?vue&type=style&index=0&id=b7b29240&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b7b29240\"]])\n\nexport default __exports__","// src/router/index.js\nimport { createRouter, createWebHashHistory } from 'vue-router';\nimport LoginView from '@/views/LoginView.vue';\nimport RegisterView from '@/views/RegisterView.vue';\nimport ResetPasswordView from '@/views/ResetPasswordView.vue';\nimport MainPage from '@/components/MainPage.vue';\n\nimport { auth } from '../firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\n\nconst routes = [\n  {\n    path: '/',\n    name: 'root',\n    redirect: { name: 'tasks' }, // Default redirect to tasks if authenticated\n    meta: {\n      requiresAuth: true // This route implicitly requires authentication via redirect\n    }\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: LoginView,\n    meta: {\n      requiresAuth: false // Public page\n    }\n  },\n  {\n    path: '/register',\n    name: 'register',\n    component: RegisterView,\n    meta: {\n      requiresAuth: false // Public page\n    }\n  },\n  {\n    path: '/reset-password',\n    name: 'reset-password',\n    component: ResetPasswordView,\n    meta: {\n      requiresAuth: false // Public page\n    }\n  },\n  {\n    path: '/tasks',\n    name: 'tasks',\n    component: MainPage,\n    meta: {\n      requiresAuth: true // Protected page\n    }\n  },\n  // Catch-all route for 404 errors, redirects to root which then redirects to tasks/login\n  {\n    path: '/:catchAll(.*)',\n    redirect: '/'\n  }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(process.env.BASE_URL),\n  routes\n});\n\n// A Promise to ensure Firebase Auth state is resolved before any routing decision.\n// This prevents race conditions where the router tries to redirect before Firebase confirms user status.\nconst getCurrentUser = () => {\n  return new Promise((resolve, reject) => {\n    const unsubscribe = onAuthStateChanged(\n      auth,\n      user => {\n        unsubscribe(); // Unsubscribe immediately after the first state change\n        resolve(user);\n      },\n      reject\n    );\n  });\n};\n\nrouter.beforeEach(async (to, from, next) => {\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  const currentUser = await getCurrentUser(); // Wait for the current user to be determined\n\n  // Scenario 1: Route requires authentication AND user is NOT logged in OR email is not verified.\n  if (requiresAuth && (!currentUser || !currentUser.emailVerified)) {\n    // If the user is trying to access a protected route (like /tasks) while logged out\n    // or with an unverified email, redirect to the login page.\n    if (to.path !== '/login' && to.path !== '/register' && to.path !== '/reset-password') {\n      console.log(`Redirecting to /login from ${to.path} (requires auth and/or email verification, but condition not met).`);\n      next('/login');\n    } else {\n      // If the destination is already a public auth page (login, register, reset), allow access.\n      console.log(`Allowing navigation to ${to.path} (public auth page).`);\n      next();\n    }\n  }\n  // Scenario 2: User IS logged in AND email IS verified AND trying to access a public authentication page\n  // (login, register, reset-password, or the root path which redirects to tasks).\n  else if ((to.path === '/login' || to.path === '/register' || to.path === '/reset-password' || to.path === '/') && currentUser && currentUser.emailVerified) {\n    console.log(`Redirecting to /tasks from ${to.path} (user logged in and email verified, but on public auth page).`);\n    next('/tasks');\n  }\n  // Scenario 3: All other cases (user is logged in and verified accessing a protected route,\n  // or user is not logged in and accessing a non-protected public route).\n  else {\n    console.log(`Allowing navigation to ${to.path} (no special auth redirect needed).`);\n    next();\n  }\n});\n\nexport default router;","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\ncreateApp(App).use(router).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktodo_focus\"] = self[\"webpackChunktodo_focus\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6410); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","_ctx","pageTitle","_hoisted_2","_hoisted_3","_hoisted_4","$data","user","_createBlock","_component_router_link","to","_cache","_hoisted_5","onClick","args","$options","toggleDropdown","_hoisted_6","displayName","email","_normalizeClass","dropdownOpen","_hoisted_7","handleLogout","openDeleteConfirmation","_hoisted_8","_createVNode","_component_router_view","Component","_Transition","name","mode","_resolveDynamicComponent","_component_FooterElement","_component_ConfirmationModal","isVisible","showDeleteConfirmationModal","title","message","confirmButtonText","cancelButtonText","onConfirm","handleDeleteAccount","onCancel","closeDeleteConfirmation","showReauthModal","Отмена","closeReauthModalAndLogout","closeReauthModal","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","db","getAnalytics","getFirestore","auth","getAuth","initializeAppCheck","provider","ReCaptchaV3Provider","isTokenAutoRefreshEnabled","setPersistence","browserLocalPersistence","then","console","log","catch","error","errorCode","code","errorMessage","currentYear","computed","Date","getFullYear","__exports__","$props","_withModifiers","cancel","showCloseButton","confirm","props","type","Boolean","default","String","methods","this","$emit","components","FooterElement","ConfirmationModal","data","created","onAuthStateChanged","currentUser","signOut","$route","path","$router","replace","alert","handleClickOutside","event","userInfoDropdown","$el","querySelector","contains","target","openReauthModal","uid","tasksRef","collection","userTasksQuery","query","where","querySnapshot","getDocs","deletePromises","forEach","doc","push","deleteDoc","ref","Promise","all","size","deleteUser","mounted","document","addEventListener","beforeUnmount","removeEventListener","render","router","useRouter","password","showPassword","rememberMe","isLoading","isResendLoading","errors","loginError","showResendEmailButton","resendCooldown","resendCooldownInterval","resendSuccessMessage","unverifiedUser","isFormValid","value","trim","validateEmail","emailRegex","test","validatePassword","length","clearError","field","startCoolDown","duration","clearInterval","setInterval","handleLogin","async","browserSessionPersistence","userCredential","signInWithEmailAndPassword","emailVerified","resendVerificationEmail","userToVerify","sendEmailVerification","onBeforeUnmount","onSubmit","$event","placeholder","onBlur","onInput","required","_hoisted_9","_hoisted_10","_hoisted_11","disabled","_hoisted_14","_hoisted_13","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","confirmPassword","showConfirmPassword","agreeToTerms","validFields","showSuccessModal","showErrorModal","registerErrorMessage","passwordStrength","pwd","strength","passwordStrengthClass","passwordStrengthText","validateConfirmPassword","openSuccessModal","handleSuccessConfirm","handleSuccessCancel","openErrorModal","closeErrorModal","handleRegister","Object","keys","createUserWithEmailAndPassword","_hoisted_12","href","handleResetPassword","isSuccess","sendPasswordResetEmail","SYNC_INTERVAL","newTask","newTaskDifficulty","tasks","inputError","isAddingTask","currentFilter","isRefreshing","autoSyncEnabled","syncIndicator","lastUpdated","nextSyncCountdown","currentTime","now","autoSyncIntervalId","countdownIntervalId","updateCurrentTimeIntervalId","completedTasks","filter","task","completed","pendingTasks","filteredTasks","sort","a","b","dateA","createdAt","toDate","dateB","getTime","loadUserPreferences","userId","docRef","docSnap","getDoc","exists","preferences","e","saveUserPreference","key","setDoc","merge","loadTasks","q","orderBy","docs","map","deleting","updating","difficulty","text","setTimeout","refreshTasks","stopAutoSync","startAutoSync","toggleAutoSync","addTask","resolve","taskData","addDoc","unshift","toggleTask","find","t","originalCompleted","updateDoc","deleteTask","taskIndex","findIndex","taskToDelete","getDifficultyLabel","labels","easy","normal","hard","formatDate","timestamp","date","isNaN","toLocaleDateString","day","month","year","formatLastUpdated","diffSeconds","Math","floor","minutes","hours","getEmptyStateText","onMounted","onUnmounted","__props","msg","_hoisted_19","onKeyup","_withKeys","_hoisted_26","_hoisted_25","_hoisted_27","_hoisted_28","active","_hoisted_29","_TransitionGroup","tag","_Fragment","_renderList","_hoisted_30","_hoisted_31","checked","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_41","_hoisted_42","routes","redirect","meta","requiresAuth","component","LoginView","RegisterView","ResetPasswordView","MainPage","createRouter","history","createWebHashHistory","getCurrentUser","reject","unsubscribe","beforeEach","from","next","matched","some","record","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}